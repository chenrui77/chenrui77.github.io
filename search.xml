<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>tomcatå ç”¨é—®é¢˜</title>
      <link href="/2022/08/19/tomcat%E5%8D%A0%E7%94%A8/"/>
      <url>/2022/08/19/tomcat%E5%8D%A0%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p>Microsoft Windows [ç‰ˆæœ¬ 10.0.19044.2251]<br>(c) Microsoft Corporationã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚</p><p>C:\Users\PC&gt;netstat -aon|findstr 9006<br>  TCP    0.0.0.0:9006           0.0.0.0:0              LISTENING       19164<br>  TCP    [::]:9006              [::]:0                 LISTENING       19164</p><p>C:\Users\PC&gt;tasklist|findstr 19164<br>java.exe                     19164 Console                    1    547,712 K</p><p>C:\Users\PC&gt;taskkill /f /t /im java.exe<br>æˆåŠŸ: å·²ç»ˆæ­¢ PID 21628 (å±äº PID 19164 å­è¿›ç¨‹)çš„è¿›ç¨‹ã€‚<br>æˆåŠŸ: å·²ç»ˆæ­¢ PID 17388 (å±äº PID 22276 å­è¿›ç¨‹)çš„è¿›ç¨‹ã€‚<br>æˆåŠŸ: å·²ç»ˆæ­¢ PID 19164 (å±äº PID 12676 å­è¿›ç¨‹)çš„è¿›ç¨‹ã€‚<br>æˆåŠŸ: å·²ç»ˆæ­¢ PID 22276 (å±äº PID 7832 å­è¿›ç¨‹)çš„è¿›ç¨‹ã€‚</p><p>C:\Users\PC&gt;</p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> tomcat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux esç¯å¢ƒéƒ¨ç½²</title>
      <link href="/2022/08/17/linux%20es%E9%83%A8%E7%BD%B2/"/>
      <url>/2022/08/17/linux%20es%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<h1 id="linux-eséƒ¨ç½²æŒ‡å—"><a href="#linux-eséƒ¨ç½²æŒ‡å—" class="headerlink" title="linux eséƒ¨ç½²æŒ‡å—"></a>linux eséƒ¨ç½²æŒ‡å—</h1><h2 id="1ã€å®‰è£…javaç¯å¢ƒ"><a href="#1ã€å®‰è£…javaç¯å¢ƒ" class="headerlink" title="1ã€å®‰è£…javaç¯å¢ƒ"></a>1ã€å®‰è£…javaç¯å¢ƒ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum search java|grep jdk</span><br><span class="line">yum -y install java-1.8.0-openjdk</span><br></pre></td></tr></table></figure><h2 id="2ã€å®‰è£…es"><a href="#2ã€å®‰è£…es" class="headerlink" title="2ã€å®‰è£…es"></a>2ã€å®‰è£…es</h2><h3 id="2-1ä¸‹è½½å¹¶è§£å‹è½¯ä»¶åŒ…"><a href="#2-1ä¸‹è½½å¹¶è§£å‹è½¯ä»¶åŒ…" class="headerlink" title="2.1ä¸‹è½½å¹¶è§£å‹è½¯ä»¶åŒ…"></a>2.1ä¸‹è½½å¹¶è§£å‹è½¯ä»¶åŒ…</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/src/</span><br><span class="line">wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.17.6-linux-x86_64.tar.gz</span><br><span class="line"></span><br><span class="line">wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.17.6-linux-x86_64.tar.gz.sha512</span><br><span class="line"></span><br><span class="line">shasum -a 512 -c elasticsearch-7.17.6-linux-x86_64.tar.gz.sha512</span><br><span class="line"></span><br><span class="line">tar -xzf elasticsearch-7.17.6-linux-x86_64.tar.gz</span><br><span class="line"></span><br><span class="line">mv elasticsearch-7.17.6 /usr/local/es/</span><br><span class="line"></span><br><span class="line">useradd es</span><br><span class="line"></span><br><span class="line">chown -R es:es /usr/local/es/</span><br><span class="line"></span><br><span class="line">chmod -R 755 /usr/local/es</span><br></pre></td></tr></table></figure><h3 id="2-2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#2-2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="2.2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>2.2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><h4 id="2-2-1-ç¼–è¾‘jvm-option"><a href="#2-2-1-ç¼–è¾‘jvm-option" class="headerlink" title="2.2.1 ç¼–è¾‘jvm.option"></a>2.2.1 ç¼–è¾‘jvm.option</h4><p>ElasticsearchåŸºäºLuceneçš„ï¼Œè€ŒLuceneåº•å±‚æ˜¯javaå®ç°ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é…ç½®jvmå‚æ•°ã€‚ç¼–è¾‘jvm.option</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi jvm.options</span><br><span class="line">ä¿®æ”¹é»˜è®¤é…ç½®ï¼š-Xms1g -Xmx1g</span><br></pre></td></tr></table></figure><h4 id="2-2-2-ç¼–è¾‘elasticsearch-yml"><a href="#2-2-2-ç¼–è¾‘elasticsearch-yml" class="headerlink" title="2.2.2 ç¼–è¾‘elasticsearch.yml"></a>2.2.2 ç¼–è¾‘elasticsearch.yml</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#é…ç½®elasticsearchçš„é›†ç¾¤åç§°</span><br><span class="line">cluster.name: skywalking-es</span><br><span class="line">#é…ç½®èŠ‚ç‚¹å</span><br><span class="line">node.name: node-1</span><br><span class="line">#è®¾ç½®ç´¢å¼•æ•°æ®çš„å­˜å‚¨è·¯å¾„ï¼Œé»˜è®¤æ˜¯esæ ¹ç›®å½•ä¸‹çš„dataæ–‡ä»¶å¤¹ï¼Œå¯ä»¥è®¾ç½®å¤šä¸ªå­˜å‚¨è·¯å¾„ï¼Œç”¨é€—å·éš”å¼€</span><br><span class="line">path.data: /usr/local/es/data</span><br><span class="line">#è®¾ç½®æ—¥å¿—æ–‡ä»¶çš„å­˜å‚¨è·¯å¾„ï¼Œé»˜è®¤æ˜¯esæ ¹ç›®å½•ä¸‹çš„logsæ–‡ä»¶å¤¹</span><br><span class="line">path.logs: /usr/local/es/logs</span><br><span class="line">#è®¾ç½®bind_hostå’Œpublish_hostï¼Œè®¾ç½®ä¸º0.0.0.0å…è®¸å¤–ç½‘è®¿é—®</span><br><span class="line">network.host: 0.0.0.0</span><br><span class="line">#http.portè®¾ç½®å¯¹å¤–æœåŠ¡çš„httpç«¯å£ï¼Œé»˜è®¤ä¸º9200</span><br><span class="line">http.port: 9200</span><br><span class="line"># é…ç½®èŠ‚ç‚¹ä¿¡æ¯ï¼ˆè¿™é‡Œæˆ‘ä»¬åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹æ‰€ä»¥é…ç½®äº†1ä¸ªï¼‰</span><br><span class="line">cluster.initial_master_nodes: [&quot;node-1&quot;]</span><br></pre></td></tr></table></figure><h3 id="2-3ã€ä¿®æ”¹ç³»ç»Ÿç›¸å…³é…ç½®æ–‡ä»¶"><a href="#2-3ã€ä¿®æ”¹ç³»ç»Ÿç›¸å…³é…ç½®æ–‡ä»¶" class="headerlink" title="2.3ã€ä¿®æ”¹ç³»ç»Ÿç›¸å…³é…ç½®æ–‡ä»¶"></a>2.3ã€ä¿®æ”¹ç³»ç»Ÿç›¸å…³é…ç½®æ–‡ä»¶</h3><h4 id="2-3-1-ä¿®æ”¹-etc-security-limits-confæ–‡ä»¶"><a href="#2-3-1-ä¿®æ”¹-etc-security-limits-confæ–‡ä»¶" class="headerlink" title="2.3.1 ä¿®æ”¹/etc/security/limits.confæ–‡ä»¶"></a>2.3.1 ä¿®æ”¹/etc/security/limits.confæ–‡ä»¶</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/security/limits.conf</span><br><span class="line">#åœ¨æ–‡ä»¶æœ€åï¼Œå¢åŠ å¦‚ä¸‹é…ç½®ï¼š</span><br><span class="line"></span><br><span class="line">* soft nofile 65536</span><br><span class="line">* hard nofile 65536</span><br></pre></td></tr></table></figure><h4 id="2-3-2-ä¿®æ”¹-etc-sysctl-confæ–‡ä»¶"><a href="#2-3-2-ä¿®æ”¹-etc-sysctl-confæ–‡ä»¶" class="headerlink" title="2.3.2 ä¿®æ”¹/etc/sysctl.confæ–‡ä»¶"></a>2.3.2 ä¿®æ”¹/etc/sysctl.confæ–‡ä»¶</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysctl.conf</span><br></pre></td></tr></table></figure><p>æœ€åæ·»åŠ ä¸€è¡Œ vm.max_map_count=655360</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vm.max_map_count=655360</span><br></pre></td></tr></table></figure><p>æ·»åŠ å®Œæ¯•ä¹‹åï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl -p</span><br></pre></td></tr></table></figure><h3 id="2-4-ã€å¯åŠ¨es"><a href="#2-4-ã€å¯åŠ¨es" class="headerlink" title="2.4 ã€å¯åŠ¨es"></a>2.4 ã€å¯åŠ¨es</h3><h4 id="2-4-1-åˆ‡æ¢åˆ°esç”¨æˆ·"><a href="#2-4-1-åˆ‡æ¢åˆ°esç”¨æˆ·" class="headerlink" title="2.4.1 åˆ‡æ¢åˆ°esç”¨æˆ·"></a>2.4.1 åˆ‡æ¢åˆ°esç”¨æˆ·</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su es</span><br></pre></td></tr></table></figure><h4 id="2-4-2-å¯åŠ¨es"><a href="#2-4-2-å¯åŠ¨es" class="headerlink" title="2.4.2 å¯åŠ¨es"></a>2.4.2 å¯åŠ¨es</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/es/config</span><br><span class="line">../bin/elasticsearch -d</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linuxå¸¸ç”¨å¼€å‘ç¯å¢ƒéƒ¨ç½²</title>
      <link href="/2022/08/17/linux%20%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2/"/>
      <url>/2022/08/17/linux%20%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<p>linux ç¯å¢ƒéƒ¨ç½²</p><h5 id="1-nginx-å®‰è£…ï¼šhttp-nginx-org-en-download-html"><a href="#1-nginx-å®‰è£…ï¼šhttp-nginx-org-en-download-html" class="headerlink" title="1 nginx å®‰è£…ï¼šhttp://nginx.org/en/download.html"></a>1 nginx å®‰è£…ï¼š<a href="http://nginx.org/en/download.html">http://nginx.org/en/download.html</a></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://nginx.org/download/nginx-1.16.1.tar.gz</span><br></pre></td></tr></table></figure><h5 id="2-jdkå®‰è£…ï¼šhttps-jdk-java-net-18"><a href="#2-jdkå®‰è£…ï¼šhttps-jdk-java-net-18" class="headerlink" title="2  jdkå®‰è£…ï¼šhttps://jdk.java.net/18/"></a>2  jdkå®‰è£…ï¼š<a href="https://jdk.java.net/18/">https://jdk.java.net/18/</a></h5><p>2-2.1 è§£å‹æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨åè§£å‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf ä¸Šä¼ çš„jdkå‹ç¼©åŒ…å</span><br></pre></td></tr></table></figure><p>2-2.2  é…ç½®ç¯å¢ƒå˜é‡</p><p>â€‹    æ‰“å¼€é…ç½®æ–‡ä»¶    </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure><p>â€‹    è¿½åŠ  wqé€€å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">JAVA_HOME=/usr/local/java/jdkæ–‡ä»¶å</span><br><span class="line">CLASSPATH=%JAVA_HOME%/lib:%JAVA_HOME%/jre/lib</span><br><span class="line">PATH=$PATH:$JAVA_HOME/bin:$JAVA_HOME/jre/bin</span><br><span class="line">export PATH CLASSPATH JAVA_HOME</span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼š`/usr/local/java/jdkæ–‡ä»¶å`ä¸­çš„`jdkæ–‡ä»¶å`éœ€è¦æ”¹ä¸ºè‡ªå·±å‡†ç¡®çš„æ–‡ä»¶åç§°å“¦</span><br></pre></td></tr></table></figure><p>2-2.3  ä½¿é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p>2-2.4  æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure><h5 id="3-maven-å®‰è£…-https-maven-apache-org-download-cgi"><a href="#3-maven-å®‰è£…-https-maven-apache-org-download-cgi" class="headerlink" title="3 maven å®‰è£…  https://maven.apache.org/download.cgi"></a>3 maven å®‰è£…  <a href="https://maven.apache.org/download.cgi">https://maven.apache.org/download.cgi</a></h5><p> <a href="https://archive.apache.org/dist/maven/maven-3/">archives</a>  å®‰è£…å…¶ä»–ç‰ˆæœ¬</p><p>3.1 è§£å‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf apache-maven-3.6.3-bin.tar.gz</span><br></pre></td></tr></table></figure><p>3.2 é…ç½®mavenä»“åº“ï¼Œè®¾ç½®é˜¿é‡Œé•œåƒä»“åº“ï¼Œä¸€å®šè¦é…ç½®ä¸€ä¸‹ï¼Œå›½å†…çš„ä¸‹è½½jarå¿«äº›ï¼Œé¦–å…ˆè¿›å…¥cd apache-maven-3.6.3ç›®å½•ï¼Œåˆ›å»ºä»“åº“å­˜å‚¨ç›®å½•ï¼Œmkdir repositoryã€‚å¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd apache-maven-3.6.3   #è¿›å…¥apache-maven-3.6.3ç›®å½•</span><br><span class="line">mkdir repository    #åˆ›å»ºrepositoryç›®å½•</span><br></pre></td></tr></table></figure><p>3.3 è¿›å…¥cd confç›®å½•ï¼Œç¼–è¾‘ vi settings.xmlæ–‡ä»¶ï¼Œæ‰¾åˆ°Â·localRepositoryä¸‹é¢å¤åˆ¶ä¸€è¡ŒåŠ ä¸Š/usr/local/apache-maven-3.6.3/repositoryï¼Œ åœ¨æ‰¾åˆ°mirror åŠ ä¸Šé˜¿é‡Œçš„ä»“åº“é…ç½®ï¼Œé…ç½®å®Œæˆä¿å­˜é€€å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cd conf            # è¿›å…¥confç›®å½•</span><br><span class="line">vi settings.xm # settings.xmæ–‡ä»¶</span><br><span class="line"></span><br><span class="line">&lt;localRepository&gt;/usr/local/apache-maven-3.6.3/repository&lt;/localRepository&gt;</span><br><span class="line"></span><br><span class="line">&lt;mirror&gt;</span><br><span class="line">      &lt;id&gt;alimaven&lt;/id&gt;</span><br><span class="line">      &lt;name&gt;aliyun maven&lt;/name&gt;</span><br><span class="line">       &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt;</span><br><span class="line">      &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;</span><br><span class="line">&lt;/mirror&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>3.4 .é…ç½®mavenç¯å¢ƒå˜é‡ï¼Œç¼–è¾‘ï¼švi /etc/profile æ–‡ä»¶ï¼Œç¿»åˆ°æœ€åä¸€è¡ŒåŠ ä¸Š export MAVEN_HOME=/usr/local/apache-maven-3.6.3 export PATH=P A T H : PATH:PATH:MAVEN_HOME/bin ä¿å­˜é€€å‡º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/profile</span><br><span class="line"></span><br><span class="line">export MAVEN_HOME=/usr/local/apache-maven-3.6.3</span><br><span class="line">export PATH=$PATH:$MAVEN_HOME/bin</span><br></pre></td></tr></table></figure><p>3.5 ä½¿é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p>3.6  æµ‹è¯•æ˜¯å¦æˆåŠŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn -v</span><br></pre></td></tr></table></figure><h5 id="4-mysql-å®‰è£…-https-downloads-mysql-com-archives-community"><a href="#4-mysql-å®‰è£…-https-downloads-mysql-com-archives-community" class="headerlink" title="4 mysql å®‰è£… https://downloads.mysql.com/archives/community/"></a>4 mysql å®‰è£… <a href="https://downloads.mysql.com/archives/community/">https://downloads.mysql.com/archives/community/</a></h5><p> 4.1.1é¦–å…ˆæ£€æŸ¥è‡ªå·±ç”µè„‘æœ‰æ²¡æœ‰å®‰è£…è¿‡mysqlï¼Œè¾“å…¥å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep mysql </span><br></pre></td></tr></table></figure><p> 4.1.2 å¦‚æœæœ‰åˆ™æ¸…ç†å¹²å‡€åœ¨å®‰è£…ï¼Œè¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">whereis mysql</span><br><span class="line">find / -name mysql</span><br></pre></td></tr></table></figure><p> 4.1.3 æ‰¾åˆ°æ–‡ä»¶å¤¹ç›®å½•ï¼Œå†æŠŠå®ƒåˆ é™¤ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /--æ–‡ä»¶ç›®å½•</span><br></pre></td></tr></table></figure><p> 4.2.1 ç„¶åæ£€æŸ¥ä½ ç³»ç»Ÿæ˜¯å¦è‡ªå¸¦mariadbï¼Œè¾“å…¥å¦‚ä¸‹æ£€æŸ¥ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep mariadb </span><br></pre></td></tr></table></figure><p> 4.2.2 å¦‚æœæœ‰åˆ™éœ€è¦æŠŠå®ƒå¸è½½æ‰ï¼Œå› ä¸ºä¼šå’ŒMysqlå¼•èµ·å†²çªï¼Œè¾“å…¥å¦‚ä¸‹å¸è½½æ‰ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -e --nodeps mariadb-libs</span><br></pre></td></tr></table></figure><p>å¼€å§‹ä¸‹è½½</p><p>1å…ˆæ£€æŸ¥æ˜¯å¦æœ‰mysqlç”¨æˆ·ç»„å’Œmysqlç”¨æˆ·,æ²¡æœ‰å°±æ·»åŠ æœ‰å°±å¿½ç•¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groups mysql </span><br></pre></td></tr></table></figure><p>2æ·»åŠ ç”¨æˆ·ç»„å’Œç”¨æˆ· </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd mysql &amp;&amp; useradd -r -g mysql mysql  groudel  userdel â€“åˆ é™¤ç”¨æˆ·ç»„</span><br></pre></td></tr></table></figure><p>3è¿›å…¥åˆ°mysqlç›®å½•ä¸‹ï¼Œå…ˆåˆ›å»ºdataç›®å½•ç”¨äºä¿å­˜æ•°æ®æ–‡ä»¶ã€‚è¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir data</span><br></pre></td></tr></table></figure><p>4åˆ›å»ºæ•°æ®ç›®å½•å¹¶èµ‹äºˆæƒé™ï¼ˆè¿”å›ä¸Šçº§ç›®å½•ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chown -R mysql:mysql /usr/local/mysql  --æˆæƒ</span><br><span class="line">chmod -R 755 /usr/local/mysql</span><br></pre></td></tr></table></figure><p>ç„¶åå†è¿›å…¥**<code>bin</code>**ç›®å½•ä¸‹ï¼Œæ‰§è¡Œåˆå§‹åŒ–å®‰è£…å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./mysqld --initialize --user=mysql --datadir=/usr/local/mysql/data --basedir=/usr/local/mysql</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä¼šè·å¾—ä¸€ä¸ªåˆå§‹å¯†ç </p><p><img src="C:\Users\PC\AppData\Roaming\Typora\typora-user-images\image-20221031150128543.png" alt="image-20221031150128543"></p><p>å¦‚æœä»¥ä¸Šä¸æˆåŠŸ åˆ™éœ€è¦æ£€æŸ¥ä»¥ä¸‹æ’ä»¶æ˜¯å¦å®‰è£…æˆåŠŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y install numactl</span><br><span class="line">yum install  libaio-devel.x86_64</span><br></pre></td></tr></table></figure><p>å°è¯•å¯åŠ¨mysql  ä»¥ä¸‹å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/mysql/support-files/mysql.server start</span><br></pre></td></tr></table></figure><p>å¦‚æœå¯åŠ¨å‡ºç°æœªå‡ºç°é—®é¢˜ è¯·æ£€æŸ¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ps -ef|grep mysql | grep -v grep</span><br><span class="line">ps -ef|grep mysqld | grep -v grep</span><br></pre></td></tr></table></figure><p>å¦‚æœæœ‰é—®é¢˜ ä¹Ÿæ£€æŸ¥ä¸€ä¸‹ å¦‚æœå­˜åœ¨ä»¥ä¸ŠæœåŠ¡ åˆ™killæ‰</p><p>ç¡®è®¤æ²¡æœåŠ¡å æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨    </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/mysql/support-files/mysql.server start</span><br></pre></td></tr></table></figure><p>å¯åŠ¨æœåŠ¡æˆåŠŸå</p><p>6 æ·»åŠ è½¯è¿æ¥ï¼Œå¹¶é‡å¯mysqlæœåŠ¡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/local/mysql/support-files/mysql.server /etc/init.d/mysql</span><br></pre></td></tr></table></figure><p>7 æ£€æŸ¥æ˜¯å¦æˆåŠŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ll /etc/init.d/mysql</span><br></pre></td></tr></table></figure><p>8 å†æ·»åŠ binç›®å½•çš„è½¯è¿æ¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/chenrui/mysql5.7/bin/mysql /usr/local/bin/mysql</span><br></pre></td></tr></table></figure><p>9  æ£€æŸ¥æ˜¯å¦æˆåŠŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ll /usr/local/bin/mysql</span><br></pre></td></tr></table></figure><p>10 ç„¶åé‡å¯æœåŠ¡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysql restart</span><br></pre></td></tr></table></figure><p>11 ç™»å½•</p><p>è¾“å…¥ç”Ÿæˆçš„éšæœºå¯†ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root â€“p</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å¯†ç  å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set password for root@localhost = password(â€˜éœ€è¦ä¿®æ”¹çš„å¯†ç â€™);</span><br></pre></td></tr></table></figure><p> å¼€æ”¾è¿œç¨‹è¿æ¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;use mysql;</span><br><span class="line">msyql&gt;update user set user.Host=&#x27;%&#x27; where user.User=&#x27;root&#x27;;</span><br><span class="line">mysql&gt;flush privileges;</span><br></pre></td></tr></table></figure><p>è®¾ç½®å¼€æœºå¯åŠ¨</p><p>è®¾ç½®å¼€æœºè‡ªåŠ¨å¯åŠ¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1ã€å°†æœåŠ¡æ–‡ä»¶æ‹·è´åˆ°init.dä¸‹ï¼Œå¹¶é‡å‘½åä¸ºmysql</span><br><span class="line"></span><br><span class="line">[root@localhost /]# cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld</span><br><span class="line"></span><br><span class="line">2ã€èµ‹äºˆå¯æ‰§è¡Œæƒé™</span><br><span class="line"></span><br><span class="line">[root@localhost /]# chmod +x /etc/init.d/mysqld</span><br><span class="line"></span><br><span class="line">3ã€æ·»åŠ æœåŠ¡</span><br><span class="line"></span><br><span class="line">[root@localhost /]# chkconfig --add mysqld</span><br><span class="line"></span><br><span class="line">4ã€æ˜¾ç¤ºæœåŠ¡åˆ—è¡¨</span><br><span class="line"></span><br><span class="line">[root@localhost /]# chkconfig --list</span><br></pre></td></tr></table></figure><p>é˜²ç«å¢™æ·»åŠ è®¿é—® æµ‹è¯•è¿æ¥å®Œæˆ</p><p><img src="C:\Users\PC\AppData\Roaming\Typora\typora-user-images\image-20221101100002674.png" alt="image-20221101100002674"></p><h5 id="5-tomcatå®‰è£…-https-downloads-mysql-com-archives-community"><a href="#5-tomcatå®‰è£…-https-downloads-mysql-com-archives-community" class="headerlink" title="5 tomcatå®‰è£… https://downloads.mysql.com/archives/community/"></a>5 tomcatå®‰è£… <a href="https://downloads.mysql.com/archives/community/">https://downloads.mysql.com/archives/community/</a></h5><p><strong>1ã€</strong><em><strong>*ä¸‹è½½Linuxç‰ˆæœ¬*</strong></em><em><strong>*çš„Tomcat*</strong></em></p><p>å®˜ç½‘ä¸‹è½½åœ°å€ï¼š<a href="https://tomcat.apache.org/download-80.cgi">https://tomcat.apache.org/download-80.cgi</a></p><p><strong>2ã€</strong><em><strong>*åœ¨usrç›®å½•ä¸‹æ–°å»ºtomcatç›®å½•ï¼Œç„¶åå°†ä¸‹è½½çš„tomcatæ‹·è´åˆ°æ–°å»ºçš„tomcatç›®å½•ä¸­*</strong></em></p><p>åˆ›å»ºç›®å½•å‘½ä»¤ï¼šmkdir /usr/local/tomcat</p><p><strong>3ã€</strong><em><strong>*è¿›å…¥åˆ°tomcatç›®å½•ä¸­è§£å‹ä¸‹è½½çš„tomcatå®‰è£…åŒ…*</strong></em></p><p>è§£å‹å‘½ä»¤ï¼štar -zxvf apache-tomcat-9.0.82.tar.gz</p><p><strong>4ã€</strong><em><strong>*é…ç½®ç¯å¢ƒå˜é‡*</strong></em></p><p>æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä»¬é…ç½®ç¯å¢ƒå˜é‡çš„å‰ææ˜¯å·²ç»å®‰è£…å¹¶é…ç½®å¥½äº†JDKï¼Œå…·ä½“æ•™ç¨‹ï¼šçœ‹ä¸Šé¢</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">é…ç½®å‘½ä»¤ï¼švim /etc/profile</span><br><span class="line"></span><br><span class="line">è¾“å…¥ä¸Šé¢çš„å‘½ä»¤åï¼Œshift+gå¿«é€Ÿå°†å…‰æ ‡å®šä½åˆ°æœ€åä¸€è¡Œï¼Œç„¶åæŒ‰iï¼Œå†è¾“å…¥ä¸‹é¢ä»£ç </span><br><span class="line"></span><br><span class="line">CATALINA_HOME=/usr/local/tomcat</span><br><span class="line"></span><br><span class="line">å¡«å†™å®Œä»£ç åæŒ‰ESCé”®ï¼Œè¾“å…¥â€œ:wqâ€ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘é¡µé¢</span><br></pre></td></tr></table></figure><p><strong>5ã€</strong><em><strong>*è¾“å…¥ä¸‹é¢å‘½ä»¤è®©è®¾ç½®çš„ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ*</strong></em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç”Ÿæ•ˆå‘½ä»¤ï¼šsource /etc/profile</span><br></pre></td></tr></table></figure><p><strong>6ã€</strong><em><strong>*å¯åŠ¨tomcat*</strong></em></p><p>1ï¼‰ç¬¬ä¸€ç§å¯åŠ¨æ–¹æ³•ï¼šè¿›å…¥åˆ°/usr/tomcat/tomcat8.5/binç›®å½•ä¸‹ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./startup.sh</span><br></pre></td></tr></table></figure><p>2ï¼‰ç¬¬äºŒç§æ–¹æ³•ï¼Œæ— è®ºåœ¨å“ªä¸ªç›®å½•éƒ½å¯ä»¥å¯åŠ¨tomcat</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh /usr/local/tomcat/bin/startup.sh</span><br></pre></td></tr></table></figure><p><strong>7ã€</strong><em><strong>*æŸ¥çœ‹tomcatæ˜¯å¦å¯åŠ¨æˆåŠŸï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹*</strong></em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥çœ‹å‘½ä»¤ï¼š ps -ef | grep tomcat</span><br></pre></td></tr></table></figure><p><strong>8ã€</strong><em><strong>*å…³é—­tomcat*</strong></em></p><p>1ï¼‰ç¬¬ä¸€ç§å¯åŠ¨æ–¹æ³•ï¼šè¿›å…¥åˆ°/usr/tomcat/tomcat8.5/binç›®å½•ä¸‹ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./shutdown.sh</span><br></pre></td></tr></table></figure><p>2ï¼‰ç¬¬äºŒç§æ–¹æ³•ï¼Œæ— è®ºåœ¨å“ªä¸ªç›®å½•éƒ½å¯ä»¥å…³é—­Tomcat</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh /usr/local/tomcat/bin/shutdown.sh</span><br></pre></td></tr></table></figure><p><strong>9ã€</strong><em><strong>*éªŒè¯tomcatæ˜¯å¦å®‰è£…æˆåŠŸ*</strong></em></p><p>Linuxå¯åŠ¨tomcatåï¼Œæˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ï¼šhttp:\IPåœ°å€:8080 å¦‚æœå‡ºç°tomcatçš„ä¸»é¡µåˆ™ä»£è¡¨å®‰è£…æˆåŠŸ</p><p>æç¤ºï¼šå¦‚æœè®¿é—®tomcatä¸»é¡µå¤±è´¥ï¼Œæœ‰å¯èƒ½æ˜¯é˜²ç«å¢™æ²¡æœ‰å…³é—­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">å…³é—­é˜²ç«å¢™å‘½ä»¤ï¼š</span><br><span class="line"></span><br><span class="line">service iptables stop</span><br><span class="line"></span><br><span class="line">chkconfig iptables off</span><br></pre></td></tr></table></figure><h6 id="Linuxä¸‹tomcatåŸŸåé…ç½®"><a href="#Linuxä¸‹tomcatåŸŸåé…ç½®" class="headerlink" title="Linuxä¸‹tomcatåŸŸåé…ç½®"></a>Linuxä¸‹tomcatåŸŸåé…ç½®</h6><p><strong>ä¸€ã€ä¿®æ”¹Linux hostsæ–‡ä»¶</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/hosts</span><br><span class="line">åœ¨æ–‡ä»¶æœ«å°¾åŠ å…¥å¦‚ä¸‹è¿™æ®µï¼š</span><br><span class="line">127.0.0.1  www.test.com</span><br></pre></td></tr></table></figure><p><strong>äºŒã€éœ€è¦tomcatçš„server.xmlæ–‡ä»¶</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/local/tomcat/conf/server.xml</span><br><span class="line"></span><br><span class="line">&lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;www.**.com&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;Host name=&quot;www.**.com&quot;  appBase=&quot;webapps&quot;</span><br><span class="line"></span><br><span class="line">&lt;Connector port=&quot;80&quot; protocol=&quot;HTTP/1.1&quot;</span><br><span class="line">               connectionTimeout=&quot;20000&quot;</span><br><span class="line">               redirectPort=&quot;443&quot; </span><br><span class="line">   URIEncoding=&quot;utf-8&quot;/&gt;</span><br><span class="line">   </span><br><span class="line">&lt;Connector port=&quot;443&quot; protocol=&quot;HTTP/1.1&quot;</span><br><span class="line">               maxThreads=&quot;150&quot; SSLEnabled=&quot;true&quot; scheme=&quot;https&quot; secure=&quot;true&quot;</span><br><span class="line">               clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot; </span><br><span class="line">               keystoreFile=&quot;/app/kaifa/configuration/tomcatKey/cineacloud.cloud.pfx&quot;  </span><br><span class="line">               keystorePass=&quot;z5t09t14mwkr9y0&quot; /&gt; </span><br></pre></td></tr></table></figure><h5 id="6-nodeç¯å¢ƒéƒ¨ç½²https-nodejs-org-en-download"><a href="#6-nodeç¯å¢ƒéƒ¨ç½²https-nodejs-org-en-download" class="headerlink" title="6 nodeç¯å¢ƒéƒ¨ç½²https://nodejs.org/en/download"></a>6 nodeç¯å¢ƒéƒ¨ç½²<a href="https://nodejs.org/en/download">https://nodejs.org/en/download</a></h5><p>6.1ä¸‹è½½æŒ‡å®šç‰ˆæœ¬</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">--ä¸‹è½½</span><br><span class="line">wget https://nodejs.org/dist/v16.18.0/node-v16.18.0-linux-x64.tar.xz</span><br><span class="line"></span><br><span class="line">--è§£å‹</span><br><span class="line">tar xvf node-v16.18.0-linux-x64.tar.xz</span><br><span class="line"></span><br><span class="line">--æ›´å</span><br><span class="line">mv node-v16.18.0-linux-x64 /usr/local/node</span><br></pre></td></tr></table></figure><p>6.2 è®¾ç½®ç¯å¢ƒå˜é‡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/profile</span><br><span class="line">// åœ¨æ‰“å¼€çš„æ–‡ä»¶çš„æœ€ååŠ ä¸Šè¿™å¥è¯ï¼š</span><br><span class="line">export PATH=$PATH:/usr/local/node/bin</span><br></pre></td></tr></table></figure><p>ç”Ÿæ•ˆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br><span class="line"></span><br><span class="line">npm -v --æŸ¥çœ‹ç‰ˆæœ¬</span><br><span class="line">node-v --æŸ¥çœ‹ç‰ˆæœ¬</span><br></pre></td></tr></table></figure><p><strong>é…ç½®è½¯è¿æ¥</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/local/node/bin/node /usr/local/bin/</span><br><span class="line">ln -s /usr/local/node/bin/npm /usr/local/bin/</span><br></pre></td></tr></table></figure><p><strong>é¢å¤–çŸ¥è¯† æŸ¥çœ‹è½¯è¿æ¥</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -il</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>swagger2+knife4j(swaggerç¾åŒ–)</title>
      <link href="/2022/03/09/swagger+knife4j/"/>
      <url>/2022/03/09/swagger+knife4j/</url>
      
        <content type="html"><![CDATA[<h5 id="swagger-knife4j"><a href="#swagger-knife4j" class="headerlink" title="swagger+knife4j"></a>swagger+knife4j</h5><p>å¼•å…¥ä¾èµ–</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;io.springfox&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;3.0.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;com.github.xiaoymin&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;knife4j-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;3.0.3&lt;/version&gt;</span><br><span class="line">    &lt;exclusions&gt;</span><br><span class="line">    &lt;exclusion&gt;</span><br><span class="line">        &lt;artifactId&gt;swagger-annotations&lt;/artifactId&gt;</span><br><span class="line">            &lt;groupId&gt;io.swagger&lt;/groupId&gt;</span><br><span class="line">        &lt;/exclusion&gt;</span><br><span class="line">    &lt;/exclusions&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;artifactId&gt;swagger-annotations&lt;/artifactId&gt;</span><br><span class="line">    &lt;groupId&gt;io.swagger&lt;/groupId&gt;</span><br><span class="line">    &lt;version&gt;1.5.22&lt;/version&gt;</span><br><span class="line"> &lt;/dependency&gt;</span><br><span class="line"> &lt;dependency&gt;</span><br><span class="line"> &lt;groupId&gt;io.springfox&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;3.0.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p>æ·»åŠ é…ç½®æ–‡ä»¶ SwaggerConfig.java</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">package com.ry.config;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import com.github.xiaoymin.knife4j.spring.annotations.EnableKnife4j;</span><br><span class="line">import org.springframework.beans.factory.annotation.Value;</span><br><span class="line">import org.springframework.context.annotation.Bean;</span><br><span class="line">import org.springframework.context.annotation.Configuration;</span><br><span class="line">import springfox.documentation.builders.ApiInfoBuilder;</span><br><span class="line">import springfox.documentation.builders.PathSelectors;</span><br><span class="line">import springfox.documentation.builders.RequestHandlerSelectors;</span><br><span class="line">import springfox.documentation.spi.DocumentationType;</span><br><span class="line">import springfox.documentation.spring.web.plugins.Docket;</span><br><span class="line">import springfox.documentation.swagger2.annotations.EnableSwagger2;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @åˆ›å»ºäºº lx_chenrui</span><br><span class="line"> * @åˆ›å»ºæ—¶é—´ 2022/11/8</span><br><span class="line"> * @æè¿°</span><br><span class="line"> */</span><br><span class="line">@EnableSwagger2</span><br><span class="line">@EnableKnife4j</span><br><span class="line">@Configuration</span><br><span class="line">public class SwaggerConfig &#123;</span><br><span class="line"></span><br><span class="line">    @Value(&quot;server.servlet.context-path&quot;)</span><br><span class="line">    private String contextPath;</span><br><span class="line">    @Value(&quot;$&#123;spring.profiles.active&#125;&quot;)</span><br><span class="line">    private String deployMode;</span><br><span class="line"></span><br><span class="line">    @Bean(value = &quot;defaultApi2&quot;)</span><br><span class="line">    public Docket defaultApi2() &#123;</span><br><span class="line">        Docket docket = new Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">                .apiInfo(new ApiInfoBuilder()</span><br><span class="line">                        //.title(&quot;swagger-bootstrap-ui-demo RESTful APIs&quot;)</span><br><span class="line">                        .description(&quot;# swagger-bootstrap-ui-demo RESTful APIs&quot;)</span><br><span class="line">                        .version(&quot;1.0&quot;)</span><br><span class="line">                        .build())</span><br><span class="line">                .pathMapping(!deployMode.toLowerCase().equals(&quot;dev&quot;) ? contextPath : &quot;/&quot;)</span><br><span class="line">                //åˆ†ç»„åç§°</span><br><span class="line">                .groupName(&quot;2.Xç‰ˆæœ¬&quot;)</span><br><span class="line">                .select()</span><br><span class="line">                //è¿™é‡ŒæŒ‡å®šControlleræ‰«æåŒ…è·¯å¾„</span><br><span class="line">                .apis(RequestHandlerSelectors.basePackage(&quot;com.example.controller&quot;))</span><br><span class="line">                .paths(PathSelectors.any())</span><br><span class="line">                .build();</span><br><span class="line">        return docket;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯åŠ¨åè¯·æ±‚æœ¬åœ°å³å¯</p><p><a href="http://localhost:8088/doc.html#/home">http://localhost:8088/doc.html#/home</a></p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20221108161311360.png" alt="image-20221108161311360"></p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> æµ‹è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç´¢å°¼a6000æ‹æ‘„ç¬”è®°</title>
      <link href="/2022/03/09/%E7%B4%A2%E5%B0%BCa6000%E6%8B%8D%E6%91%84%E7%AC%94%E8%AE%B0/"/>
      <url>/2022/03/09/%E7%B4%A2%E5%B0%BCa6000%E6%8B%8D%E6%91%84%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>å› ä¸ºæœ€è¿‘å¯¹æ‘„å½±æ„Ÿå…´è¶£ï¼Œæ‰€ä»¥å…¥æ‰‹äº†ä¸€å°ç´¢å°¼a6000,æ®è¯´æ˜¯æ€§ä»·æ¯”éå¸¸é«˜çš„å¾®å•ç›¸æœºï¼Œæ‰€ä»¥æ‰“ç®—æœç´ ä¸€äº›ä¸é”™çš„æ•™ç¨‹å’Œç»éªŒæ”¾åœ¨è‡ªå·±çš„ç¬”è®°é‡Œé¢ã€‚<br>ä»¥é˜²æ‰¾ä¸åˆ°é“¾æ¥æˆ–è€…ç¬”è®°ä¸¢å¤±çš„é—®é¢˜ã€‚æœ¬æ–‡æ¥è‡ªLorna Tongçš„æ–‡ç« ç´¢å°¼A6000ç›¸æœºçš„æ‹æ‘„æŠ€å·§ç¬”è®°ï¼Œä»…ä½œå‚è€ƒä½¿ç”¨ã€‚</p><p>ISOï¼šç™½å¤©è°ƒ100-200ï¼Œæ™šä¸Šå…‰çº¿å·®ğŸŒƒ800â¬†ï¼Œæˆ–è€…ç›´æ¥è‡ªåŠ¨ã€‚</p><p>æ‹èƒŒæ™¯è™šåŒ–çš„è¦é¢†ï¼š</p><p>1ã€å¼€å¯å¤§å…‰åœˆï¼Œ2ã€å¼€å¯å¤§å˜ç„¦ï¼Œ3ã€å°½é‡æŠŠé•œå¤´é è¿‘è¢«æ‹ç‰©ä½“ï¼Œ4ã€å°½é‡è®©ä¸»ä½“ç¦»èƒŒæ™¯è¿œä¸€äº›ã€‚</p><p>é€†å…‰ç”¨æµ‹å…‰æ¨¡å¼çš„ç‚¹æµ‹å…‰</p><p>å…‰åœˆï¼š</p><p>1ã€æƒ³è¦èƒŒæ™¯è™šåŒ–æ¥çªå‡ºä¸»ä½“ï¼Œè¦å°½é‡ä½¿ç”¨å¤§å…‰åœˆï¼Œ2ã€æƒ³è¦ç”»é¢æ‹æ¸…æ™°ï¼Œå°½é‡ä½¿ç”¨å°å…‰åœˆï¼Œ3ï¼Œå¤§å…‰åœˆèƒ½æœ‰æ•ˆå¢åŠ è¿›å…‰é‡ï¼ŒåŒæ—¶å¯ä»¥åŠ å¿«å¿«é—¨é€Ÿåº¦ï¼Œé˜²æ­¢å› ç›¸æœºæŠ–åŠ¨å¯¼è‡´ç…§ç‰‡æ‹ç³Šã€‚</p><p>æ‹æ‘„ğŸ¬ä¸€èˆ¬æ¨èç”¨Aæ¡£å’ŒSæ¡£</p><p>å¤œæ™¯æ‹æ‘„æŠ€å·§ï¼š</p><p>1ã€å…³é—­é—ªå…‰ç¯ï¼Œä¸‰è„šæ¶ï¼ŒAæ¡£ï¼ŒISO100-400ï¼ŒF8.0-16.0ï¼Œå»¶æ—¶è‡ªæ‹åŠŸèƒ½2ç§’ä»¥ä¸Šã€‚</p><p>2ã€å…³é—­é—ªå…‰ç¯ï¼Œæ— ä¸‰è„šæ¶ï¼ŒSæ¡£ï¼Œå¿«é—¨1/30ç§’ï¼ŒISOè‡ªåŠ¨ï¼Œä¿æŒæ­£ç¡®æ‹ç…§å§¿åŠ¿ã€‚</p><p>3ã€å¤œé—´æ‹å°¾ç¯æ‹‰ä¸æ˜Ÿè½¨ï¼Œå¿«é—¨10sï¼ŒF16ï¼Œåˆ©ç”¨ä¸‰è„šæ¶ã€‚</p><p>å¦‚ä½•æ‹å¤•é˜³ğŸŒ‡å’Œæ—¥å‡ºğŸŒ…ï¼šAæ¡£ï¼ŒF8-16ï¼ŒISO100-400ï¼Œè°ƒæˆä¸­é—´å¯¹ç„¦ï¼Œç‚¹æµ‹å…‰ï¼Œå¯¹ç€å¤•é˜³å‘¨å›´çš„åŒºåŸŸæµ‹å…‰æ‹æ‘„ğŸ¬ã€‚ä¸è¦ç›´æ¥å¯¹ç€å¤ªé˜³æˆ–è€…å»ºç­‘ã€‚è¦å¯¹ç„¦åœ¨å¤ªé˜³å‘¨å›´çš„å¤©ç©ºï¼Œäº®åº¦åˆé€‚ï¼Œé¢œè‰²ä¸°å¯Œã€‚</p><p>æ‹æ—¥å‡ºå»ºè®®å°½é‡è®¾ç½®å°å…‰åœˆï¼Œæœ‰å…‰èŠ’å››å°„æ•ˆæœã€‚ç›¸æœºç™½å¹³è¡¡è°ƒæˆâ€œé˜´å½±â€ï¼Œä¼šæ›´æš–è‰²è°ƒã€‚</p><p>å¦‚ä½•æ‹å‰ªå½±ï¼›é€†å…‰ï¼Œå…¶ä»–åŒå¤•é˜³ï¼Œæ—¥å‡ºã€‚</p><p>æ‹æœˆäº®ğŸŒœï¼ŒMæ¡£ï¼Œå¿«é—¨1/125sï¼ŒF5.6-8ï¼ŒISO200ï¼Œå¤ªæš—å¯è°ƒå¤§å…‰åœˆã€‚200mmä»¥ä¸Šçš„å•åé•œå¤´ï¼Œä¸‰è„šæ¶ã€‚</p><p>æ‹é›ªæ™¯ï¼šå¤‡ç”¨ç”µæ± ï¼ŒAæ¡£ï¼Œåˆç†è®¾ç½®å…‰åœˆï¼ŒISO100-400ï¼Œé€‚å½“å¢åŠ æ›å…‰è¡¥å¿ã€‚å¤§åœºæ™¯çš„å…‰åœˆç”¨F8-16ã€‚ç»†å¾®å¤„çš„å°åˆ«è‡´é›ªæ™¯ç”¨F5.6ã€‚æ›å…‰è¡¥å¿+1.5æˆ–è€…2ã€‚å¯ä»¥é›ªæ™¯æ´ç™½ã€‚ï¼ˆé›ªæ™¯å ç…§ç‰‡æ¯”ä¾‹1/3ï¼Œå°±+1ï¼Œ1/2ä»¥ä¸Šçš„å°±+1.5æˆ–è€…2ï¼‰</p><p>æ‹çƒŸèŠ±ï¼šæ‰¾ä¸€ä¸ªæ‹ç…§ç»ä½³ä½ç½®ï¼ŒMæ¡£ï¼Œå¿«é—¨3-5sï¼ŒF8-16ï¼ŒISO100ã€‚ä¸è¦å¼€å˜ç„¦ï¼Œåˆ©ç”¨ä¸‰è„šæ¶ã€‚å¯¹ç€è¿œå¤„å¤œæ™¯å¯¹ç„¦ã€‚</p><p>ç¬¬ä¸€æ¬¡åŠæŒ‰å¿«é—¨å¯¹ç„¦å®Œæˆåï¼Œå°±èµ¶ç´§è°ƒåˆ°æ‰‹åŠ¨å¯¹ç„¦MFå³å¯ã€‚è¿™æ ·åç»­çƒŸèŠ±ğŸ†ï¼Œåªéœ€æŒ‰å…¨å¿«é—¨æ‹ç…§å³å¯ã€‚å‰ææ˜¯æ‹ç…§ä½ç½®ä¸å˜ã€‚</p><p>å¤œæ™¯æ‹äººåƒï¼šAæ¡£ï¼Œè®¾ç½®æœ€å¤§å…‰åœˆï¼ŒISO100-400ï¼Œæ‹ä¸€å¼ ç…§ç‰‡ï¼Œè®°ä½å…‰åœˆï¼Œå¿«é—¨ï¼ŒISOã€‚å†è°ƒåˆ°Mæ¡£ï¼Œå‚æ•°ä¸€æ ·ï¼Œæ‰“å¼€é—ªå…‰ç¯ï¼Œè®¾ç½®æˆå•ç‚¹å¯¹ç„¦ï¼Œå¹¶å¯¹äººè„¸åŠæŒ‰å¿«é—¨å¯¹ç„¦æ‹ç…§ã€‚</p><p>å¸‚ä¸­å¿ƒç¹åã€å…‰çº¿å¥½çš„åœ°æ–¹ï¼Œäººç‰©æ‰‹æŒæ‰‹æœºå¹¶å°†æ˜¾ç¤ºè°ƒèŠ‚æˆç™½è‰²ä¸ºä¸»ç•Œé¢ç»™è„¸éƒ¨è¡¥å…‰ã€‚Aæ¡£ï¼Œæœ€å¤§å…‰åœˆï¼ŒISOè‡ªåŠ¨ï¼Œ</p><p>æ³¨æ„âš ï¼š50-1.8mmå®šç„¦é•œå¤´æ‹äººåƒæ•ˆæœæœ€å¥½ã€‚</p><p>æŠ“æ‹è¿åŠ¨å‘˜ï¼šSæ¡£ï¼Œ1/500sä»¥ä¸Šï¼Œè¿ç»­AFï¼Œé«˜é€Ÿè¿æ‹ã€‚</p><p>æŠ“æ‹å°å­©ï¼šSæ¡£ï¼Œ1/100sä»¥ä¸Šçš„å¿«é—¨ï¼Œçµæ´»è®¾ç½®ISOè‡ªåŠ¨ï¼Œè¿ç»­AFè‡ªåŠ¨å¯¹ç„¦ï¼Œè®¾ç½®ä¸ºé«˜é€Ÿè¿æ‹ã€‚å…‰çº¿äº®ï¼Œå…³é—­é—ªå…‰ç¯ã€‚</p><p>æŠŠå®å®æ‹çš„å¥½çœ‹ï¼ŒAæ¡£ï¼Œå…³é—­é—ªå…‰ç¯ï¼ŒF3.5ï¼ŒISOè‡ªåŠ¨ï¼Œè‡ªç”±ç‚¹å¯¹ç„¦ï¼Œå¯¹ç„¦åœ¨å®å®çš„çœ¼ç›ä¸Šã€‚</p><p>æ‹èŠ±å‰ï¼šSCN-å¾®è·ï¼Œè¿ç»­è‡ªåŠ¨å¯¹ç„¦ï¼Œå¦‚æœæ‹å•å¤šå°±è‡ªç”±ç‚¹å¯¹ç„¦ï¼Œ</p><p>æŠ“æ‹åŠ¨æ€å¤©é¹…ï¼šSï¼Œ1/500æ˜¯ï¼Œæˆ–æ›´å¿«ï¼Œå…‰çº¿å¥½çš„ISO400ä»¥å†…ï¼Œå…‰çº¿è¾ƒå·®çš„å°±è‡ªåŠ¨AUTOï¼Œè¿ç»­AFè‡ªåŠ¨å¯¹ç„¦ï¼Œé«˜é€Ÿè¿æ‹ã€‚</p><p>æ‹ç¾ä¸½å¤©é¹…ï¼šAæ¡£ï¼ŒISO100-400ï¼Œå•ç‚¹å¯¹ç„¦ï¼Œä¸Šåˆä¹ç‚¹æˆ–ä¸‹åˆä¸‰ç‚¹æœ€ä½³æ‹æ‘„æ—¶é—´ã€‚</p><p>å¤œé—´æ‹èŠ±ç¯ï¼šSæ¡£ï¼Œå…³é—­é—ªå…‰ç¯ï¼Œé˜´å¤©/é˜´å½±ç™½å¹³è¡¡ï¼Œæ›å…‰è¡¥å¿-1/-2ã€‚1/30sçš„å¿«é—¨ï¼ŒISOè‡ªåŠ¨ã€‚</p><p>æ‹èŠ±ç¯äººåƒï¼šAæ¡£ï¼ŒF3.5ï¼ŒISOè‡ªåŠ¨ï¼Œå•ç‚¹å¯¹ç„¦ï¼Œå¤œæ™¯äººåƒç±»ä¼¼ã€‚</p><p>æ‹è“å¤©ç™½äº‘ï¼šAæ¡£ï¼ŒF11æˆ–æ›´å°ï¼ŒISO100ï¼Œç„¦åœ¨äº‘å±‚ï¼Œå¹¿è§’ç«¯æ‹æ‘„ï¼Œé€‚å½“å‡æ›å…‰è¡¥å¿ï¼Œé€‰â€œæ—¥å…‰â€ç™½å¹³è¡¡ï¼Œå–„ç”¨åæŒ¯é•œï¼Œé€‚å½“â•ä¸€äº›åœ°é¢æ™¯ç‰©ã€‚</p><p>æ‹å…‰æ–‘ï¼šAæ¡£ï¼Œ50mm+F5.6ï¼ŒISOè‡ªåŠ¨ï¼Œæ›å…‰è¡¥å¿-0.7ï¼ŒMFæ‰‹åŠ¨å¯¹ç„¦ã€‚</p><p>æ‹æç¬‘åˆ›æ„ç…§ï¼šAæ¡£ï¼ŒF8æˆ–æ›´å°å…‰åœˆï¼Œæœªå˜ç„¦æ—¶å€™æ‹æ‘„ï¼Œå¯»æ‰¾åˆé€‚è§’åº¦ã€‚</p><p>æœ¬æ–‡æ¥è‡ªå¾®ä¿¡å…¬ä¼—å·Lorna Tongçš„æ–‡ç« ç´¢å°¼A6000ç›¸æœºçš„æ‹æ‘„æŠ€å·§ç¬”è®°ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ‘„å½± </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ‘„å½± </tag>
            
            <tag> ç´¢å°¼a6000 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatis-plusä½¿ç”¨ç¯‡</title>
      <link href="/2022/02/22/springboot+mybatisplus/"/>
      <url>/2022/02/22/springboot+mybatisplus/</url>
      
        <content type="html"><![CDATA[<p>MyBatis-plus æ˜¯ä¸€æ¬¾ Mybatis å¢å¼ºå·¥å…·ï¼Œç”¨äºç®€åŒ–å¼€å‘ï¼Œæé«˜æ•ˆç‡ã€‚ä¸‹æ–‡ä½¿ç”¨ç¼©å†™ mpæ¥ç®€åŒ–è¡¨ç¤º MyBatis-plusï¼Œæœ¬æ–‡ä¸»è¦ä»‹ç» mp æ­é… Spring Boot çš„ä½¿ç”¨ã€‚</p><p>æ³¨ï¼šæœ¬æ–‡ä½¿ç”¨çš„ mp ç‰ˆæœ¬æ˜¯å½“å‰æœ€æ–°çš„3.4.2ï¼Œæ—©æœŸç‰ˆæœ¬çš„å·®å¼‚è¯·è‡ªè¡ŒæŸ¥é˜…æ–‡æ¡£</p><p>å®˜æ–¹ç½‘ç«™ï¼šbaomidou.com/</p><h2 id="å¿«é€Ÿå…¥é—¨"><a href="#å¿«é€Ÿå…¥é—¨" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a>å¿«é€Ÿå…¥é—¨</h2><ol><li><p>åˆ›å»ºä¸€ä¸ªSpring Booté¡¹ç›®ï¼Œæœ¬æ•™ç¨‹æ˜¯ mp æ­é… Spring Boot ä½¿ç”¨çš„æ•™ç¨‹ï¼Œå…³äº Spring boot ä¹Ÿå‘å¸ƒè¿‡å¾ˆå¤šæ–‡å­—ï¼Œå…³æ³¨å…¬ä¼—å· Javaåç«¯ï¼Œå…³æ³¨åæœç´¢ Spring Boot å³å¯ã€‚</p></li><li><p>å¯¼å…¥ä¾èµ–</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- pom.xml --&gt;</span><br><span class="line">   &lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">   &lt;project xmlns=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">            xsi:schemaLocation=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br><span class="line">       &lt;modelVersion&gt;<span class="number">4.0</span><span class="number">.0</span>&lt;/modelVersion&gt;</span><br><span class="line">       &lt;parent&gt;</span><br><span class="line">           &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">           &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">           &lt;version&gt;<span class="number">2.3</span><span class="number">.4</span>.RELEASE&lt;/version&gt;</span><br><span class="line">           &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;</span><br><span class="line">       &lt;/parent&gt;</span><br><span class="line">       &lt;groupId&gt;com.example&lt;/groupId&gt;</span><br><span class="line">       &lt;artifactId&gt;mybatis-plus&lt;/artifactId&gt;</span><br><span class="line">       &lt;version&gt;<span class="number">0.0</span><span class="number">.1</span>-SNAPSHOT&lt;/version&gt;</span><br><span class="line">       &lt;name&gt;mybatis-plus&lt;/name&gt;</span><br><span class="line">       &lt;properties&gt;</span><br><span class="line">           &lt;java.version&gt;<span class="number">1.8</span>&lt;/java.version&gt;</span><br><span class="line">       &lt;/properties&gt;</span><br><span class="line">       &lt;dependencies&gt;</span><br><span class="line">           &lt;dependency&gt;</span><br><span class="line">               &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">               &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">           &lt;/dependency&gt;</span><br><span class="line">           &lt;dependency&gt;</span><br><span class="line">               &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">               &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br><span class="line">               &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">           &lt;/dependency&gt;</span><br><span class="line">           &lt;dependency&gt;</span><br><span class="line">               &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">               &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;</span><br><span class="line">           &lt;/dependency&gt;</span><br><span class="line">           &lt;dependency&gt;</span><br><span class="line">               &lt;groupId&gt;com.baomidou&lt;/groupId&gt;</span><br><span class="line">               &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;</span><br><span class="line">               &lt;version&gt;<span class="number">3.4</span><span class="number">.2</span>&lt;/version&gt;</span><br><span class="line">           &lt;/dependency&gt;</span><br><span class="line">           &lt;dependency&gt;</span><br><span class="line">               &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">               &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">               &lt;scope&gt;runtime&lt;/scope&gt;</span><br><span class="line">           &lt;/dependency&gt;</span><br><span class="line">           &lt;dependency&gt;</span><br><span class="line">               &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">               &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">           &lt;/dependency&gt;</span><br><span class="line">       &lt;/dependencies&gt;</span><br><span class="line">       &lt;build&gt;</span><br><span class="line">           &lt;plugins&gt;</span><br><span class="line">               &lt;plugin&gt;</span><br><span class="line">                   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">                   &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">               &lt;/plugin&gt;</span><br><span class="line">           &lt;/plugins&gt;</span><br><span class="line">       &lt;/build&gt;</span><br><span class="line">   &lt;/project&gt;</span><br></pre></td></tr></table></figure><ol><li>é…ç½®æ•°æ®åº“</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># application.yml</span><br><span class="line">   spring:</span><br><span class="line">     datasource:</span><br><span class="line">       driver-<span class="class"><span class="keyword">class</span>-<span class="title">name</span>: <span class="title">com</span>.<span class="title">mysql</span>.<span class="title">cj</span>.<span class="title">jdbc</span>.<span class="title">Driver</span></span></span><br><span class="line"><span class="class">       <span class="title">url</span>: <span class="title">jdbc</span>:<span class="title">mysql</span>://<span class="title">localhost</span>:3306/<span class="title">yogurt</span>?<span class="title">serverTimezone</span></span>=Asia/Shanghai</span><br><span class="line">       username: root</span><br><span class="line">       password: root</span><br><span class="line">       </span><br><span class="line">   mybatis-plus:</span><br><span class="line">     configuration:</span><br><span class="line">       log-impl: org.apache.ibatis.logging.stdout.StdOutImpl #å¼€å¯SQLè¯­å¥æ‰“å°</span><br></pre></td></tr></table></figure><ol><li>åˆ›å»ºä¸€ä¸ªå®ä½“ç±»</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mp.po;</span><br><span class="line">   <span class="keyword">import</span> lombok.Data;</span><br><span class="line">   <span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line">   <span class="meta">@Data</span></span><br><span class="line">   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> Long managerId;</span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><ol><li>åˆ›å»ºä¸€ä¸ªmapperæ¥å£</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mp.mappers;</span><br><span class="line">   <span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line">   <span class="keyword">import</span> com.example.mp.po.User;</span><br><span class="line">   <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>&#123; &#125;</span><br></pre></td></tr></table></figure><ol><li>åœ¨SpringBootå¯åŠ¨ç±»ä¸Šé…ç½®mapperæ¥å£çš„æ‰«æè·¯å¾„</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mp;</span><br><span class="line">   <span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line">   <span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line">   <span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line">   <span class="meta">@SpringBootApplication</span></span><br><span class="line">   <span class="meta">@MapperScan(&quot;com.example.mp.mappers&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisPlusApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">     SpringApplication.run(MybatisPlusApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><ol><li>åœ¨æ•°æ®åº“ä¸­åˆ›å»ºè¡¨</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS user;</span><br><span class="line">   <span class="function">CREATE TABLE <span class="title">user</span> <span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">   id BIGINT(<span class="number">20</span>)</span> PRIMARY KEY NOT NULL COMMENT &#x27;ä¸»é”®&#x27;,</span></span><br><span class="line"><span class="function">   name <span class="title">VARCHAR</span><span class="params">(<span class="number">30</span>)</span> DEFAULT NULL COMMENT &#x27;å§“å&#x27;,</span></span><br><span class="line"><span class="function">   age <span class="title">INT</span><span class="params">(<span class="number">11</span>)</span> DEFAULT NULL COMMENT &#x27;å¹´é¾„&#x27;,</span></span><br><span class="line"><span class="function">   email <span class="title">VARCHAR</span><span class="params">(<span class="number">50</span>)</span> DEFAULT NULL COMMENT &#x27;é‚®ç®±&#x27;,</span></span><br><span class="line"><span class="function">   manager_id <span class="title">BIGINT</span><span class="params">(<span class="number">20</span>)</span> DEFAULT NULL COMMENT &#x27;ç›´å±ä¸Šçº§id&#x27;,</span></span><br><span class="line"><span class="function">   create_time DATETIME DEFAULT NULL COMMENT &#x27;åˆ›å»ºæ—¶é—´&#x27;,</span></span><br><span class="line"><span class="function">   CONSTRAINT manager_fk FOREIGN <span class="title">KEY</span><span class="params">(manager_id)</span> REFERENCES <span class="title">user</span> <span class="params">(id)</span></span></span><br><span class="line"><span class="function">   ) ENGINE</span>=INNODB CHARSET=UTF8;</span><br><span class="line">   </span><br><span class="line">   <span class="function">INSERT INTO <span class="title">user</span> <span class="params">(id, name, age ,email, manager_id, create_time)</span> <span class="title">VALUES</span></span></span><br><span class="line"><span class="function">   <span class="params">(<span class="number">1</span>, <span class="string">&#x27;å¤§BOSS&#x27;</span>, <span class="number">40</span>, <span class="string">&#x27;boss@baomidou.com&#x27;</span>, NULL, <span class="string">&#x27;2021-03-22 09:48:00&#x27;</span>)</span>,</span></span><br><span class="line"><span class="function">   <span class="params">(<span class="number">2</span>, <span class="string">&#x27;æç»ç†&#x27;</span>, <span class="number">40</span>, <span class="string">&#x27;boss@baomidou.com&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;2021-01-22 09:48:00&#x27;</span>)</span>,</span></span><br><span class="line"><span class="function">   <span class="params">(<span class="number">3</span>, <span class="string">&#x27;é»„ä¸»ç®¡&#x27;</span>, <span class="number">40</span>, <span class="string">&#x27;boss@baomidou.com&#x27;</span>, <span class="number">2</span>, <span class="string">&#x27;2021-01-22 09:48:00&#x27;</span>)</span>,</span></span><br><span class="line"><span class="function">   <span class="params">(<span class="number">4</span>, <span class="string">&#x27;å´ç»„é•¿&#x27;</span>, <span class="number">40</span>, <span class="string">&#x27;boss@baomidou.com&#x27;</span>, <span class="number">2</span>, <span class="string">&#x27;2021-02-22 09:48:00&#x27;</span>)</span>,</span></span><br><span class="line"><span class="function">   <span class="params">(<span class="number">5</span>, <span class="string">&#x27;å°èœ&#x27;</span>, <span class="number">40</span>, <span class="string">&#x27;boss@baomidou.com&#x27;</span>, <span class="number">2</span>, <span class="string">&#x27;2021-02-22 09:48:00&#x27;</span>)</span></span></span><br></pre></td></tr></table></figure><ol><li>ç¼–å†™ä¸€ä¸ªSpringBootæµ‹è¯•ç±»</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mp;</span><br><span class="line">   <span class="keyword">import</span> com.example.mp.mappers.UserMapper;</span><br><span class="line">   <span class="keyword">import</span> com.example.mp.po.User;</span><br><span class="line">   <span class="keyword">import</span> org.junit.Test;</span><br><span class="line">   <span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line">   <span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">   <span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line">   <span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line">   <span class="keyword">import</span> java.util.List;</span><br><span class="line">   <span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</span><br><span class="line">   <span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line">   <span class="meta">@SpringBootTest</span></span><br><span class="line">   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SampleTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper mapper;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelect</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     List&lt;User&gt; list = mapper.selectList(<span class="keyword">null</span>);</span><br><span class="line">     assertEquals(<span class="number">5</span>, list.size());</span><br><span class="line">     list.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>å‡†å¤‡å·¥ä½œå®Œæˆï¼Œæ•°æ®åº“æƒ…å†µå¦‚ä¸‹ï¼š</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/670.jpg" alt="670"></p><p>é¡¹ç›®ç›®å½•å¦‚ä¸‹ï¼š</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/640.jpg" alt="640"></p><p>è¿è¡Œæµ‹è¯•ç±»</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œé’ˆå¯¹å•è¡¨çš„åŸºæœ¬CRUDæ“ä½œï¼Œåªéœ€è¦åˆ›å»ºå¥½å®ä½“ç±»ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ª<code>BaseMapper</code>çš„æ¥å£å³å¯ï¼Œå¯è°“éå¸¸ç®€æ´ã€‚å¹¶ä¸”ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°ï¼Œ<code>User</code>ç±»ä¸­çš„<code>managerId</code>ï¼Œ<code>createTime</code>å±æ€§ï¼Œè‡ªåŠ¨å’Œæ•°æ®åº“è¡¨ä¸­çš„<code>manager_id</code>ï¼Œ<code>create_time</code>å¯¹åº”äº†èµ·æ¥ï¼Œè¿™æ˜¯å› ä¸ºmpè‡ªåŠ¨åšäº†æ•°æ®åº“ä¸‹åˆ’çº¿å‘½åï¼Œåˆ°Javaç±»çš„é©¼å³°å‘½åä¹‹é—´çš„è½¬åŒ–ã€‚</p><h2 id="æ ¸å¿ƒåŠŸèƒ½"><a href="#æ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="æ ¸å¿ƒåŠŸèƒ½"></a>æ ¸å¿ƒåŠŸèƒ½</h2><h3 id="æ³¨è§£"><a href="#æ³¨è§£" class="headerlink" title="æ³¨è§£"></a>æ³¨è§£</h3><p>mpä¸€å…±æä¾›äº†8ä¸ªæ³¨è§£ï¼Œè¿™äº›æ³¨è§£æ˜¯ç”¨åœ¨Javaçš„å®ä½“ç±»ä¸Šé¢çš„ã€‚</p><ul><li><p><code>@TableName</code></p><p>æ³¨è§£åœ¨ç±»ä¸Šï¼ŒæŒ‡å®šç±»å’Œæ•°æ®åº“è¡¨çš„æ˜ å°„å…³ç³»ã€‚<strong>å®ä½“ç±»çš„ç±»åï¼ˆè½¬æˆå°å†™åï¼‰å’Œæ•°æ®åº“è¡¨åç›¸åŒæ—¶</strong>ï¼Œå¯ä»¥ä¸æŒ‡å®šè¯¥æ³¨è§£ã€‚</p></li><li><p><code>@TableId</code></p><p>æ³¨è§£åœ¨å®ä½“ç±»çš„æŸä¸€å­—æ®µä¸Šï¼Œ<strong>è¡¨ç¤ºè¿™ä¸ªå­—æ®µå¯¹åº”æ•°æ®åº“è¡¨çš„ä¸»é”®</strong>ã€‚å½“ä¸»é”®åä¸ºidæ—¶ï¼ˆè¡¨ä¸­åˆ—åä¸ºidï¼Œå®ä½“ç±»ä¸­å­—æ®µåä¸ºidï¼‰ï¼Œæ— éœ€ä½¿ç”¨è¯¥æ³¨è§£æ˜¾å¼æŒ‡å®šä¸»é”®ï¼Œmpä¼šè‡ªåŠ¨å…³è”ã€‚è‹¥ç±»çš„å­—æ®µåå’Œè¡¨çš„åˆ—åä¸ä¸€è‡´ï¼Œå¯ç”¨<code>value</code>å±æ€§æŒ‡å®šè¡¨çš„åˆ—åã€‚å¦ï¼Œè¿™ä¸ªæ³¨è§£æœ‰ä¸ªé‡è¦çš„å±æ€§<code>type</code>ï¼Œç”¨äºæŒ‡å®šä¸»é”®ç­–ç•¥ã€‚</p></li><li><p><code>@TableField</code></p><p>æ³¨è§£åœ¨æŸä¸€å­—æ®µä¸Šï¼ŒæŒ‡å®šJavaå®ä½“ç±»çš„å­—æ®µå’Œæ•°æ®åº“è¡¨çš„åˆ—çš„æ˜ å°„å…³ç³»ã€‚è¿™ä¸ªæ³¨è§£æœ‰å¦‚ä¸‹å‡ ä¸ªåº”ç”¨åœºæ™¯ã€‚</p></li><li><ul><li><p><strong>æ’é™¤éè¡¨å­—æ®µ</strong></p><p>è‹¥Javaå®ä½“ç±»ä¸­æŸä¸ªå­—æ®µï¼Œä¸å¯¹åº”è¡¨ä¸­çš„ä»»ä½•åˆ—ï¼Œå®ƒåªæ˜¯ç”¨äºä¿å­˜ä¸€äº›é¢å¤–çš„ï¼Œæˆ–ç»„è£…åçš„æ•°æ®ï¼Œåˆ™å¯ä»¥è®¾ç½®<code>exist</code>å±æ€§ä¸º<code>false</code>ï¼Œè¿™æ ·åœ¨å¯¹å®ä½“å¯¹è±¡è¿›è¡Œæ’å…¥æ—¶ï¼Œä¼šå¿½ç•¥è¿™ä¸ªå­—æ®µã€‚æ’é™¤éè¡¨å­—æ®µä¹Ÿå¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼å®Œæˆï¼Œå¦‚ä½¿ç”¨<code>static</code>æˆ–<code>transient</code>å…³é”®å­—ï¼Œä½†ä¸ªäººè§‰å¾—ä¸æ˜¯å¾ˆåˆç†ï¼Œä¸åšèµ˜è¿°</p></li><li><p><strong>å­—æ®µéªŒè¯ç­–ç•¥</strong></p><p>é€šè¿‡<code>insertStrategy</code>ï¼Œ<code>updateStrategy</code>ï¼Œ<code>whereStrategy</code>å±æ€§è¿›è¡Œé…ç½®ï¼Œå¯ä»¥æ§åˆ¶åœ¨å®ä½“å¯¹è±¡è¿›è¡Œæ’å…¥ï¼Œæ›´æ–°ï¼Œæˆ–ä½œä¸ºWHEREæ¡ä»¶æ—¶ï¼Œå¯¹è±¡ä¸­çš„å­—æ®µè¦å¦‚ä½•ç»„è£…åˆ°SQLè¯­å¥ä¸­ã€‚</p></li><li><p><strong>å­—æ®µå¡«å……ç­–ç•¥</strong></p><p>é€šè¿‡<code>fill</code>å±æ€§æŒ‡å®šï¼Œå­—æ®µä¸ºç©ºæ—¶ä¼šè¿›è¡Œè‡ªåŠ¨å¡«å……</p></li></ul></li><li><p><code>@Version</code></p><p>ä¹è§‚é”æ³¨è§£</p></li><li><p><code>@EnumValue</code></p><p>æ³¨è§£åœ¨æšä¸¾å­—æ®µä¸Š</p></li><li><p><code>@TableLogic</code></p><p>é€»è¾‘åˆ é™¤</p></li><li><p><code>KeySequence</code></p><p>åºåˆ—ä¸»é”®ç­–ç•¥ï¼ˆ<code>oracle</code>ï¼‰</p></li><li><p><code>InterceptorIgnore</code></p><p>æ’ä»¶è¿‡æ»¤è§„åˆ™</p></li></ul><h3 id="CRUDæ¥å£"><a href="#CRUDæ¥å£" class="headerlink" title="CRUDæ¥å£"></a>CRUDæ¥å£</h3><p>mpå°è£…äº†ä¸€äº›æœ€åŸºç¡€çš„CRUDæ–¹æ³•ï¼Œåªéœ€è¦ç›´æ¥ç»§æ‰¿mpæä¾›çš„æ¥å£ï¼Œæ— éœ€ç¼–å†™ä»»ä½•SQLï¼Œå³å¯é£Ÿç”¨ã€‚mpæä¾›äº†ä¸¤å¥—æ¥å£ï¼Œåˆ†åˆ«æ˜¯Mapper CRUDæ¥å£å’ŒService CRUDæ¥å£ã€‚å¹¶ä¸”mpè¿˜æä¾›äº†æ¡ä»¶æ„é€ å™¨<code>Wrapper</code>ï¼Œå¯ä»¥æ–¹ä¾¿åœ°ç»„è£…SQLè¯­å¥ä¸­çš„WHEREæ¡ä»¶ã€‚</p><h4 id="Mapper-CRUDæ¥å£"><a href="#Mapper-CRUDæ¥å£" class="headerlink" title="Mapper CRUDæ¥å£"></a>Mapper CRUDæ¥å£</h4><p>åªéœ€å®šä¹‰å¥½å®ä½“ç±»ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªæ¥å£ï¼Œç»§æ‰¿mpæä¾›çš„<code>BaseMapper</code>ï¼Œå³å¯é£Ÿç”¨ã€‚mpä¼šåœ¨mybatiså¯åŠ¨æ—¶ï¼Œè‡ªåŠ¨è§£æå®ä½“ç±»å’Œè¡¨çš„æ˜ å°„å…³ç³»ï¼Œå¹¶æ³¨å…¥å¸¦æœ‰é€šç”¨CRUDæ–¹æ³•çš„mapperã€‚<code>BaseMapper</code>é‡Œæä¾›çš„æ–¹æ³•ï¼Œéƒ¨åˆ†åˆ—ä¸¾å¦‚ä¸‹ï¼š</p><ul><li><code>insert(T entity)</code> æ’å…¥ä¸€æ¡è®°å½•</li><li><code>deleteById(Serializable id)</code> æ ¹æ®ä¸»é”®idåˆ é™¤ä¸€æ¡è®°å½•</li><li><code>delete(Wrapper&lt;T&gt; wrapper)</code> æ ¹æ®æ¡ä»¶æ„é€ å™¨wrapperè¿›è¡Œåˆ é™¤</li><li><code>selectById(Serializable id)</code> æ ¹æ®ä¸»é”®idè¿›è¡ŒæŸ¥æ‰¾</li><li><code>selectBatchIds(Collection idList)</code> æ ¹æ®ä¸»é”®idè¿›è¡Œæ‰¹é‡æŸ¥æ‰¾</li><li><code>selectByMap(Map&lt;String,Object&gt; map)</code> æ ¹æ®mapä¸­æŒ‡å®šçš„åˆ—åå’Œåˆ—å€¼è¿›è¡Œ<strong>ç­‰å€¼åŒ¹é…</strong>æŸ¥æ‰¾</li><li><code>selectMaps(Wrapper&lt;T&gt; wrapper)</code> æ ¹æ® wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢è®°å½•ï¼Œå°†æŸ¥è¯¢ç»“æœå°è£…ä¸ºä¸€ä¸ªMapï¼ŒMapçš„keyä¸ºç»“æœçš„åˆ—ï¼Œvalueä¸ºå€¼</li><li><code>selectList(Wrapper&lt;T&gt; wrapper)</code> æ ¹æ®æ¡ä»¶æ„é€ å™¨<code>wrapper</code>è¿›è¡ŒæŸ¥è¯¢</li><li><code>update(T entity, Wrapper&lt;T&gt; wrapper)</code> æ ¹æ®æ¡ä»¶æ„é€ å™¨<code>wrapper</code>è¿›è¡Œæ›´æ–°</li><li><code>updateById(T entity)</code></li><li>â€¦</li></ul><p>ä¸‹é¢è®²è§£å‡ ä¸ªæ¯”è¾ƒç‰¹åˆ«çš„æ–¹æ³•</p><h6 id="selectMaps"><a href="#selectMaps" class="headerlink" title="selectMaps"></a>selectMaps</h6><p><code>BaseMapper</code>æ¥å£è¿˜æä¾›äº†ä¸€ä¸ª<code>selectMaps</code>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šå°†æŸ¥è¯¢ç»“æœå°è£…ä¸ºä¸€ä¸ªMapï¼ŒMapçš„keyä¸ºç»“æœçš„åˆ—ï¼Œvalueä¸ºå€¼</p><p>è¯¥æ–¹æ³•çš„ä½¿ç”¨åœºæ™¯å¦‚ä¸‹ï¼š</p><ul><li><p><strong>åªæŸ¥éƒ¨åˆ†åˆ—</strong></p><p>å½“æŸä¸ªè¡¨çš„åˆ—ç‰¹åˆ«å¤šï¼Œè€ŒSELECTçš„æ—¶å€™åªéœ€è¦é€‰å–ä¸ªåˆ«åˆ—ï¼ŒæŸ¥è¯¢å‡ºçš„ç»“æœä¹Ÿæ²¡å¿…è¦å°è£…æˆJavaå®ä½“ç±»å¯¹è±¡æ—¶ï¼ˆåªæŸ¥éƒ¨åˆ†åˆ—æ—¶ï¼Œå°è£…æˆå®ä½“åï¼Œå®ä½“å¯¹è±¡ä¸­çš„å¾ˆå¤šå±æ€§ä¼šæ˜¯nullï¼‰ï¼Œåˆ™å¯ä»¥ç”¨<code>selectMaps</code>ï¼Œè·å–åˆ°æŒ‡å®šçš„åˆ—åï¼Œå†è‡ªè¡Œè¿›è¡Œå¤„ç†å³å¯</p><p>æ¯”å¦‚</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    wrapper.select(<span class="string">&quot;id&quot;</span>,<span class="string">&quot;name&quot;</span>,<span class="string">&quot;email&quot;</span>).likeRight(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;é»„&quot;</span>);</span><br><span class="line">    List&lt;Map&lt;String, Object&gt;&gt; maps = userMapper.selectMaps(wrapper);</span><br><span class="line">    maps.forEach(System.out::println);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p><ul><li><p><strong>è¿›è¡Œæ•°æ®ç»Ÿè®¡</strong></p><p>æ¯”å¦‚</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŒ‰ç…§ç›´å±ä¸Šçº§è¿›è¡Œåˆ†ç»„ï¼ŒæŸ¥è¯¢æ¯ç»„çš„å¹³å‡å¹´é¾„ï¼Œæœ€å¤§å¹´é¾„ï¼Œæœ€å°å¹´é¾„</span></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  select avg(age) avg_age ,min(age) min_age, max(age) max_age from user group by manager_id having sum(age) &lt; 500;</span></span><br><span class="line"><span class="comment">  **/</span></span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">   wrapper.select(<span class="string">&quot;manager_id&quot;</span>, <span class="string">&quot;avg(age) avg_age&quot;</span>, <span class="string">&quot;min(age) min_age&quot;</span>, <span class="string">&quot;max(age) max_age&quot;</span>)</span><br><span class="line">     .groupBy(<span class="string">&quot;manager_id&quot;</span>).having(<span class="string">&quot;sum(age) &lt; &#123;0&#125;&quot;</span>, <span class="number">500</span>);</span><br><span class="line">   List&lt;Map&lt;String, Object&gt;&gt; maps = userMapper.selectMaps(wrapper);</span><br><span class="line">   maps.forEach(System.out::println);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p><h6 id="selectObjs"><a href="#selectObjs" class="headerlink" title="selectObjs"></a>selectObjs</h6><p>åªä¼šè¿”å›ç¬¬ä¸€ä¸ªå­—æ®µï¼ˆç¬¬ä¸€åˆ—ï¼‰çš„å€¼ï¼Œå…¶ä»–å­—æ®µä¼šè¢«èˆå¼ƒ</p><p>æ¯”å¦‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">  wrapper.select(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;name&quot;</span>).like(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;é»„&quot;</span>);</span><br><span class="line">  List&lt;Object&gt; objects = userMapper.selectObjs(wrapper);</span><br><span class="line">  objects.forEach(System.out::println);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>å¾—åˆ°çš„ç»“æœï¼Œåªå°è£…äº†ç¬¬ä¸€åˆ—çš„id</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p><h6 id="selectCount"><a href="#selectCount" class="headerlink" title="selectCount"></a>selectCount</h6><p>æŸ¥è¯¢æ»¡è¶³æ¡ä»¶çš„æ€»æ•°ï¼Œæ³¨æ„ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä¸èƒ½è°ƒç”¨<code>QueryWrapper</code>çš„<code>select</code>æ–¹æ³•è®¾ç½®è¦æŸ¥è¯¢çš„åˆ—äº†ã€‚è¿™ä¸ªæ–¹æ³•ä¼šè‡ªåŠ¨æ·»åŠ <code>select count(1)</code></p><p>æ¯”å¦‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">  wrapper.like(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;é»„&quot;</span>);</span><br><span class="line"></span><br><span class="line">  Integer count = userMapper.selectCount(wrapper);</span><br><span class="line">  System.out.println(count);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/641.jpg" alt="641"></p><h4 id="Service-CRUD-æ¥å£"><a href="#Service-CRUD-æ¥å£" class="headerlink" title="Service CRUD æ¥å£"></a>Service CRUD æ¥å£</h4><p>å¦å¤–ä¸€å¥—CRUDæ˜¯Serviceå±‚çš„ï¼Œåªéœ€è¦ç¼–å†™ä¸€ä¸ªæ¥å£ï¼Œç»§æ‰¿<code>IService</code>ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ¥å£å®ç°ç±»ï¼Œå³å¯é£Ÿç”¨ã€‚ï¼ˆè¿™ä¸ªæ¥å£æä¾›çš„CRUDæ–¹æ³•ï¼Œå’ŒMapperæ¥å£æä¾›çš„åŠŸèƒ½å¤§åŒå°å¼‚ï¼Œ<strong>æ¯”è¾ƒæ˜æ˜¾çš„åŒºåˆ«åœ¨äº</strong><strong><code>IService</code>æ”¯æŒäº†æ›´å¤šçš„æ‰¹é‡åŒ–æ“ä½œ</strong>ï¼Œå¦‚<code>saveBatch</code>ï¼Œ<code>saveOrUpdateBatch</code>ç­‰æ–¹æ³•ã€‚</p><p>é£Ÿç”¨ç¤ºä¾‹å¦‚ä¸‹</p><p>\1. é¦–å…ˆï¼Œæ–°å»ºä¸€ä¸ªæ¥å£ï¼Œç»§æ‰¿<code>IService</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mp.service;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;</span><br><span class="line">   <span class="keyword">import</span> com.example.mp.po.User;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> <span class="keyword">extends</span> <span class="title">IService</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>åˆ›å»ºè¿™ä¸ªæ¥å£çš„å®ç°ç±»ï¼Œå¹¶ç»§æ‰¿<code>ServiceImpl</code>ï¼Œæœ€åæ‰“ä¸Š<code>@Service</code>æ³¨è§£ï¼Œæ³¨å†Œåˆ°Springå®¹å™¨ä¸­ï¼Œå³å¯é£Ÿç”¨</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mp.service.impl;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line">   <span class="keyword">import</span> com.example.mp.mappers.UserMapper;</span><br><span class="line">   <span class="keyword">import</span> com.example.mp.po.User;</span><br><span class="line">   <span class="keyword">import</span> com.example.mp.service.UserService;</span><br><span class="line">   <span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line">   </span><br><span class="line">   <span class="meta">@Service</span></span><br><span class="line">   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">UserMapper</span>, <span class="title">User</span>&gt; <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123; &#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>æµ‹è¯•ä»£ç </li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mp;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;</span><br><span class="line">   <span class="keyword">import</span> com.baomidou.mybatisplus.core.toolkit.Wrappers;</span><br><span class="line">   <span class="keyword">import</span> com.example.mp.po.User;</span><br><span class="line">   <span class="keyword">import</span> com.example.mp.service.UserService;</span><br><span class="line">   <span class="keyword">import</span> org.junit.Test;</span><br><span class="line">   <span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line">   <span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">   <span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line">   <span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line">   <span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line">   <span class="meta">@SpringBootTest</span></span><br><span class="line">   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServiceTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testGetOne</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     LambdaQueryWrapper&lt;User&gt; wrapper = Wrappers.&lt;User&gt;lambdaQuery();</span><br><span class="line">     wrapper.gt(User::getAge, <span class="number">28</span>);</span><br><span class="line">     User one = userService.getOne(wrapper, <span class="keyword">false</span>); <span class="comment">// ç¬¬äºŒå‚æ•°æŒ‡å®šä¸ºfalse,ä½¿å¾—åœ¨æŸ¥åˆ°äº†å¤šè¡Œè®°å½•æ—¶,ä¸æŠ›å‡ºå¼‚å¸¸,è€Œè¿”å›ç¬¬ä¸€æ¡è®°å½•</span></span><br><span class="line">     System.out.println(one);</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>ç»“æœ</li></ol><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p><p>å¦ï¼Œ<code>IService</code>ä¹Ÿæ”¯æŒé“¾å¼è°ƒç”¨ï¼Œä»£ç å†™èµ·æ¥éå¸¸ç®€æ´ï¼ŒæŸ¥è¯¢ç¤ºä¾‹å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testChain</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  List&lt;User&gt; list = userService.lambdaQuery()</span><br><span class="line">    .gt(User::getAge, <span class="number">39</span>)</span><br><span class="line">    .likeRight(User::getName, <span class="string">&quot;ç‹&quot;</span>)</span><br><span class="line">    .list();</span><br><span class="line">  list.forEach(System.out::println);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p><p>æ›´æ–°ç¤ºä¾‹å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testChain</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  userService.lambdaUpdate()</span><br><span class="line">    .gt(User::getAge, <span class="number">39</span>)</span><br><span class="line">    .likeRight(User::getName, <span class="string">&quot;ç‹&quot;</span>)</span><br><span class="line">    .set(User::getEmail, <span class="string">&quot;w39@baomidou.com&quot;</span>)</span><br><span class="line">    .update();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p><p>åˆ é™¤ç¤ºä¾‹å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testChain</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  userService.lambdaUpdate()</span><br><span class="line">    .like(User::getName, <span class="string">&quot;é’è›™&quot;</span>)</span><br><span class="line">    .remove();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p><h3 id="æ¡ä»¶æ„é€ å™¨"><a href="#æ¡ä»¶æ„é€ å™¨" class="headerlink" title="æ¡ä»¶æ„é€ å™¨"></a>æ¡ä»¶æ„é€ å™¨</h3><p>mpè®©æˆ‘è§‰å¾—æå…¶æ–¹ä¾¿çš„ä¸€ç‚¹åœ¨äºå…¶æä¾›äº†å¼ºå¤§çš„æ¡ä»¶æ„é€ å™¨<code>Wrapper</code>ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„æ„é€ WHEREæ¡ä»¶ã€‚æ¡ä»¶æ„é€ å™¨ä¸»è¦æ¶‰åŠåˆ°3ä¸ªç±»ï¼Œ<code>AbstractWrapper</code>ã€‚<code>QueryWrapper</code>ï¼Œ<code>UpdateWrapper</code>ï¼Œå®ƒä»¬çš„ç±»å…³ç³»å¦‚ä¸‹</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/642.jpg" alt="642"></p><p>åœ¨<code>AbstractWrapper</code>ä¸­æä¾›äº†éå¸¸å¤šçš„æ–¹æ³•ç”¨äºæ„å»ºWHEREæ¡ä»¶ï¼Œè€Œ<code>QueryWrapper</code>é’ˆå¯¹<code>SELECT</code>è¯­å¥ï¼Œæä¾›äº†<code>select()</code>æ–¹æ³•ï¼Œå¯è‡ªå®šä¹‰éœ€è¦æŸ¥è¯¢çš„åˆ—ï¼Œè€Œ<code>UpdateWrapper</code>é’ˆå¯¹<code>UPDATE</code>è¯­å¥ï¼Œæä¾›äº†<code>set()</code>æ–¹æ³•ï¼Œç”¨äºæ„é€ <code>set</code>è¯­å¥ã€‚æ¡ä»¶æ„é€ å™¨ä¹Ÿæ”¯æŒlambdaè¡¨è¾¾å¼ï¼Œå†™èµ·æ¥éå¸¸èˆ’çˆ½ã€‚</p><p>ä¸‹é¢å¯¹<code>AbstractWrapper</code>ä¸­ç”¨äºæ„å»ºSQLè¯­å¥ä¸­çš„WHEREæ¡ä»¶çš„æ–¹æ³•è¿›è¡Œéƒ¨åˆ†åˆ—ä¸¾</p><ul><li><code>eq</code>ï¼šequalsï¼Œç­‰äº</li><li><code>allEq</code>ï¼šall equalsï¼Œå…¨ç­‰äº</li><li><code>ne</code>ï¼šnot equalsï¼Œä¸ç­‰äº</li><li><code>gt</code>ï¼šgreater than ï¼Œå¤§äº <code>&gt;</code></li><li><code>ge</code>ï¼šgreater than or equalsï¼Œå¤§äºç­‰äº<code>â‰¥</code></li><li><code>lt</code>ï¼šless thanï¼Œå°äº<code>&lt;</code></li><li><code>le</code>ï¼šless than or equalsï¼Œå°äºç­‰äº<code>â‰¤</code></li><li><code>between</code>ï¼šç›¸å½“äºSQLä¸­çš„BETWEEN</li><li><code>notBetween</code></li><li><code>like</code>ï¼šæ¨¡ç³ŠåŒ¹é…ã€‚<code>like(&quot;name&quot;,&quot;é»„&quot;)</code>ï¼Œç›¸å½“äºSQLçš„<code>name like &#39;%é»„%&#39;</code></li><li><code>likeRight</code>ï¼šæ¨¡ç³ŠåŒ¹é…å³åŠè¾¹ã€‚<code>likeRight(&quot;name&quot;,&quot;é»„&quot;)</code>ï¼Œç›¸å½“äºSQLçš„<code>name like &#39;é»„%&#39;</code></li><li><code>likeLeft</code>ï¼šæ¨¡ç³ŠåŒ¹é…å·¦åŠè¾¹ã€‚<code>likeLeft(&quot;name&quot;,&quot;é»„&quot;)</code>ï¼Œç›¸å½“äºSQLçš„<code>name like &#39;%é»„&#39;</code></li><li><code>notLike</code>ï¼š<code>notLike(&quot;name&quot;,&quot;é»„&quot;)</code>ï¼Œç›¸å½“äºSQLçš„<code>name not like &#39;%é»„%&#39;</code></li><li><code>isNull</code></li><li><code>isNotNull</code></li><li><code>in</code></li><li><code>and</code>ï¼šSQLè¿æ¥ç¬¦AND</li><li><code>or</code>ï¼šSQLè¿æ¥ç¬¦OR</li><li><code>apply</code>ï¼šç”¨äºæ‹¼æ¥SQLï¼Œè¯¥æ–¹æ³•å¯ç”¨äºæ•°æ®åº“å‡½æ•°ï¼Œå¹¶å¯ä»¥åŠ¨æ€ä¼ å‚</li><li>â€¦â€¦.</li></ul><h4 id="ä½¿ç”¨ç¤ºä¾‹"><a href="#ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ä½¿ç”¨ç¤ºä¾‹"></a>ä½¿ç”¨ç¤ºä¾‹</h4><p>ä¸‹é¢é€šè¿‡ä¸€äº›å…·ä½“çš„æ¡ˆä¾‹æ¥ç»ƒä¹ æ¡ä»¶æ„é€ å™¨çš„ä½¿ç”¨ã€‚ï¼ˆä½¿ç”¨å‰æ–‡åˆ›å»ºçš„<code>user</code>è¡¨ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¡ˆä¾‹å…ˆå±•ç¤ºéœ€è¦å®Œæˆçš„SQLè¯­å¥ï¼Œåå±•ç¤ºWrapperçš„å†™æ³•</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. åå­—ä¸­åŒ…å«ä½³ï¼Œä¸”å¹´é¾„å°äº25</span></span><br><span class="line"><span class="comment">// SELECT * FROM user WHERE name like &#x27;%ä½³%&#x27; AND age &lt; 25</span></span><br><span class="line">QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">wrapper.like(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;ä½³&quot;</span>).lt(<span class="string">&quot;age&quot;</span>, <span class="number">25</span>);</span><br><span class="line">List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line"><span class="comment">// ä¸‹é¢å±•ç¤ºSQLæ—¶ï¼Œä»…å±•ç¤ºWHEREæ¡ä»¶ï¼›å±•ç¤ºä»£ç æ—¶, ä»…å±•ç¤ºWrapperæ„å»ºéƒ¨åˆ†</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. å§“åä¸ºé»„å§“ï¼Œä¸”å¹´é¾„å¤§äºç­‰äº20ï¼Œå°äºç­‰äº40ï¼Œä¸”emailå­—æ®µä¸ä¸ºç©º</span></span><br><span class="line"><span class="comment">// name like &#x27;é»„%&#x27; AND age BETWEEN 20 AND 40 AND email is not null</span></span><br><span class="line">wrapper.likeRight(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;é»„&quot;</span>).between(<span class="string">&quot;age&quot;</span>, <span class="number">20</span>, <span class="number">40</span>).isNotNull(<span class="string">&quot;email&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. å§“åä¸ºé»„å§“ï¼Œæˆ–è€…å¹´é¾„å¤§äºç­‰äº40ï¼ŒæŒ‰ç…§å¹´é¾„é™åºæ’åˆ—ï¼Œå¹´é¾„ç›¸åŒåˆ™æŒ‰ç…§idå‡åºæ’åˆ—</span></span><br><span class="line"><span class="comment">// name like &#x27;é»„%&#x27; OR age &gt;= 40 order by age desc, id asc</span></span><br><span class="line">wrapper.likeRight(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;é»„&quot;</span>).or().ge(<span class="string">&quot;age&quot;</span>,<span class="number">40</span>).orderByDesc(<span class="string">&quot;age&quot;</span>).orderByAsc(<span class="string">&quot;id&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.åˆ›å»ºæ—¥æœŸä¸º2021å¹´3æœˆ22æ—¥ï¼Œå¹¶ä¸”ç›´å±ä¸Šçº§çš„åå­—ä¸ºæå§“</span></span><br><span class="line"><span class="comment">// date_format(create_time,&#x27;%Y-%m-%d&#x27;) = &#x27;2021-03-22&#x27; AND manager_id IN (SELECT id FROM user WHERE name like &#x27;æ%&#x27;)</span></span><br><span class="line">wrapper.apply(<span class="string">&quot;date_format(create_time, &#x27;%Y-%m-%d&#x27;) = &#123;0&#125;&quot;</span>, <span class="string">&quot;2021-03-22&quot;</span>) <span class="comment">// å»ºè®®é‡‡ç”¨&#123;index&#125;è¿™ç§æ–¹å¼åŠ¨æ€ä¼ å‚, å¯é˜²æ­¢SQLæ³¨å…¥</span></span><br><span class="line">    .inSql(<span class="string">&quot;manager_id&quot;</span>, <span class="string">&quot;SELECT id FROM user WHERE name like &#x27;æ%&#x27;&quot;</span>);</span><br><span class="line"><span class="comment">// ä¸Šé¢çš„apply, ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ä¸‹é¢è¿™ç§æ–¹å¼åšå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œä½†å½“è¿™ä¸ªæ—¥æœŸæ˜¯ä¸€ä¸ªå¤–éƒ¨å‚æ•°æ—¶ï¼Œè¿™ç§æ–¹å¼æœ‰SQLæ³¨å…¥çš„é£é™©</span></span><br><span class="line">wrapper.apply(<span class="string">&quot;date_format(create_time, &#x27;%Y-%m-%d&#x27;) = &#x27;2021-03-22&#x27;&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. åå­—ä¸ºç‹å§“ï¼Œå¹¶ä¸”ï¼ˆå¹´é¾„å°äº40ï¼Œæˆ–è€…é‚®ç®±ä¸ä¸ºç©ºï¼‰</span></span><br><span class="line"><span class="comment">// name like &#x27;ç‹%&#x27; AND (age &lt; 40 OR email is not null)</span></span><br><span class="line">wrapper.likeRight(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;ç‹&quot;</span>).and(q -&gt; q.lt(<span class="string">&quot;age&quot;</span>, <span class="number">40</span>).or().isNotNull(<span class="string">&quot;email&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6. åå­—ä¸ºç‹å§“ï¼Œæˆ–è€…ï¼ˆå¹´é¾„å°äº40å¹¶ä¸”å¹´é¾„å¤§äº20å¹¶ä¸”é‚®ç®±ä¸ä¸ºç©ºï¼‰</span></span><br><span class="line"><span class="comment">// name like &#x27;ç‹%&#x27; OR (age &lt; 40 AND age &gt; 20 AND email is not null)</span></span><br><span class="line">wrapper.likeRight(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;ç‹&quot;</span>).or(</span><br><span class="line">    q -&gt; q.lt(<span class="string">&quot;age&quot;</span>,<span class="number">40</span>)</span><br><span class="line">      .gt(<span class="string">&quot;age&quot;</span>,<span class="number">20</span>)</span><br><span class="line">      .isNotNull(<span class="string">&quot;email&quot;</span>)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line"><span class="comment">// 7. (å¹´é¾„å°äº40æˆ–è€…é‚®ç®±ä¸ä¸ºç©º) å¹¶ä¸”åå­—ä¸ºç‹å§“</span></span><br><span class="line"><span class="comment">// (age &lt; 40 OR email is not null) AND name like &#x27;ç‹%&#x27;</span></span><br><span class="line">wrapper.nested(q -&gt; q.lt(<span class="string">&quot;age&quot;</span>, <span class="number">40</span>).or().isNotNull(<span class="string">&quot;email&quot;</span>))</span><br><span class="line">    .likeRight(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;ç‹&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 8. å¹´é¾„ä¸º30ï¼Œ31ï¼Œ34ï¼Œ35</span></span><br><span class="line"><span class="comment">// age IN (30,31,34,35)</span></span><br><span class="line">wrapper.in(<span class="string">&quot;age&quot;</span>, Arrays.asList(<span class="number">30</span>,<span class="number">31</span>,<span class="number">34</span>,<span class="number">35</span>));</span><br><span class="line"><span class="comment">// æˆ–</span></span><br><span class="line">wrapper.inSql(<span class="string">&quot;age&quot;</span>,<span class="string">&quot;30,31,34,35&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 9. å¹´é¾„ä¸º30ï¼Œ31ï¼Œ34ï¼Œ35, è¿”å›æ»¡è¶³æ¡ä»¶çš„ç¬¬ä¸€æ¡è®°å½•</span></span><br><span class="line"><span class="comment">// age IN (30,31,34,35) LIMIT 1</span></span><br><span class="line">wrapper.in(<span class="string">&quot;age&quot;</span>, Arrays.asList(<span class="number">30</span>,<span class="number">31</span>,<span class="number">34</span>,<span class="number">35</span>)).last(<span class="string">&quot;LIMIT 1&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 10. åªé€‰å‡ºid, name åˆ— (QueryWrapper ç‰¹æœ‰)</span></span><br><span class="line"><span class="comment">// SELECT id, name FROM user;</span></span><br><span class="line">wrapper.select(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;name&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 11. é€‰å‡ºid, name, age, email, ç­‰åŒäºæ’é™¤ manager_id å’Œ create_time</span></span><br><span class="line"><span class="comment">// å½“åˆ—ç‰¹åˆ«å¤š, è€Œåªéœ€è¦æ’é™¤ä¸ªåˆ«åˆ—æ—¶, é‡‡ç”¨ä¸Šé¢çš„æ–¹å¼å¯èƒ½éœ€è¦å†™å¾ˆå¤šä¸ªåˆ—, å¯ä»¥é‡‡ç”¨é‡è½½çš„selectæ–¹æ³•ï¼ŒæŒ‡å®šéœ€è¦æ’é™¤çš„åˆ—</span></span><br><span class="line">wrapper.select(User.class, info -&gt; &#123;</span><br><span class="line">   String columnName = info.getColumn();</span><br><span class="line">   <span class="keyword">return</span> !<span class="string">&quot;create_time&quot;</span>.equals(columnName) &amp;&amp; !<span class="string">&quot;manager_id&quot;</span>.equals(columnName);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><h4 id="Condition"><a href="#Condition" class="headerlink" title="Condition"></a>Condition</h4><p>æ¡ä»¶æ„é€ å™¨çš„è¯¸å¤šæ–¹æ³•ä¸­ï¼Œå‡å¯ä»¥æŒ‡å®šä¸€ä¸ª<code>boolean</code>ç±»å‹çš„å‚æ•°<code>condition</code>ï¼Œç”¨æ¥å†³å®šè¯¥æ¡ä»¶æ˜¯å¦åŠ å…¥æœ€åç”Ÿæˆçš„WHEREè¯­å¥ä¸­ï¼Œæ¯”å¦‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">String name = <span class="string">&quot;é»„&quot;</span>; <span class="comment">// å‡è®¾nameå˜é‡æ˜¯ä¸€ä¸ªå¤–éƒ¨ä¼ å…¥çš„å‚æ•°</span></span><br><span class="line">QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">wrapper.like(StringUtils.hasText(name), <span class="string">&quot;name&quot;</span>, name);</span><br><span class="line"><span class="comment">// ä»…å½“ StringUtils.hasText(name) ä¸º true æ—¶, ä¼šæ‹¼æ¥è¿™ä¸ªlikeè¯­å¥åˆ°WHEREä¸­</span></span><br><span class="line"><span class="comment">// å…¶å®å°±æ˜¯å¯¹ä¸‹é¢ä»£ç çš„ç®€åŒ–</span></span><br><span class="line"><span class="keyword">if</span> (StringUtils.hasText(name)) &#123;</span><br><span class="line"> wrapper.like(<span class="string">&quot;name&quot;</span>, name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å®ä½“å¯¹è±¡ä½œä¸ºæ¡ä»¶"><a href="#å®ä½“å¯¹è±¡ä½œä¸ºæ¡ä»¶" class="headerlink" title="å®ä½“å¯¹è±¡ä½œä¸ºæ¡ä»¶"></a>å®ä½“å¯¹è±¡ä½œä¸ºæ¡ä»¶</h4><p>è°ƒç”¨æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ª<code>Wrapper</code>å¯¹è±¡æ—¶ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªå®ä½“å¯¹è±¡ã€‚åç»­ä½¿ç”¨è¿™ä¸ª<code>Wrapper</code>æ—¶ï¼Œä¼šä»¥å®ä½“å¯¹è±¡ä¸­çš„éç©ºå±æ€§ï¼Œæ„å»ºWHEREæ¡ä»¶ï¼ˆé»˜è®¤æ„å»º<strong>ç­‰å€¼åŒ¹é…</strong>çš„WHEREæ¡ä»¶ï¼Œè¿™ä¸ªè¡Œä¸ºå¯ä»¥é€šè¿‡å®ä½“ç±»é‡Œå„ä¸ªå­—æ®µä¸Šçš„<code>@TableField</code>æ³¨è§£ä¸­çš„<code>condition</code>å±æ€§è¿›è¡Œæ”¹å˜ï¼‰</p><p>ç¤ºä¾‹å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">  user.setName(<span class="string">&quot;é»„ä¸»ç®¡&quot;</span>);</span><br><span class="line">  user.setAge(<span class="number">28</span>);</span><br><span class="line">  QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;(user);</span><br><span class="line">  List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">  users.forEach(System.out::println);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœå¦‚ä¸‹ã€‚å¯ä»¥çœ‹åˆ°ï¼Œæ˜¯æ ¹æ®å®ä½“å¯¹è±¡ä¸­çš„éç©ºå±æ€§ï¼Œè¿›è¡Œäº†<strong>ç­‰å€¼åŒ¹é…æŸ¥è¯¢</strong>ã€‚</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/643.jpg" alt="643"></p><p>è‹¥å¸Œæœ›é’ˆå¯¹æŸäº›å±æ€§ï¼Œæ”¹å˜<strong>ç­‰å€¼åŒ¹é…</strong>çš„è¡Œä¸ºï¼Œåˆ™å¯ä»¥åœ¨å®ä½“ç±»ä¸­ç”¨<code>@TableField</code>æ³¨è§£è¿›è¡Œé…ç½®ï¼Œç¤ºä¾‹å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mp.po;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.SqlCondition;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"> <span class="keyword">private</span> Long id;</span><br><span class="line"> <span class="meta">@TableField(condition = SqlCondition.LIKE)</span> <span class="comment">// é…ç½®è¯¥å­—æ®µä½¿ç”¨likeè¿›è¡Œæ‹¼æ¥</span></span><br><span class="line"> <span class="keyword">private</span> String name;</span><br><span class="line"> <span class="keyword">private</span> Integer age;</span><br><span class="line"> <span class="keyword">private</span> String email;</span><br><span class="line"> <span class="keyword">private</span> Long managerId;</span><br><span class="line"> <span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œä¸‹é¢çš„æµ‹è¯•ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">  user.setName(<span class="string">&quot;é»„&quot;</span>);</span><br><span class="line">  QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;(user);</span><br><span class="line">  List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">  users.forEach(System.out::println);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>ä»ä¸‹å›¾å¾—åˆ°çš„ç»“æœæ¥çœ‹ï¼Œå¯¹äºå®ä½“å¯¹è±¡ä¸­çš„<code>name</code>å­—æ®µï¼Œé‡‡ç”¨äº†<code>like</code>è¿›è¡Œæ‹¼æ¥</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p><p><code>@TableField</code>ä¸­é…ç½®çš„<code>condition</code>å±æ€§å®åˆ™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ<code>SqlCondition</code>ç±»ä¸­é¢„å®šä¹‰äº†ä¸€äº›å­—ç¬¦ä¸²ä»¥ä¾›é€‰æ‹©</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.baomidou.mybatisplus.annotation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SqlCondition</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ä¸‹é¢çš„å­—ç¬¦ä¸²ä¸­, %s æ˜¯å ä½ç¬¦, ç¬¬ä¸€ä¸ª %s æ˜¯åˆ—å, ç¬¬äºŒä¸ª %s æ˜¯åˆ—çš„å€¼</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String EQUAL = <span class="string">&quot;%s=#&#123;%s&#125;&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String NOT_EQUAL = <span class="string">&quot;%s&amp;lt;&amp;gt;#&#123;%s&#125;&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String LIKE = <span class="string">&quot;%s LIKE CONCAT(&#x27;%%&#x27;,#&#123;%s&#125;,&#x27;%%&#x27;)&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String LIKE_LEFT = <span class="string">&quot;%s LIKE CONCAT(&#x27;%%&#x27;,#&#123;%s&#125;)&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String LIKE_RIGHT = <span class="string">&quot;%s LIKE CONCAT(#&#123;%s&#125;,&#x27;%%&#x27;)&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>SqlCondition</code>ä¸­æä¾›çš„é…ç½®æ¯”è¾ƒæœ‰é™ï¼Œå½“æˆ‘ä»¬éœ€è¦<code>&lt;</code>æˆ–<code>&gt;</code>ç­‰æ‹¼æ¥æ–¹å¼ï¼Œåˆ™éœ€è¦è‡ªå·±å®šä¹‰ã€‚æ¯”å¦‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mp.po;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.SqlCondition;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"> <span class="keyword">private</span> Long id;</span><br><span class="line"> <span class="meta">@TableField(condition = SqlCondition.LIKE)</span></span><br><span class="line"> <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@TableField(condition = &quot;%s &amp;gt; #&#123;%s&#125;&quot;)</span> <span class="comment">// è¿™é‡Œç›¸å½“äºå¤§äº, å…¶ä¸­ &amp;gt; æ˜¯å­—ç¬¦å®ä½“</span></span><br><span class="line"> <span class="keyword">private</span> Integer age;</span><br><span class="line"> <span class="keyword">private</span> String email;</span><br><span class="line"> <span class="keyword">private</span> Long managerId;</span><br><span class="line"> <span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">  user.setName(<span class="string">&quot;é»„&quot;</span>);</span><br><span class="line">        user.setAge(<span class="number">30</span>);</span><br><span class="line">  QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;(user);</span><br><span class="line">  List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">  users.forEach(System.out::println);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>ä»ä¸‹å›¾å¾—åˆ°çš„ç»“æœï¼Œå¯ä»¥çœ‹å‡ºï¼Œ<code>name</code>å±æ€§æ˜¯ç”¨<code>like</code>æ‹¼æ¥çš„ï¼Œè€Œ<code>age</code>å±æ€§æ˜¯ç”¨<code>&gt;</code>æ‹¼æ¥çš„</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p><h4 id="allEqæ–¹æ³•"><a href="#allEqæ–¹æ³•" class="headerlink" title="allEqæ–¹æ³•"></a>allEqæ–¹æ³•</h4><p>allEqæ–¹æ³•ä¼ å…¥ä¸€ä¸ª<code>map</code>ï¼Œç”¨æ¥åšç­‰å€¼åŒ¹é…</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">  Map&lt;String, Object&gt; param = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">  param.put(<span class="string">&quot;age&quot;</span>, <span class="number">40</span>);</span><br><span class="line">  param.put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;é»„é£é£&quot;</span>);</span><br><span class="line">  wrapper.allEq(param);</span><br><span class="line">  List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">  users.forEach(System.out::println);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p><p>å½“allEqæ–¹æ³•ä¼ å…¥çš„Mapä¸­æœ‰valueä¸º<code>null</code>çš„å…ƒç´ æ—¶ï¼Œé»˜è®¤ä¼šè®¾ç½®ä¸º<code>is null</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">  Map&lt;String, Object&gt; param = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">  param.put(<span class="string">&quot;age&quot;</span>, <span class="number">40</span>);</span><br><span class="line">  param.put(<span class="string">&quot;name&quot;</span>, <span class="keyword">null</span>);</span><br><span class="line">  wrapper.allEq(param);</span><br><span class="line">  List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">  users.forEach(System.out::println);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p><p>è‹¥æƒ³å¿½ç•¥mapä¸­valueä¸º<code>null</code>çš„å…ƒç´ ï¼Œå¯ä»¥åœ¨è°ƒç”¨allEqæ—¶ï¼Œè®¾ç½®å‚æ•°<code>boolean null2IsNull</code>ä¸º<code>false</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">  Map&lt;String, Object&gt; param = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">  param.put(<span class="string">&quot;age&quot;</span>, <span class="number">40</span>);</span><br><span class="line">  param.put(<span class="string">&quot;name&quot;</span>, <span class="keyword">null</span>);</span><br><span class="line">  wrapper.allEq(param, <span class="keyword">false</span>);</span><br><span class="line">  List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">  users.forEach(System.out::println);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/644.jpg" alt="644"></p><p>è‹¥æƒ³è¦åœ¨æ‰§è¡ŒallEqæ—¶ï¼Œè¿‡æ»¤æ‰Mapä¸­çš„æŸäº›å…ƒç´ ï¼Œå¯ä»¥è°ƒç”¨allEqçš„é‡è½½æ–¹æ³•<code>allEq(BiPredicate&lt;R, V&gt; filter, Map&lt;R, V&gt; params)</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">  Map&lt;String, Object&gt; param = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">  param.put(<span class="string">&quot;age&quot;</span>, <span class="number">40</span>);</span><br><span class="line">  param.put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;é»„é£é£&quot;</span>);</span><br><span class="line">  wrapper.allEq((k,v) -&gt; !<span class="string">&quot;name&quot;</span>.equals(k), param); <span class="comment">// è¿‡æ»¤æ‰mapä¸­keyä¸ºnameçš„å…ƒç´ </span></span><br><span class="line">  List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">  users.forEach(System.out::println);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/645.jpg" alt="645"></p><h4 id="lambdaæ¡ä»¶æ„é€ å™¨"><a href="#lambdaæ¡ä»¶æ„é€ å™¨" class="headerlink" title="lambdaæ¡ä»¶æ„é€ å™¨"></a>lambdaæ¡ä»¶æ„é€ å™¨</h4><p>lambdaæ¡ä»¶æ„é€ å™¨ï¼Œæ”¯æŒlambdaè¡¨è¾¾å¼ï¼Œå¯ä»¥ä¸å¿…åƒæ™®é€šæ¡ä»¶æ„é€ å™¨ä¸€æ ·ï¼Œä»¥å­—ç¬¦ä¸²å½¢å¼æŒ‡å®šåˆ—åï¼Œå®ƒå¯ä»¥ç›´æ¥ä»¥å®ä½“ç±»çš„<strong>æ–¹æ³•å¼•ç”¨</strong>æ¥æŒ‡å®šåˆ—ã€‚ç¤ºä¾‹å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testLambda</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  LambdaQueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> LambdaQueryWrapper&lt;&gt;();</span><br><span class="line">  wrapper.like(User::getName, <span class="string">&quot;é»„&quot;</span>).lt(User::getAge, <span class="number">30</span>);</span><br><span class="line">  List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br><span class="line">  users.forEach(System.out::println);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p><p>åƒæ™®é€šçš„æ¡ä»¶æ„é€ å™¨ï¼Œåˆ—åæ˜¯ç”¨å­—ç¬¦ä¸²çš„å½¢å¼æŒ‡å®šï¼Œæ— æ³•åœ¨ç¼–è¯‘æœŸè¿›è¡Œåˆ—ååˆæ³•æ€§çš„æ£€æŸ¥ï¼Œè¿™å°±ä¸å¦‚lambdaæ¡ä»¶æ„é€ å™¨æ¥çš„ä¼˜é›…ã€‚</p><p>å¦å¤–ï¼Œè¿˜æœ‰ä¸ª<strong>é“¾å¼lambdaæ¡ä»¶æ„é€ å™¨</strong>ï¼Œä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testLambda</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  LambdaQueryChainWrapper&lt;User&gt; chainWrapper = <span class="keyword">new</span> LambdaQueryChainWrapper&lt;&gt;(userMapper);</span><br><span class="line">  List&lt;User&gt; users = chainWrapper.like(User::getName, <span class="string">&quot;é»„&quot;</span>).gt(User::getAge, <span class="number">30</span>).list();</span><br><span class="line">  users.forEach(System.out::println);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p><h3 id="æ›´æ–°æ“ä½œ"><a href="#æ›´æ–°æ“ä½œ" class="headerlink" title="æ›´æ–°æ“ä½œ"></a>æ›´æ–°æ“ä½œ</h3><p>ä¸Šé¢ä»‹ç»çš„éƒ½æ˜¯æŸ¥è¯¢æ“ä½œ,ç°åœ¨æ¥è®²æ›´æ–°å’Œåˆ é™¤æ“ä½œã€‚</p><p><code>BaseMapper</code>ä¸­æä¾›äº†2ä¸ªæ›´æ–°æ–¹æ³•</p><ul><li><p><code>updateById(T entity)</code></p><p>æ ¹æ®å…¥å‚<code>entity</code>çš„<code>id</code>ï¼ˆä¸»é”®ï¼‰è¿›è¡Œæ›´æ–°ï¼Œå¯¹äº<code>entity</code>ä¸­éç©ºçš„å±æ€§ï¼Œä¼šå‡ºç°åœ¨UPDATEè¯­å¥çš„SETåé¢ï¼Œå³<code>entity</code>ä¸­éç©ºçš„å±æ€§ï¼Œä¼šè¢«æ›´æ–°åˆ°æ•°æ®åº“ï¼Œç¤ºä¾‹å¦‚ä¸‹</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line">  <span class="meta">@SpringBootTest</span></span><br><span class="line">  <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UpdateTest</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setId(<span class="number">2L</span>);</span><br><span class="line">    user.setAge(<span class="number">18</span>);</span><br><span class="line">    userMapper.updateById(user);</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p><ul><li><p><code>update(T entity, Wrapper&lt;T&gt; wrapper)</code></p><p>æ ¹æ®å®ä½“<code>entity</code>å’Œæ¡ä»¶æ„é€ å™¨<code>wrapper</code>è¿›è¡Œæ›´æ–°ï¼Œç¤ºä¾‹å¦‚ä¸‹</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setName(<span class="string">&quot;ç‹ä¸‰è›‹&quot;</span>);</span><br><span class="line">    LambdaUpdateWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> LambdaUpdateWrapper&lt;&gt;();</span><br><span class="line">    wrapper.between(User::getAge, <span class="number">26</span>,<span class="number">31</span>).likeRight(User::getName,<span class="string">&quot;å´&quot;</span>);</span><br><span class="line">    userMapper.update(user, wrapper);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p><p>é¢å¤–æ¼”ç¤ºä¸€ä¸‹ï¼ŒæŠŠå®ä½“å¯¹è±¡ä¼ å…¥<code>Wrapper</code>ï¼Œå³ç”¨å®ä½“å¯¹è±¡æ„é€ WHEREæ¡ä»¶çš„æ¡ˆä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    User whereUser = <span class="keyword">new</span> User();</span><br><span class="line">    whereUser.setAge(<span class="number">40</span>);</span><br><span class="line">    whereUser.setName(<span class="string">&quot;ç‹&quot;</span>);</span><br><span class="line">  </span><br><span class="line">    LambdaUpdateWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> LambdaUpdateWrapper&lt;&gt;(whereUser);</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setEmail(<span class="string">&quot;share@baomidou.com&quot;</span>);</span><br><span class="line">    user.setManagerId(<span class="number">10L</span>);</span><br><span class="line">  </span><br><span class="line">    userMapper.update(user, wrapper);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„åˆ°æˆ‘ä»¬çš„Userç±»ä¸­ï¼Œå¯¹<code>name</code>å±æ€§å’Œ<code>age</code>å±æ€§è¿›è¡Œäº†å¦‚ä¸‹çš„è®¾ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"> <span class="keyword">private</span> Long id;</span><br><span class="line"> <span class="meta">@TableField(condition = SqlCondition.LIKE)</span></span><br><span class="line"> <span class="keyword">private</span> String name;</span><br><span class="line"> <span class="meta">@TableField(condition = &quot;%s &amp;gt; #&#123;%s&#125;&quot;)</span></span><br><span class="line"> <span class="keyword">private</span> Integer age;</span><br><span class="line"> <span class="keyword">private</span> String email;</span><br><span class="line"> <span class="keyword">private</span> Long managerId;</span><br><span class="line"> <span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœ</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/646.jpg" alt="646"></p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/500.jpg" alt="500"></p><p>å†é¢å¤–æ¼”ç¤ºä¸€ä¸‹ï¼Œé“¾å¼lambdaæ¡ä»¶æ„é€ å™¨çš„ä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate5</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  LambdaUpdateChainWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> LambdaUpdateChainWrapper&lt;&gt;(userMapper);</span><br><span class="line">  wrapper.likeRight(User::getEmail, <span class="string">&quot;share&quot;</span>)</span><br><span class="line">    .like(User::getName, <span class="string">&quot;é£é£&quot;</span>)</span><br><span class="line">    .set(User::getEmail, <span class="string">&quot;ff@baomidou.com&quot;</span>)</span><br><span class="line">    .update();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p><p><strong>åæ€</strong></p><p>ç”±äº<code>BaseMapper</code>æä¾›çš„2ä¸ªæ›´æ–°æ–¹æ³•éƒ½æ˜¯ä¼ å…¥ä¸€ä¸ªå®ä½“å¯¹è±¡å»æ‰§è¡Œæ›´æ–°ï¼Œè¿™<strong>åœ¨éœ€è¦æ›´æ–°çš„åˆ—æ¯”è¾ƒå¤šæ—¶è¿˜å¥½</strong>ï¼Œè‹¥æƒ³è¦æ›´æ–°çš„åªæœ‰é‚£ä¹ˆä¸€åˆ—ï¼Œæˆ–è€…ä¸¤åˆ—ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªå®ä½“å¯¹è±¡å°±æ˜¾å¾—æœ‰ç‚¹éº»çƒ¦ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œ<code>UpdateWrapper</code>æä¾›æœ‰<code>set</code>æ–¹æ³•ï¼Œå¯ä»¥æ‰‹åŠ¨æ‹¼æ¥SQLä¸­çš„SETè¯­å¥ï¼Œæ­¤æ—¶å¯ä»¥ä¸å¿…ä¼ å…¥å®ä½“å¯¹è±¡ï¼Œç¤ºä¾‹å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate4</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  LambdaUpdateWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> LambdaUpdateWrapper&lt;&gt;();</span><br><span class="line">  wrapper.likeRight(User::getEmail, <span class="string">&quot;share&quot;</span>).set(User::getManagerId, <span class="number">9L</span>);</span><br><span class="line">  userMapper.update(<span class="keyword">null</span>, wrapper);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="å›¾ç‰‡"></p><h3 id="åˆ é™¤æ“ä½œ"><a href="#åˆ é™¤æ“ä½œ" class="headerlink" title="åˆ é™¤æ“ä½œ"></a>åˆ é™¤æ“ä½œ</h3><p><code>BaseMapper</code>ä¸€å…±æä¾›äº†å¦‚ä¸‹å‡ ä¸ªç”¨äºåˆ é™¤çš„æ–¹æ³•</p><ul><li><code>deleteById</code> æ ¹æ®ä¸»é”®idè¿›è¡Œåˆ é™¤</li><li><code>deleteBatchIds</code> æ ¹æ®ä¸»é”®idè¿›è¡Œæ‰¹é‡åˆ é™¤</li><li><code>deleteByMap</code> æ ¹æ®Mapè¿›è¡Œåˆ é™¤ï¼ˆMapä¸­çš„keyä¸ºåˆ—åï¼Œvalueä¸ºå€¼ï¼Œæ ¹æ®åˆ—å’Œå€¼è¿›è¡Œç­‰å€¼åŒ¹é…ï¼‰</li><li><code>delete(Wrapper&lt;T&gt; wrapper)</code> æ ¹æ®æ¡ä»¶æ„é€ å™¨<code>Wrapper</code>è¿›è¡Œåˆ é™¤</li></ul><p>ä¸å‰é¢æŸ¥è¯¢å’Œæ›´æ–°çš„æ“ä½œå¤§åŒå°å¼‚ï¼Œä¸åšèµ˜è¿°</p><h3 id="è‡ªå®šä¹‰SQL"><a href="#è‡ªå®šä¹‰SQL" class="headerlink" title="è‡ªå®šä¹‰SQL"></a>è‡ªå®šä¹‰SQL</h3><p>å½“mpæä¾›çš„æ–¹æ³•è¿˜ä¸èƒ½æ»¡è¶³éœ€æ±‚æ—¶ï¼Œåˆ™å¯ä»¥è‡ªå®šä¹‰SQLã€‚</p><h4 id="åŸç”Ÿmybatis"><a href="#åŸç”Ÿmybatis" class="headerlink" title="åŸç”Ÿmybatis"></a>åŸç”Ÿmybatis</h4><p>ç¤ºä¾‹å¦‚ä¸‹</p><ul><li>æ³¨è§£æ–¹å¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mp.mappers;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.example.mp.po.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> yogurtzzz</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2021/3/18 11:21</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line"> </span><br><span class="line"> <span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line"> <span class="function">List&lt;User&gt; <span class="title">selectRaw</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>xmlæ–¹å¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper PUBLIC <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="line">&lt;mapper namespace=<span class="string">&quot;com.example.mp.mappers.UserMapper&quot;</span>&gt;</span><br><span class="line"> &lt;select id=<span class="string">&quot;selectRaw&quot;</span> resultType=<span class="string">&quot;com.example.mp.po.User&quot;</span>&gt;</span><br><span class="line">        SELECT * FROM user</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br><span class="line"><span class="keyword">package</span> com.example.mp.mappers;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.example.mp.po.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line"> <span class="function">List&lt;User&gt; <span class="title">selectRaw</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨xmlæ—¶ï¼Œ<strong>è‹¥xmlæ–‡ä»¶ä¸mapperæ¥å£æ–‡ä»¶ä¸åœ¨åŒä¸€ç›®å½•ä¸‹</strong>ï¼Œåˆ™éœ€è¦åœ¨<code>application.yml</code>ä¸­é…ç½®mapper.xmlçš„å­˜æ”¾è·¯å¾„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mybatis-plus:</span><br><span class="line">  mapper-locations: /mappers<span class="comment">/*</span></span><br></pre></td></tr></table></figure><p>è‹¥æœ‰å¤šä¸ªåœ°æ–¹å­˜æ”¾mapperï¼Œåˆ™ç”¨æ•°ç»„å½¢å¼è¿›è¡Œé…ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mybatis-plus:</span><br><span class="line">  mapper-locations: </span><br><span class="line">  - /mappers<span class="comment">/*</span></span><br><span class="line"><span class="comment">  - /com/example/mp/*</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•ä»£ç å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCustomRawSql</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  List&lt;User&gt; users = userMapper.selectRaw();</span><br><span class="line">  users.forEach(System.out::println);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>ç»“æœ</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/647.jpg" alt="647"></p><h4 id="mybatis-plus"><a href="#mybatis-plus" class="headerlink" title="mybatis-plus"></a>mybatis-plus</h4><p>ä¹Ÿå¯ä»¥ä½¿ç”¨mpæä¾›çš„Wrapperæ¡ä»¶æ„é€ å™¨ï¼Œæ¥è‡ªå®šä¹‰SQL</p><p>ç¤ºä¾‹å¦‚ä¸‹</p><ul><li>æ³¨è§£æ–¹å¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mp.mappers;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.Wrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.toolkit.Constants;</span><br><span class="line"><span class="keyword">import</span> com.example.mp.po.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// SQLä¸­ä¸å†™WHEREå…³é”®å­—ï¼Œä¸”å›ºå®šä½¿ç”¨$&#123;ew.customSqlSegment&#125;</span></span><br><span class="line"> <span class="meta">@Select(&quot;select * from user $&#123;ew.customSqlSegment&#125;&quot;)</span></span><br><span class="line"> <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span>Wrapper&lt;User&gt; wrapper)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>xmlæ–¹å¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mp.mappers;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.Wrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.example.mp.po.User;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line"> <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">(Wrapper&lt;User&gt; wrapper)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- UserMapper.xml --&gt;</span><br><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper PUBLIC <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="line">&lt;mapper namespace=<span class="string">&quot;com.example.mp.mappers.UserMapper&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;select id=<span class="string">&quot;findAll&quot;</span> resultType=<span class="string">&quot;com.example.mp.po.User&quot;</span>&gt;</span><br><span class="line">        SELECT * FROM user $&#123;ew.customSqlSegment&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure><h3 id="åˆ†é¡µæŸ¥è¯¢"><a href="#åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="åˆ†é¡µæŸ¥è¯¢"></a>åˆ†é¡µæŸ¥è¯¢</h3><p><code>BaseMapper</code>ä¸­æä¾›äº†2ä¸ªæ–¹æ³•è¿›è¡Œåˆ†é¡µæŸ¥è¯¢ï¼Œåˆ†åˆ«æ˜¯<code>selectPage</code>å’Œ<code>selectMapsPage</code>ï¼Œå‰è€…ä¼šå°†æŸ¥è¯¢çš„ç»“æœå°è£…æˆJavaå®ä½“å¯¹è±¡ï¼Œåè€…ä¼šå°è£…æˆ<code>Map&lt;String,Object&gt;</code>ã€‚åˆ†é¡µæŸ¥è¯¢çš„é£Ÿç”¨ç¤ºä¾‹å¦‚ä¸‹</p><ol><li>åˆ›å»ºmpçš„åˆ†é¡µæ‹¦æˆªå™¨ï¼Œæ³¨å†Œåˆ°Springå®¹å™¨ä¸­</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mp.config;</span><br><span class="line">   <span class="keyword">import</span> com.baomidou.mybatisplus.annotation.DbType;</span><br><span class="line">   <span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;</span><br><span class="line">   <span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;</span><br><span class="line">   <span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line">   <span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line">   </span><br><span class="line">   <span class="meta">@Configuration</span></span><br><span class="line">   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisPlusConfig</span> </span>&#123;</span><br><span class="line">   </span><br><span class="line">       <span class="comment">/** æ–°ç‰ˆmp **/</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MybatisPlusInterceptor <span class="title">mybatisPlusInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     MybatisPlusInterceptor interceptor = <span class="keyword">new</span> MybatisPlusInterceptor();</span><br><span class="line">     interceptor.addInnerInterceptor(<span class="keyword">new</span> PaginationInnerInterceptor(DbType.MYSQL));</span><br><span class="line">     <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">       <span class="comment">/** æ—§ç‰ˆmp ç”¨ PaginationInterceptor **/</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>æ‰§è¡Œåˆ†é¡µæŸ¥è¯¢</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testPage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     LambdaQueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> LambdaQueryWrapper&lt;&gt;();</span><br><span class="line">     wrapper.ge(User::getAge, <span class="number">28</span>);</span><br><span class="line">           <span class="comment">// è®¾ç½®åˆ†é¡µä¿¡æ¯, æŸ¥ç¬¬3é¡µ, æ¯é¡µ2æ¡æ•°æ®</span></span><br><span class="line">     Page&lt;User&gt; page = <span class="keyword">new</span> Page&lt;&gt;(<span class="number">3</span>, <span class="number">2</span>);</span><br><span class="line">           <span class="comment">// æ‰§è¡Œåˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line">     Page&lt;User&gt; userPage = userMapper.selectPage(page, wrapper);</span><br><span class="line">     System.out.println(<span class="string">&quot;æ€»è®°å½•æ•° = &quot;</span> + userPage.getTotal());</span><br><span class="line">     System.out.println(<span class="string">&quot;æ€»é¡µæ•° = &quot;</span> + userPage.getPages());</span><br><span class="line">     System.out.println(<span class="string">&quot;å½“å‰é¡µç  = &quot;</span> + userPage.getCurrent());</span><br><span class="line">           <span class="comment">// è·å–åˆ†é¡µæŸ¥è¯¢ç»“æœ</span></span><br><span class="line">     List&lt;User&gt; records = userPage.getRecords();</span><br><span class="line">     records.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>ç»“æœ</li></ol><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/648.jpg" alt="648"></p><ol start="4"><li>å…¶ä»–</li></ol><p>æ³¨æ„åˆ°ï¼Œåˆ†é¡µæŸ¥è¯¢æ€»å…±å‘å‡ºäº†2æ¬¡SQLï¼Œä¸€æ¬¡æŸ¥æ€»è®°å½•æ•°ï¼Œä¸€æ¬¡æŸ¥å…·ä½“æ•°æ®ã€‚<strong>è‹¥å¸Œæœ›ä¸æŸ¥æ€»è®°å½•æ•°ï¼Œä»…æŸ¥åˆ†é¡µç»“æœ</strong>ã€‚å¯ä»¥é€šè¿‡<code>Page</code>çš„é‡è½½æ„é€ å‡½æ•°ï¼ŒæŒ‡å®š<code>isSearchCount</code>ä¸º<code>false</code>å³å¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Page</span><span class="params">(<span class="keyword">long</span> current, <span class="keyword">long</span> size, <span class="keyword">boolean</span> isSearchCount)</span></span></span><br></pre></td></tr></table></figure><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯èƒ½é‡åˆ°<strong>å¤šè¡¨è”æŸ¥</strong>çš„åœºæ™¯ï¼Œæ­¤æ—¶<code>BaseMapper</code>ä¸­æä¾›çš„å•è¡¨åˆ†é¡µæŸ¥è¯¢çš„æ–¹æ³•æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œéœ€è¦<strong>è‡ªå®šä¹‰SQL</strong>ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼ˆä½¿ç”¨å•è¡¨æŸ¥è¯¢çš„SQLè¿›è¡Œæ¼”ç¤ºï¼Œå®é™…è¿›è¡Œå¤šè¡¨è”æŸ¥æ—¶ï¼Œä¿®æ”¹SQLè¯­å¥å³å¯ï¼‰</p><ol><li>åœ¨mapperæ¥å£ä¸­å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªPageå¯¹è±¡ä¸ºå‚æ•°ï¼Œå¹¶ç¼–å†™è‡ªå®šä¹‰SQL</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™é‡Œé‡‡ç”¨çº¯æ³¨è§£æ–¹å¼ã€‚å½“ç„¶ï¼Œè‹¥SQLæ¯”è¾ƒå¤æ‚ï¼Œå»ºè®®è¿˜æ˜¯é‡‡ç”¨XMLçš„æ–¹å¼</span></span><br><span class="line"><span class="meta">@Select(&quot;SELECT * FROM user $&#123;ew.customSqlSegment&#125;&quot;)</span></span><br><span class="line"><span class="function">Page&lt;User&gt; <span class="title">selectUserPage</span><span class="params">(Page&lt;User&gt; page, <span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;User&gt; wrapper)</span></span>;</span><br></pre></td></tr></table></figure><ol start="2"><li>æ‰§è¡ŒæŸ¥è¯¢</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testPage2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  LambdaQueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> LambdaQueryWrapper&lt;&gt;();</span><br><span class="line">  wrapper.ge(User::getAge, <span class="number">28</span>).likeRight(User::getName, <span class="string">&quot;ç‹&quot;</span>);</span><br><span class="line">  Page&lt;User&gt; page = <span class="keyword">new</span> Page&lt;&gt;(<span class="number">3</span>,<span class="number">2</span>);</span><br><span class="line">  Page&lt;User&gt; userPage = userMapper.selectUserPage(page, wrapper);</span><br><span class="line">  System.out.println(<span class="string">&quot;æ€»è®°å½•æ•° = &quot;</span> + userPage.getTotal());</span><br><span class="line">  System.out.println(<span class="string">&quot;æ€»é¡µæ•° = &quot;</span> + userPage.getPages());</span><br><span class="line"> userPage.getRecords().forEach(System.out::println);</span><br><span class="line">         &#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>ç»“æœ</li></ol><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/649.jpg" alt="649"></p><h3 id="ARæ¨¡å¼"><a href="#ARæ¨¡å¼" class="headerlink" title="ARæ¨¡å¼"></a>ARæ¨¡å¼</h3><p>ActiveRecordæ¨¡å¼ï¼Œé€šè¿‡æ“ä½œå®ä½“å¯¹è±¡ï¼Œç›´æ¥æ“ä½œæ•°æ®åº“è¡¨ã€‚ä¸ORMæœ‰ç‚¹ç±»ä¼¼ã€‚</p><p>ç¤ºä¾‹å¦‚ä¸‹</p><ol><li>è®©å®ä½“ç±»<code>User</code>ç»§æ‰¿è‡ª<code>Model</code></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mp.po;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">import</span> com.baomidou.mybatisplus.annotation.SqlCondition;</span><br><span class="line">   <span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class="line">   <span class="keyword">import</span> com.baomidou.mybatisplus.extension.activerecord.Model;</span><br><span class="line">   <span class="keyword">import</span> lombok.Data;</span><br><span class="line">   <span class="keyword">import</span> lombok.EqualsAndHashCode;</span><br><span class="line">   <span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line">   </span><br><span class="line">   <span class="meta">@EqualsAndHashCode(callSuper = false)</span></span><br><span class="line">   <span class="meta">@Data</span></span><br><span class="line">   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Model</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="meta">@TableField(condition = SqlCondition.LIKE)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@TableField(condition = &quot;%s &amp;gt; #&#123;%s&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> Long managerId;</span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><ol><li>ç›´æ¥è°ƒç”¨å®ä½“å¯¹è±¡ä¸Šçš„æ–¹æ³•</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertAr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     User user = <span class="keyword">new</span> User();</span><br><span class="line">     user.setId(<span class="number">15L</span>);</span><br><span class="line">     user.setName(<span class="string">&quot;æˆ‘æ˜¯ARçŒª&quot;</span>);</span><br><span class="line">     user.setAge(<span class="number">1</span>);</span><br><span class="line">     user.setEmail(<span class="string">&quot;ar@baomidou.com&quot;</span>);</span><br><span class="line">     user.setManagerId(<span class="number">1L</span>);</span><br><span class="line">     <span class="keyword">boolean</span> success = user.insert(); <span class="comment">// æ’å…¥</span></span><br><span class="line">     System.out.println(success);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>ç»“æœ</li></ol><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/650.jpg" alt="650"></p><p>å…¶ä»–ç¤ºä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŸ¥è¯¢</span></span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">selectAr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setId(<span class="number">15L</span>);</span><br><span class="line">  User result = user.selectById();</span><br><span class="line">  System.out.println(result);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">// æ›´æ–°</span></span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateAr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">  user.setId(<span class="number">15L</span>);</span><br><span class="line">  user.setName(<span class="string">&quot;ç‹å…¨è›‹&quot;</span>);</span><br><span class="line">  user.updateById();</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">//åˆ é™¤</span></span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteAr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  User user = <span class="keyword">new</span> User();</span><br><span class="line">  user.setId(<span class="number">15L</span>);</span><br><span class="line">  user.deleteById();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸»é”®ç­–ç•¥"><a href="#ä¸»é”®ç­–ç•¥" class="headerlink" title="ä¸»é”®ç­–ç•¥"></a>ä¸»é”®ç­–ç•¥</h3><p>åœ¨å®šä¹‰å®ä½“ç±»æ—¶ï¼Œç”¨<code>@TableId</code>æŒ‡å®šä¸»é”®ï¼Œè€Œå…¶<code>type</code>å±æ€§ï¼Œå¯ä»¥æŒ‡å®šä¸»é”®ç­–ç•¥ã€‚</p><p>mpæ”¯æŒå¤šç§ä¸»é”®ç­–ç•¥ï¼Œé»˜è®¤çš„ç­–ç•¥æ˜¯åŸºäºé›ªèŠ±ç®—æ³•çš„è‡ªå¢idã€‚å…¨éƒ¨ä¸»é”®ç­–ç•¥å®šä¹‰åœ¨äº†æšä¸¾ç±»<code>IdType</code>ä¸­ï¼Œ<code>IdType</code>æœ‰å¦‚ä¸‹çš„å–å€¼</p><ul><li><p><code>AUTO</code></p><p>æ•°æ®åº“IDè‡ªå¢ï¼Œ<strong>ä¾èµ–äºæ•°æ®åº“</strong>ã€‚åœ¨æ’å…¥æ“ä½œç”ŸæˆSQLè¯­å¥æ—¶ï¼Œä¸ä¼šæ’å…¥ä¸»é”®è¿™ä¸€åˆ—</p></li><li><p><code>NONE</code></p><p>æœªè®¾ç½®ä¸»é”®ç±»å‹ã€‚è‹¥åœ¨ä»£ç ä¸­æ²¡æœ‰æ‰‹åŠ¨è®¾ç½®ä¸»é”®ï¼Œåˆ™ä¼šæ ¹æ®<strong>ä¸»é”®çš„å…¨å±€ç­–ç•¥</strong>è‡ªåŠ¨ç”Ÿæˆï¼ˆé»˜è®¤çš„ä¸»é”®å…¨å±€ç­–ç•¥æ˜¯åŸºäºé›ªèŠ±ç®—æ³•çš„è‡ªå¢IDï¼‰</p></li><li><p><code>INPUT</code></p><p>éœ€è¦æ‰‹åŠ¨è®¾ç½®ä¸»é”®ï¼Œè‹¥ä¸è®¾ç½®ã€‚æ’å…¥æ“ä½œç”ŸæˆSQLè¯­å¥æ—¶ï¼Œä¸»é”®è¿™ä¸€åˆ—çš„å€¼ä¼šæ˜¯<code>null</code>ã€‚oracleçš„åºåˆ—ä¸»é”®éœ€è¦ä½¿ç”¨è¿™ç§æ–¹å¼</p></li><li><p><code>ASSIGN_ID</code></p><p>å½“æ²¡æœ‰æ‰‹åŠ¨è®¾ç½®ä¸»é”®ï¼Œå³å®ä½“ç±»ä¸­çš„ä¸»é”®å±æ€§ä¸ºç©ºæ—¶ï¼Œæ‰ä¼šè‡ªåŠ¨å¡«å……ï¼Œä½¿ç”¨é›ªèŠ±ç®—æ³•</p></li><li><p><code>ASSIGN_UUID</code></p><p>å½“å®ä½“ç±»çš„ä¸»é”®å±æ€§ä¸ºç©ºæ—¶ï¼Œæ‰ä¼šè‡ªåŠ¨å¡«å……ï¼Œä½¿ç”¨UUID</p></li><li><p>â€¦.ï¼ˆè¿˜æœ‰å‡ ç§æ˜¯å·²è¿‡æ—¶çš„ï¼Œå°±ä¸å†åˆ—ä¸¾ï¼‰</p></li></ul><p>å¯ä»¥é’ˆå¯¹æ¯ä¸ªå®ä½“ç±»ï¼Œä½¿ç”¨<code>@TableId</code>æ³¨è§£æŒ‡å®šè¯¥å®ä½“ç±»çš„ä¸»é”®ç­–ç•¥ï¼Œè¿™å¯ä»¥ç†è§£ä¸º<strong>å±€éƒ¨ç­–ç•¥</strong>ã€‚è‹¥å¸Œæœ›å¯¹æ‰€æœ‰çš„å®ä½“ç±»ï¼Œéƒ½é‡‡ç”¨åŒä¸€ç§ä¸»é”®ç­–ç•¥ï¼ŒæŒ¨ä¸ªåœ¨æ¯ä¸ªå®ä½“ç±»ä¸Šè¿›è¡Œé…ç½®ï¼Œåˆ™å¤ªéº»çƒ¦äº†ï¼Œæ­¤æ—¶å¯ä»¥ç”¨ä¸»é”®çš„<strong>å…¨å±€ç­–ç•¥</strong>ã€‚åªéœ€è¦åœ¨<code>application.yml</code>è¿›è¡Œé…ç½®å³å¯ã€‚æ¯”å¦‚ï¼Œé…ç½®äº†å…¨å±€é‡‡ç”¨è‡ªå¢ä¸»é”®ç­–ç•¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># application.yml</span><br><span class="line">mybatis-plus:</span><br><span class="line">  global-config:</span><br><span class="line">    db-config:</span><br><span class="line">      id-type: auto</span><br></pre></td></tr></table></figure><p>ä¸‹é¢å¯¹ä¸åŒä¸»é”®ç­–ç•¥çš„è¡Œä¸ºè¿›è¡Œæ¼”ç¤º</p><ul><li><p><code>AUTO</code></p><p>åœ¨<code>User</code>ä¸Šå¯¹<code>id</code>å±æ€§åŠ ä¸Šæ³¨è§£ï¼Œç„¶åå°†MYSQLçš„<code>user</code>è¡¨ä¿®æ”¹å…¶ä¸»é”®ä¸ºè‡ªå¢ã€‚</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EqualsAndHashCode(callSuper = false)</span></span><br><span class="line">  <span class="meta">@Data</span></span><br><span class="line">  <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Model</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line">   <span class="meta">@TableId(type = IdType.AUTO)</span></span><br><span class="line">   <span class="keyword">private</span> Long id;</span><br><span class="line">   <span class="meta">@TableField(condition = SqlCondition.LIKE)</span></span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">   <span class="meta">@TableField(condition = &quot;%s &amp;gt; #&#123;%s&#125;&quot;)</span></span><br><span class="line">   <span class="keyword">private</span> Integer age;</span><br><span class="line">   <span class="keyword">private</span> String email;</span><br><span class="line">   <span class="keyword">private</span> Long managerId;</span><br><span class="line">   <span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAuto</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setName(<span class="string">&quot;æˆ‘æ˜¯é’è›™å‘±å‘±&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">99</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;frog@baomidou.com&quot;</span>);</span><br><span class="line">    user.setCreateTime(LocalDateTime.now());</span><br><span class="line">    userMapper.insert(user);</span><br><span class="line">          System.out.println(user.getId());</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>ç»“æœ</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/651.jpg" alt="651"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œä»£ç ä¸­æ²¡æœ‰è®¾ç½®ä¸»é”®IDï¼Œå‘å‡ºçš„SQLè¯­å¥ä¸­ä¹Ÿæ²¡æœ‰è®¾ç½®ä¸»é”®IDï¼Œå¹¶ä¸”æ’å…¥ç»“æŸåï¼Œä¸»é”®IDä¼šè¢«å†™å›åˆ°å®ä½“å¯¹è±¡ã€‚</p><ul><li><p><code>NONE</code></p><p>åœ¨MYSQLçš„<code>user</code>è¡¨ä¸­ï¼Œå»æ‰ä¸»é”®è‡ªå¢ã€‚ç„¶åä¿®æ”¹<code>User</code>ç±»ï¼ˆè‹¥ä¸é…ç½®<code>@TableId</code>æ³¨è§£ï¼Œé»˜è®¤ä¸»é”®ç­–ç•¥ä¹Ÿæ˜¯<code>NONE</code>ï¼‰</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableId(type = IdType.NONE)</span></span><br><span class="line">  <span class="keyword">private</span> Long id;</span><br></pre></td></tr></table></figure><p>æ’å…¥æ—¶ï¼Œè‹¥å®ä½“ç±»çš„ä¸»é”®IDæœ‰å€¼ï¼Œåˆ™ä½¿ç”¨ä¹‹ï¼›è‹¥ä¸»é”®IDä¸ºç©ºï¼Œåˆ™ä½¿ç”¨ä¸»é”®å…¨å±€ç­–ç•¥ï¼Œæ¥ç”Ÿæˆä¸€ä¸ªIDã€‚</p><ul><li>å…¶ä½™çš„ç­–ç•¥ç±»ä¼¼ï¼Œä¸èµ˜è¿°</li></ul><p><strong>å°ç»“</strong></p><p><code>AUTO</code>ä¾èµ–äºæ•°æ®åº“çš„è‡ªå¢ä¸»é”®ï¼Œæ’å…¥æ—¶ï¼Œå®ä½“å¯¹è±¡æ— éœ€è®¾ç½®ä¸»é”®ï¼Œæ’å…¥æˆåŠŸåï¼Œä¸»é”®ä¼šè¢«å†™å›å®ä½“å¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INPUT`å®Œå…¨ä¾èµ–äºç”¨æˆ·è¾“å…¥ã€‚å®ä½“å¯¹è±¡ä¸­ä¸»é”®IDæ˜¯ä»€ä¹ˆï¼Œæ’å…¥åˆ°æ•°æ®åº“æ—¶å°±è®¾ç½®ä»€ä¹ˆã€‚è‹¥æœ‰å€¼ä¾¿è®¾ç½®å€¼ï¼Œè‹¥ä¸º`<span class="keyword">null</span>`åˆ™è®¾ç½®`<span class="keyword">null</span></span><br></pre></td></tr></table></figure><p>å…¶ä½™çš„å‡ ä¸ªç­–ç•¥ï¼Œéƒ½æ˜¯åœ¨å®ä½“å¯¹è±¡ä¸­ä¸»é”®IDä¸ºç©ºæ—¶ï¼Œæ‰ä¼šè‡ªåŠ¨ç”Ÿæˆã€‚</p><p><code>NONE</code>ä¼šè·Ÿéšå…¨å±€ç­–ç•¥ï¼Œ<code>ASSIGN_ID</code>é‡‡ç”¨é›ªèŠ±ç®—æ³•ï¼Œ<code>ASSIGN_UUID</code>é‡‡ç”¨UUID</p><p>å…¨å±€é…ç½®ï¼Œåœ¨<code>application.yml</code>ä¸­è¿›è¡Œå³å¯ï¼›é’ˆå¯¹å•ä¸ªå®ä½“ç±»çš„å±€éƒ¨é…ç½®ï¼Œä½¿ç”¨<code>@TableId</code>å³å¯ã€‚å¯¹äºæŸä¸ªå®ä½“ç±»ï¼Œè‹¥å®ƒæœ‰å±€éƒ¨ä¸»é”®ç­–ç•¥ï¼Œåˆ™é‡‡ç”¨ä¹‹ï¼Œå¦åˆ™ï¼Œè·Ÿéšå…¨å±€ç­–ç•¥ã€‚</p><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>mybatis plusæœ‰è®¸å¤šå¯é…ç½®é¡¹ï¼Œå¯åœ¨<code>application.yml</code>ä¸­è¿›è¡Œé…ç½®ï¼Œå¦‚ä¸Šé¢çš„å…¨å±€ä¸»é”®ç­–ç•¥ã€‚ä¸‹é¢åˆ—ä¸¾éƒ¨åˆ†é…ç½®é¡¹</p><h4 id="åŸºæœ¬é…ç½®"><a href="#åŸºæœ¬é…ç½®" class="headerlink" title="åŸºæœ¬é…ç½®"></a>åŸºæœ¬é…ç½®</h4><ul><li><code>configLocation</code>ï¼šè‹¥æœ‰å•ç‹¬çš„mybatisé…ç½®ï¼Œç”¨è¿™ä¸ªæ³¨è§£æŒ‡å®šmybatisçš„é…ç½®æ–‡ä»¶ï¼ˆmybatisçš„å…¨å±€é…ç½®æ–‡ä»¶ï¼‰</li><li><code>mapperLocations</code>ï¼šmybatis mapperæ‰€å¯¹åº”çš„xmlæ–‡ä»¶çš„ä½ç½®</li><li><code>typeAliasesPackage</code>ï¼šmybatisçš„åˆ«ååŒ…æ‰«æè·¯å¾„</li><li>â€¦..</li></ul><h4 id="è¿›é˜¶é…ç½®"><a href="#è¿›é˜¶é…ç½®" class="headerlink" title="è¿›é˜¶é…ç½®"></a>è¿›é˜¶é…ç½®</h4><ul><li><p><code>mapUnderscoreToCamelCase</code>ï¼šæ˜¯å¦å¼€å¯è‡ªåŠ¨é©¼å³°å‘½åè§„åˆ™æ˜ å°„ã€‚ï¼ˆé»˜è®¤å¼€å¯ï¼‰</p></li><li><p><code>dbTpe</code>ï¼šæ•°æ®åº“ç±»å‹ã€‚ä¸€èˆ¬ä¸ç”¨é…ï¼Œä¼šæ ¹æ®æ•°æ®åº“è¿æ¥urlè‡ªåŠ¨è¯†åˆ«</p></li><li><p><code>fieldStrategy</code>ï¼šï¼ˆå·²è¿‡æ—¶ï¼‰å­—æ®µéªŒè¯ç­–ç•¥ã€‚<strong>è¯¥é…ç½®é¡¹åœ¨æœ€æ–°ç‰ˆçš„mpæ–‡æ¡£ä¸­å·²ç»æ‰¾ä¸åˆ°äº†</strong>ï¼Œè¢«ç»†åˆ†æˆäº†<code>insertStrategy</code>ï¼Œ<code>updateStrategy</code>ï¼Œ<code>selectStrategy</code>ã€‚é»˜è®¤å€¼æ˜¯<code>NOT_NULL</code>ï¼Œå³å¯¹äºå®ä½“å¯¹è±¡ä¸­éç©ºçš„å­—æ®µï¼Œæ‰ä¼šç»„è£…åˆ°æœ€ç»ˆçš„SQLè¯­å¥ä¸­ã€‚</p><p>æœ‰å¦‚ä¸‹å‡ ç§å¯é€‰é…ç½®</p><p>è¿™ä¸ªé…ç½®é¡¹ï¼Œå¯åœ¨<code>application.yml</code>ä¸­è¿›è¡Œ<strong>å…¨å±€é…ç½®</strong>ï¼Œä¹Ÿå¯ä»¥åœ¨æŸä¸€å®ä½“ç±»ä¸­ï¼Œå¯¹æŸä¸€å­—æ®µç”¨<code>@TableField</code>æ³¨è§£è¿›è¡Œ<strong>å±€éƒ¨é…ç½®</strong></p><p>è¿™ä¸ªå­—æ®µéªŒè¯ç­–ç•¥æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿåœ¨UPDATEæ“ä½œä¸­èƒ½å¤Ÿä½“ç°å‡ºæ¥ï¼Œè‹¥ç”¨ä¸€ä¸ª<code>User</code>å¯¹è±¡æ‰§è¡ŒUPDATEæ“ä½œï¼Œæˆ‘ä»¬å¸Œæœ›åªå¯¹<code>User</code>å¯¹è±¡ä¸­éç©ºçš„å±æ€§ï¼Œæ›´æ–°åˆ°æ•°æ®åº“ä¸­ï¼Œå…¶ä»–å±æ€§ä¸åšæ›´æ–°ï¼Œåˆ™<code>NOT_NULL</code>å¯ä»¥æ»¡è¶³éœ€æ±‚ã€‚è€Œè‹¥<code>updateStrategy</code>é…ç½®ä¸º<code>IGNORED</code>ï¼Œåˆ™ä¸ä¼šè¿›è¡Œéç©ºåˆ¤æ–­ï¼Œä¼šå°†å®ä½“å¯¹è±¡ä¸­çš„å…¨éƒ¨å±æ€§å¦‚å®ç»„è£…åˆ°SQLä¸­ï¼Œè¿™æ ·ï¼Œæ‰§è¡ŒUPDATEæ—¶ï¼Œå¯èƒ½å°±å°†ä¸€äº›ä¸æƒ³æ›´æ–°çš„å­—æ®µï¼Œè®¾ç½®ä¸ºäº†<code>NULL</code>ã€‚</p></li><li><ul><li><code>IGNORED</code>ï¼šå¿½ç•¥æ ¡éªŒã€‚å³ï¼Œä¸åšæ ¡éªŒã€‚å®ä½“å¯¹è±¡ä¸­çš„å…¨éƒ¨å­—æ®µï¼Œæ— è®ºå€¼æ˜¯ä»€ä¹ˆï¼Œéƒ½å¦‚å®åœ°è¢«ç»„è£…åˆ°SQLè¯­å¥ä¸­ï¼ˆä¸º<code>NULL</code>çš„å­—æ®µåœ¨SQLè¯­å¥ä¸­å°±ç»„è£…ä¸º<code>NULL</code>ï¼‰ã€‚</li><li><code>NOT_NULL</code>ï¼šé<code>NULL</code>æ ¡éªŒã€‚åªä¼šå°†é<code>NULL</code>çš„å­—æ®µç»„è£…åˆ°SQLè¯­å¥ä¸­</li><li><code>NOT_EMPTY</code>ï¼šéç©ºæ ¡éªŒã€‚å½“æœ‰å­—æ®µæ˜¯å­—ç¬¦ä¸²ç±»å‹æ—¶ï¼Œåªç»„è£…éç©ºå­—ç¬¦ä¸²ï¼›å¯¹å…¶ä»–ç±»å‹çš„å­—æ®µï¼Œç­‰åŒäº<code>NOT_NULL</code></li><li><code>NEVER</code>ï¼šä¸åŠ å…¥SQLã€‚æ‰€æœ‰å­—æ®µä¸åŠ å…¥åˆ°SQLè¯­å¥</li></ul></li><li><p><code>tablePrefix</code>ï¼šæ·»åŠ è¡¨åå‰ç¼€</p><p>æ¯”å¦‚</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mybatis-plus:</span><br><span class="line">    global-config:</span><br><span class="line">      db-config:</span><br><span class="line">        table-prefix: xx_</span><br></pre></td></tr></table></figure><p>ç„¶åå°†MYSQLä¸­çš„è¡¨åšä¸€ä¸‹ä¿®æ”¹ã€‚ä½†Javaå®ä½“ç±»ä¿æŒä¸å˜ï¼ˆä»ç„¶ä¸º<code>User</code>ï¼‰ã€‚</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/652.jpg" alt="652"></p><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    wrapper.like(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;é»„&quot;</span>);</span><br><span class="line">    Integer count = userMapper.selectCount(wrapper);</span><br><span class="line">    System.out.println(count);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æ‹¼æ¥å‡ºæ¥çš„SQLï¼Œåœ¨è¡¨åå‰é¢æ·»åŠ äº†å‰ç¼€</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/653.jpg" alt="653"></p><h3 id="ä»£ç ç”Ÿæˆå™¨"><a href="#ä»£ç ç”Ÿæˆå™¨" class="headerlink" title="ä»£ç ç”Ÿæˆå™¨"></a>ä»£ç ç”Ÿæˆå™¨</h3><p>mpæä¾›ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œå¯å¿«é€Ÿç”ŸæˆEntityå®ä½“ç±»ï¼ŒMapperæ¥å£ï¼ŒServiceï¼ŒControllerç­‰å…¨å¥—ä»£ç ã€‚</p><p>ç¤ºä¾‹å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GeneratorTest</span> </span>&#123;</span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">generate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  AutoGenerator generator = <span class="keyword">new</span> AutoGenerator();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…¨å±€é…ç½®</span></span><br><span class="line">  GlobalConfig config = <span class="keyword">new</span> GlobalConfig();</span><br><span class="line">  String projectPath = System.getProperty(<span class="string">&quot;user.dir&quot;</span>);</span><br><span class="line">  <span class="comment">// è®¾ç½®è¾“å‡ºåˆ°çš„ç›®å½•</span></span><br><span class="line">  config.setOutputDir(projectPath + <span class="string">&quot;/src/main/java&quot;</span>);</span><br><span class="line">  config.setAuthor(<span class="string">&quot;yogurt&quot;</span>);</span><br><span class="line">  <span class="comment">// ç”Ÿæˆç»“æŸåæ˜¯å¦æ‰“å¼€æ–‡ä»¶å¤¹</span></span><br><span class="line">  config.setOpen(<span class="keyword">false</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…¨å±€é…ç½®æ·»åŠ åˆ° generator ä¸Š</span></span><br><span class="line">  generator.setGlobalConfig(config);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ•°æ®æºé…ç½®</span></span><br><span class="line">  DataSourceConfig dataSourceConfig = <span class="keyword">new</span> DataSourceConfig();</span><br><span class="line">  dataSourceConfig.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/yogurt?serverTimezone=Asia/Shanghai&quot;</span>);</span><br><span class="line">  dataSourceConfig.setDriverName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">  dataSourceConfig.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">  dataSourceConfig.setPassword(<span class="string">&quot;root&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ•°æ®æºé…ç½®æ·»åŠ åˆ° generator</span></span><br><span class="line">  generator.setDataSource(dataSourceConfig);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åŒ…é…ç½®, ç”Ÿæˆçš„ä»£ç æ”¾åœ¨å“ªä¸ªåŒ…ä¸‹</span></span><br><span class="line">  PackageConfig packageConfig = <span class="keyword">new</span> PackageConfig();</span><br><span class="line">  packageConfig.setParent(<span class="string">&quot;com.example.mp.generator&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åŒ…é…ç½®æ·»åŠ åˆ° generator</span></span><br><span class="line">  generator.setPackageInfo(packageConfig);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç­–ç•¥é…ç½®</span></span><br><span class="line">  StrategyConfig strategyConfig = <span class="keyword">new</span> StrategyConfig();</span><br><span class="line">  <span class="comment">// ä¸‹åˆ’çº¿é©¼å³°å‘½åè½¬æ¢</span></span><br><span class="line">  strategyConfig.setNaming(NamingStrategy.underline_to_camel);</span><br><span class="line">  strategyConfig.setColumnNaming(NamingStrategy.underline_to_camel);</span><br><span class="line">  <span class="comment">// å¼€å¯lombok</span></span><br><span class="line">  strategyConfig.setEntityLombokModel(<span class="keyword">true</span>);</span><br><span class="line">  <span class="comment">// å¼€å¯RestController</span></span><br><span class="line">  strategyConfig.setRestControllerStyle(<span class="keyword">true</span>);</span><br><span class="line">  generator.setStrategy(strategyConfig);</span><br><span class="line">  generator.setTemplateEngine(<span class="keyword">new</span> FreemarkerTemplateEngine());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¼€å§‹ç”Ÿæˆ</span></span><br><span class="line">  generator.execute();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œåï¼Œå¯ä»¥çœ‹åˆ°ç”Ÿæˆäº†å¦‚ä¸‹å›¾æ‰€ç¤ºçš„å…¨å¥—ä»£ç </p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/654.jpg" alt="654"></p><h2 id="é«˜çº§åŠŸèƒ½"><a href="#é«˜çº§åŠŸèƒ½" class="headerlink" title="é«˜çº§åŠŸèƒ½"></a>é«˜çº§åŠŸèƒ½</h2><p>é«˜çº§åŠŸèƒ½çš„æ¼”ç¤ºéœ€è¦ç”¨åˆ°ä¸€å¼ æ–°çš„è¡¨<code>user2</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS user2;</span><br><span class="line"><span class="function">CREATE TABLE <span class="title">user2</span> <span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">id BIGINT(<span class="number">20</span>)</span> PRIMARY KEY NOT NULL COMMENT &#x27;ä¸»é”®id&#x27;,</span></span><br><span class="line"><span class="function">name <span class="title">VARCHAR</span><span class="params">(<span class="number">30</span>)</span> DEFAULT NULL COMMENT &#x27;å§“å&#x27;,</span></span><br><span class="line"><span class="function">age <span class="title">INT</span><span class="params">(<span class="number">11</span>)</span> DEFAULT NULL COMMENT &#x27;å¹´é¾„&#x27;,</span></span><br><span class="line"><span class="function">email <span class="title">VARCHAR</span><span class="params">(<span class="number">50</span>)</span> DEFAULT NULL COMMENT &#x27;é‚®ç®±&#x27;,</span></span><br><span class="line"><span class="function">manager_id <span class="title">BIGINT</span><span class="params">(<span class="number">20</span>)</span> DEFAULT NULL COMMENT &#x27;ç›´å±ä¸Šçº§id&#x27;,</span></span><br><span class="line"><span class="function">create_time DATETIME DEFAULT NULL COMMENT &#x27;åˆ›å»ºæ—¶é—´&#x27;,</span></span><br><span class="line"><span class="function">update_time DATETIME DEFAULT NULL COMMENT &#x27;ä¿®æ”¹æ—¶é—´&#x27;,</span></span><br><span class="line"><span class="function">version <span class="title">INT</span><span class="params">(<span class="number">11</span>)</span> DEFAULT &#x27;1&#x27; COMMENT &#x27;ç‰ˆæœ¬&#x27;,</span></span><br><span class="line"><span class="function">deleted <span class="title">INT</span><span class="params">(<span class="number">1</span>)</span> DEFAULT &#x27;0&#x27; COMMENT &#x27;é€»è¾‘åˆ é™¤æ ‡è¯†,0-æœªåˆ é™¤,1-å·²åˆ é™¤&#x27;,</span></span><br><span class="line"><span class="function">CONSTRAINT manager_fk FOREIGN <span class="title">KEY</span><span class="params">(manager_id)</span> REFERENCES <span class="title">user2</span><span class="params">(id)</span></span></span><br><span class="line"><span class="function">) ENGINE </span>= INNODB CHARSET=UTF8;</span><br><span class="line"></span><br><span class="line"><span class="function">INSERT INTO <span class="title">user2</span><span class="params">(id, name, age, email, manager_id, create_time)</span></span></span><br><span class="line"><span class="function"><span class="title">VALUES</span></span></span><br><span class="line"><span class="function"><span class="params">(<span class="number">1</span>, <span class="string">&#x27;è€æ¿&#x27;</span>, <span class="number">40</span> ,<span class="string">&#x27;boss@baomidou.com&#x27;</span> ,NULL, <span class="string">&#x27;2021-03-28 13:12:40&#x27;</span>)</span>,</span></span><br><span class="line"><span class="function"><span class="params">(<span class="number">2</span>, <span class="string">&#x27;ç‹ç‹—è›‹&#x27;</span>, <span class="number">40</span> ,<span class="string">&#x27;gd@baomidou.com&#x27;</span> ,<span class="number">1</span>, <span class="string">&#x27;2021-03-28 13:12:40&#x27;</span>)</span>,</span></span><br><span class="line"><span class="function"><span class="params">(<span class="number">3</span>, <span class="string">&#x27;ç‹é¸¡è›‹&#x27;</span>, <span class="number">40</span> ,<span class="string">&#x27;jd@baomidou.com&#x27;</span> ,<span class="number">2</span>, <span class="string">&#x27;2021-03-28 13:12:40&#x27;</span>)</span>,</span></span><br><span class="line"><span class="function"><span class="params">(<span class="number">4</span>, <span class="string">&#x27;ç‹é¸­è›‹&#x27;</span>, <span class="number">40</span> ,<span class="string">&#x27;yd@baomidou.com&#x27;</span> ,<span class="number">2</span>, <span class="string">&#x27;2021-03-28 13:12:40&#x27;</span>)</span>,</span></span><br><span class="line"><span class="function"><span class="params">(<span class="number">5</span>, <span class="string">&#x27;ç‹çŒªè›‹&#x27;</span>, <span class="number">40</span> ,<span class="string">&#x27;zd@baomidou.com&#x27;</span> ,<span class="number">2</span>, <span class="string">&#x27;2021-03-28 13:12:40&#x27;</span>)</span>,</span></span><br><span class="line"><span class="function"><span class="params">(<span class="number">6</span>, <span class="string">&#x27;ç‹è½¯è›‹&#x27;</span>, <span class="number">40</span> ,<span class="string">&#x27;rd@baomidou.com&#x27;</span> ,<span class="number">2</span>, <span class="string">&#x27;2021-03-28 13:12:40&#x27;</span>)</span>,</span></span><br><span class="line"><span class="function"><span class="params">(<span class="number">7</span>, <span class="string">&#x27;ç‹é“è›‹&#x27;</span>, <span class="number">40</span> ,<span class="string">&#x27;td@baomidou.com&#x27;</span> ,<span class="number">2</span>, <span class="string">&#x27;2021-03-28 13:12:40&#x27;</span>)</span></span></span><br></pre></td></tr></table></figure><p>å¹¶åˆ›å»ºå¯¹åº”çš„å®ä½“ç±»<code>User2</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mp.po;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User2</span> </span>&#123;</span><br><span class="line"> <span class="keyword">private</span> Long id;</span><br><span class="line"> <span class="keyword">private</span> String name;</span><br><span class="line"> <span class="keyword">private</span> Integer age;</span><br><span class="line"> <span class="keyword">private</span> String email;</span><br><span class="line"> <span class="keyword">private</span> Long managerId;</span><br><span class="line"> <span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line"> <span class="keyword">private</span> LocalDateTime updateTime;</span><br><span class="line"> <span class="keyword">private</span> Integer version;</span><br><span class="line"> <span class="keyword">private</span> Integer deleted;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥åŠMapperæ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mp.mappers;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.example.mp.po.User2;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">User2Mapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User2</span>&gt; </span>&#123; &#125;</span><br></pre></td></tr></table></figure><h3 id="é€»è¾‘åˆ é™¤"><a href="#é€»è¾‘åˆ é™¤" class="headerlink" title="é€»è¾‘åˆ é™¤"></a>é€»è¾‘åˆ é™¤</h3><p>é¦–å…ˆï¼Œä¸ºä»€ä¹ˆè¦æœ‰é€»è¾‘åˆ é™¤å‘¢ï¼Ÿç›´æ¥åˆ æ‰ä¸è¡Œå—ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œä½†æ—¥åè‹¥æƒ³è¦æ¢å¤ï¼Œæˆ–è€…éœ€è¦æŸ¥çœ‹è¿™äº›æ•°æ®ï¼Œå°±åšä¸åˆ°äº†ã€‚<strong>é€»è¾‘åˆ é™¤æ˜¯ä¸ºäº†æ–¹ä¾¿æ•°æ®æ¢å¤ï¼Œå’Œä¿æŠ¤æ•°æ®æœ¬èº«ä»·å€¼çš„ä¸€ç§æ–¹æ¡ˆ</strong>ã€‚</p><p>æ—¥å¸¸ä¸­ï¼Œæˆ‘ä»¬åœ¨ç”µè„‘ä¸­åˆ é™¤ä¸€ä¸ªæ–‡ä»¶åï¼Œä¹Ÿä»…ä»…æ˜¯æŠŠè¯¥æ–‡ä»¶æ”¾å…¥äº†å›æ”¶ç«™ï¼Œæ—¥åè‹¥æœ‰éœ€è¦è¿˜èƒ½è¿›è¡ŒæŸ¥çœ‹æˆ–æ¢å¤ã€‚å½“æˆ‘ä»¬ç¡®å®šä¸å†éœ€è¦æŸä¸ªæ–‡ä»¶ï¼Œå¯ä»¥å°†å…¶ä»å›æ”¶ç«™ä¸­å½»åº•åˆ é™¤ã€‚è¿™ä¹Ÿæ˜¯ç±»ä¼¼çš„é“ç†ã€‚</p><p>mpæä¾›çš„é€»è¾‘åˆ é™¤å®ç°èµ·æ¥éå¸¸ç®€å•</p><p>åªéœ€è¦åœ¨<code>application.yml</code>ä¸­è¿›è¡Œé€»è¾‘åˆ é™¤çš„ç›¸å…³é…ç½®å³å¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mybatis-plus:</span><br><span class="line">  global-config:</span><br><span class="line">    db-config:</span><br><span class="line">      logic-delete-field: deleted # å…¨å±€é€»è¾‘åˆ é™¤çš„å®ä½“å­—æ®µå</span><br><span class="line">      logic-delete-value: <span class="number">1</span> # é€»è¾‘å·²åˆ é™¤å€¼(é»˜è®¤ä¸º<span class="number">1</span>)</span><br><span class="line">      logic-not-delete-value: <span class="number">0</span> # é€»è¾‘æœªåˆ é™¤å€¼(é»˜è®¤ä¸º<span class="number">0</span>)</span><br><span class="line">      # è‹¥é€»è¾‘å·²åˆ é™¤å’Œæœªåˆ é™¤çš„å€¼å’Œé»˜è®¤å€¼ä¸€æ ·ï¼Œåˆ™å¯ä»¥ä¸é…ç½®è¿™<span class="number">2</span>é¡¹</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mp;</span><br><span class="line"><span class="keyword">import</span> com.example.mp.mappers.User2Mapper;</span><br><span class="line"><span class="keyword">import</span> com.example.mp.po.User2;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogicDeleteTest</span> </span>&#123;</span><br><span class="line"> <span class="meta">@Autowired</span></span><br><span class="line"> <span class="keyword">private</span> User2Mapper mapper;</span><br><span class="line"> <span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testLogicDel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i = mapper.deleteById(<span class="number">6</span>);</span><br><span class="line">  System.out.println(<span class="string">&quot;rowAffected = &quot;</span> + i);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœ</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/655.jpg" alt="655"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå‘å‡ºçš„SQLä¸å†æ˜¯<code>DELETE</code>ï¼Œè€Œæ˜¯<code>UPDATE</code></p><p>æ­¤æ—¶æˆ‘ä»¬å†æ‰§è¡Œä¸€æ¬¡<code>SELECT</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelect</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> List&lt;User2&gt; users = mapper.selectList(<span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/656.jpg" alt="656"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå‘å‡ºçš„SQLè¯­å¥ï¼Œä¼šè‡ªåŠ¨åœ¨WHEREåé¢æ‹¼æ¥é€»è¾‘æœªåˆ é™¤çš„æ¡ä»¶ã€‚æŸ¥è¯¢å‡ºæ¥çš„ç»“æœä¸­ï¼Œæ²¡æœ‰äº†idä¸º6çš„ç‹è½¯è›‹ã€‚</p><p>è‹¥æƒ³è¦SELECTçš„åˆ—ï¼Œä¸åŒ…æ‹¬é€»è¾‘åˆ é™¤çš„é‚£ä¸€åˆ—ï¼Œåˆ™å¯ä»¥åœ¨å®ä½“ç±»ä¸­é€šè¿‡<code>@TableField</code>è¿›è¡Œé…ç½®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableField(select = false)</span></span><br><span class="line"><span class="keyword">private</span> Integer deleted;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ä¸‹å›¾çš„æ‰§è¡Œç»“æœä¸­ï¼ŒSELECTä¸­å·²ç»ä¸åŒ…å«deletedè¿™ä¸€åˆ—äº†</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/657.jpg" alt="657"></p><p>å‰é¢åœ¨<code>application.yml</code>ä¸­åšçš„é…ç½®ï¼Œæ˜¯å…¨å±€çš„ã€‚é€šå¸¸æ¥è¯´ï¼Œå¯¹äºå¤šä¸ªè¡¨ï¼Œæˆ‘ä»¬ä¹Ÿä¼šç»Ÿä¸€é€»è¾‘åˆ é™¤å­—æ®µçš„åç§°ï¼Œç»Ÿä¸€é€»è¾‘å·²åˆ é™¤å’Œæœªåˆ é™¤çš„å€¼ï¼Œæ‰€ä»¥å…¨å±€é…ç½®å³å¯ã€‚å½“ç„¶ï¼Œè‹¥è¦å¯¹æŸäº›è¡¨è¿›è¡Œå•ç‹¬é…ç½®ï¼Œåœ¨å®ä½“ç±»çš„å¯¹åº”å­—æ®µä¸Šä½¿ç”¨<code>@TableLogic</code>å³å¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableLogic(value = &quot;0&quot;, delval = &quot;1&quot;)</span></span><br><span class="line"><span class="keyword">private</span> Integer deleted;</span><br></pre></td></tr></table></figure><p><strong>å°ç»“</strong></p><p>å¼€å¯mpçš„é€»è¾‘åˆ é™¤åï¼Œä¼šå¯¹SQLäº§ç”Ÿå¦‚ä¸‹çš„å½±å“</p><ul><li>INSERTè¯­å¥ï¼šæ²¡æœ‰å½±å“</li><li>SELECTè¯­å¥ï¼šè¿½åŠ WHEREæ¡ä»¶ï¼Œè¿‡æ»¤æ‰å·²åˆ é™¤çš„æ•°æ®</li><li>UPDATEè¯­å¥ï¼šè¿½åŠ WHEREæ¡ä»¶ï¼Œé˜²æ­¢æ›´æ–°åˆ°å·²åˆ é™¤çš„æ•°æ®</li><li>DELETEè¯­å¥ï¼šè½¬å˜ä¸ºUPDATEè¯­å¥</li></ul><p>æ³¨æ„ï¼Œä¸Šè¿°çš„å½±å“ï¼Œåªé’ˆå¯¹mpè‡ªåŠ¨æ³¨å…¥çš„SQLç”Ÿæ•ˆã€‚å¦‚æœæ˜¯è‡ªå·±æ‰‹åŠ¨æ·»åŠ çš„è‡ªå®šä¹‰SQLï¼Œåˆ™ä¸ä¼šç”Ÿæ•ˆã€‚æ¯”å¦‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">User2Mapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User2</span>&gt; </span>&#123;</span><br><span class="line"> <span class="meta">@Select(&quot;select * from user2&quot;)</span></span><br><span class="line"> <span class="function">List&lt;User2&gt; <span class="title">selectRaw</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è°ƒç”¨è¿™ä¸ª<code>selectRaw</code>ï¼Œåˆ™mpçš„é€»è¾‘åˆ é™¤ä¸ä¼šç”Ÿæ•ˆã€‚</p><p>å¦ï¼Œé€»è¾‘åˆ é™¤å¯åœ¨<code>application.yml</code>ä¸­è¿›è¡Œå…¨å±€é…ç½®ï¼Œä¹Ÿå¯åœ¨å®ä½“ç±»ä¸­ç”¨<code>@TableLogic</code>è¿›è¡Œå±€éƒ¨é…ç½®ã€‚</p><h3 id="è‡ªåŠ¨å¡«å……"><a href="#è‡ªåŠ¨å¡«å……" class="headerlink" title="è‡ªåŠ¨å¡«å……"></a>è‡ªåŠ¨å¡«å……</h3><p>è¡¨ä¸­å¸¸å¸¸ä¼šæœ‰â€œæ–°å¢æ—¶é—´â€ï¼Œâ€œä¿®æ”¹æ—¶é—´â€ï¼Œâ€œæ“ä½œäººâ€ ç­‰å­—æ®µã€‚æ¯”è¾ƒåŸå§‹çš„æ–¹å¼ï¼Œæ˜¯æ¯æ¬¡æ’å…¥æˆ–æ›´æ–°æ—¶ï¼Œæ‰‹åŠ¨è¿›è¡Œè®¾ç½®ã€‚mpå¯ä»¥é€šè¿‡é…ç½®ï¼Œå¯¹æŸäº›å­—æ®µè¿›è¡Œè‡ªåŠ¨å¡«å……ï¼Œé£Ÿç”¨ç¤ºä¾‹å¦‚ä¸‹</p><ol><li>åœ¨å®ä½“ç±»ä¸­çš„æŸäº›å­—æ®µä¸Šï¼Œé€šè¿‡<code>@TableField</code>è®¾ç½®è‡ªåŠ¨å¡«å……</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User2</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> Long managerId;</span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT)</span> <span class="comment">// æ’å…¥æ—¶è‡ªåŠ¨å¡«å……</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.UPDATE)</span> <span class="comment">// æ›´æ–°æ—¶è‡ªåŠ¨å¡«å……</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime updateTime;</span><br><span class="line">    <span class="keyword">private</span> Integer version;</span><br><span class="line">    <span class="keyword">private</span> Integer deleted;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>å®ç°è‡ªåŠ¨å¡«å……å¤„ç†å™¨</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mp.component;</span><br><span class="line">   <span class="keyword">import</span> com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;</span><br><span class="line">   <span class="keyword">import</span> org.apache.ibatis.reflection.MetaObject;</span><br><span class="line">   <span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line">   <span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line">   </span><br><span class="line">   <span class="meta">@Component</span> <span class="comment">//éœ€è¦æ³¨å†Œåˆ°Springå®¹å™¨ä¸­</span></span><br><span class="line">   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title">MetaObjectHandler</span> </span>&#123;</span><br><span class="line">   </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">           <span class="comment">// æ’å…¥æ—¶è‡ªåŠ¨å¡«å……</span></span><br><span class="line">           <span class="comment">// æ³¨æ„ç¬¬äºŒä¸ªå‚æ•°è¦å¡«å†™å®ä½“ç±»ä¸­çš„å­—æ®µåç§°ï¼Œè€Œä¸æ˜¯è¡¨çš„åˆ—åç§°</span></span><br><span class="line">     strictFillStrategy(metaObject, <span class="string">&quot;createTime&quot;</span>, LocalDateTime::now);</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">           <span class="comment">// æ›´æ–°æ—¶è‡ªåŠ¨å¡«å……</span></span><br><span class="line">     strictFillStrategy(metaObject, <span class="string">&quot;updateTime&quot;</span>, LocalDateTime::now);</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  User2 user = <span class="keyword">new</span> User2();</span><br><span class="line">  user.setId(<span class="number">8L</span>);</span><br><span class="line">  user.setName(<span class="string">&quot;ç‹ä¸€è›‹&quot;</span>);</span><br><span class="line">  user.setAge(<span class="number">29</span>);</span><br><span class="line">  user.setEmail(<span class="string">&quot;yd@baomidou.com&quot;</span>);</span><br><span class="line">  user.setManagerId(<span class="number">2L</span>);</span><br><span class="line">  mapper.insert(user);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>æ ¹æ®ä¸‹å›¾ç»“æœï¼Œå¯ä»¥çœ‹åˆ°å¯¹createTimeè¿›è¡Œäº†è‡ªåŠ¨å¡«å……</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/658.jpg" alt="658"></p><p>æ³¨æ„ï¼Œè‡ªåŠ¨å¡«å……ä»…åœ¨è¯¥å­—æ®µä¸ºç©ºæ—¶ä¼šç”Ÿæ•ˆï¼Œè‹¥è¯¥å­—æ®µä¸ä¸ºç©ºï¼Œåˆ™ç›´æ¥ä½¿ç”¨å·²æœ‰çš„å€¼ã€‚å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  User2 user = <span class="keyword">new</span> User2();</span><br><span class="line">  user.setId(<span class="number">8L</span>);</span><br><span class="line">  user.setName(<span class="string">&quot;ç‹ä¸€è›‹&quot;</span>);</span><br><span class="line">  user.setAge(<span class="number">29</span>);</span><br><span class="line">  user.setEmail(<span class="string">&quot;yd@baomidou.com&quot;</span>);</span><br><span class="line">  user.setManagerId(<span class="number">2L</span>);</span><br><span class="line">  user.setCreateTime(LocalDateTime.of(<span class="number">2000</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">8</span>,<span class="number">0</span>,<span class="number">0</span>));</span><br><span class="line">  mapper.insert(user);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/659.jpg" alt="659"></p><p>æ›´æ–°æ—¶çš„è‡ªåŠ¨å¡«å……ï¼Œæµ‹è¯•å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  User2 user = <span class="keyword">new</span> User2();</span><br><span class="line">  user.setId(<span class="number">8L</span>);</span><br><span class="line">  user.setName(<span class="string">&quot;ç‹ä¸€è›‹&quot;</span>);</span><br><span class="line">  user.setAge(<span class="number">99</span>);</span><br><span class="line">  mapper.updateById(user);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/660.jpg" alt="660"></p><h3 id="ä¹è§‚é”æ’ä»¶"><a href="#ä¹è§‚é”æ’ä»¶" class="headerlink" title="ä¹è§‚é”æ’ä»¶"></a>ä¹è§‚é”æ’ä»¶</h3><p>å½“å‡ºç°å¹¶å‘æ“ä½œæ—¶ï¼Œéœ€è¦ç¡®ä¿å„ä¸ªç”¨æˆ·å¯¹æ•°æ®çš„æ“ä½œä¸äº§ç”Ÿå†²çªï¼Œæ­¤æ—¶éœ€è¦ä¸€ç§å¹¶å‘æ§åˆ¶æ‰‹æ®µã€‚æ‚²è§‚é”çš„æ–¹æ³•æ˜¯ï¼Œåœ¨å¯¹æ•°æ®åº“çš„ä¸€æ¡è®°å½•è¿›è¡Œä¿®æ”¹æ—¶ï¼Œå…ˆç›´æ¥åŠ é”ï¼ˆæ•°æ®åº“çš„é”æœºåˆ¶ï¼‰ï¼Œé”å®šè¿™æ¡æ•°æ®ï¼Œç„¶åå†è¿›è¡Œæ“ä½œï¼›è€Œä¹è§‚é”ï¼Œæ­£å¦‚å…¶åï¼Œå®ƒå…ˆå‡è®¾ä¸å­˜åœ¨å†²çªæƒ…å†µï¼Œè€Œåœ¨å®é™…è¿›è¡Œæ•°æ®æ“ä½œæ—¶ï¼Œå†æ£€æŸ¥æ˜¯å¦å†²çªã€‚ä¹è§‚é”çš„ä¸€ç§é€šå¸¸å®ç°æ˜¯<strong>ç‰ˆæœ¬å·</strong>ï¼Œåœ¨MySQLä¸­ä¹Ÿæœ‰åä¸ºMVCCçš„åŸºäºç‰ˆæœ¬å·çš„å¹¶å‘äº‹åŠ¡æ§åˆ¶ã€‚</p><p>åœ¨è¯»å¤šå†™å°‘çš„åœºæ™¯ä¸‹ï¼Œä¹è§‚é”æ¯”è¾ƒé€‚ç”¨ï¼Œèƒ½å¤Ÿå‡å°‘åŠ é”æ“ä½œå¯¼è‡´çš„æ€§èƒ½å¼€é”€ï¼Œæé«˜ç³»ç»Ÿååé‡ã€‚</p><p>åœ¨å†™å¤šè¯»å°‘çš„åœºæ™¯ä¸‹ï¼Œæ‚²è§‚é”æ¯”è¾ƒä½¿ç”¨ï¼Œå¦åˆ™ä¼šå› ä¸ºä¹è§‚é”ä¸æ–­å¤±è´¥é‡è¯•ï¼Œåè€Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚</p><p>ä¹è§‚é”çš„å®ç°å¦‚ä¸‹ï¼š</p><ol><li>å–å‡ºè®°å½•æ—¶ï¼Œè·å–å½“å‰version</li><li>æ›´æ–°æ—¶ï¼Œå¸¦ä¸Šè¿™ä¸ªversion</li><li>æ‰§è¡Œæ›´æ–°æ—¶ï¼Œ set version = newVersion where version = oldVersion</li><li>å¦‚æœoldVersionä¸æ•°æ®åº“ä¸­çš„versionä¸ä¸€è‡´ï¼Œå°±æ›´æ–°å¤±è´¥</li></ol><p>è¿™ç§æ€æƒ³å’ŒCASï¼ˆCompare And Swapï¼‰éå¸¸ç›¸ä¼¼ã€‚</p><p>ä¹è§‚é”çš„å®ç°æ­¥éª¤å¦‚ä¸‹</p><ol><li>é…ç½®ä¹è§‚é”æ’ä»¶</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mp.config;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.OptimisticLockerInnerInterceptor;</span><br><span class="line">   <span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line">   <span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line">   </span><br><span class="line">   <span class="meta">@Configuration</span></span><br><span class="line">   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisPlusConfig</span> </span>&#123;</span><br><span class="line">       <span class="comment">/** 3.4.0ä»¥åçš„mpç‰ˆæœ¬ï¼Œæ¨èç”¨å¦‚ä¸‹çš„é…ç½®æ–¹å¼ **/</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MybatisPlusInterceptor <span class="title">mybatisPlusInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     MybatisPlusInterceptor interceptor = <span class="keyword">new</span> MybatisPlusInterceptor();</span><br><span class="line">     interceptor.addInnerInterceptor(<span class="keyword">new</span> OptimisticLockerInnerInterceptor());</span><br><span class="line">     <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">       <span class="comment">/** æ—§ç‰ˆmpå¯ä»¥é‡‡ç”¨å¦‚ä¸‹æ–¹å¼ã€‚æ³¨æ„æ–°æ—§ç‰ˆæœ¬ä¸­ï¼Œæ–°ç‰ˆçš„ç±»ï¼Œåç§°å¸¦æœ‰Inner, æ—§ç‰ˆçš„ä¸å¸¦, ä¸è¦é…é”™äº† **/</span></span><br><span class="line">       <span class="comment">/*</span></span><br><span class="line"><span class="comment">       @Bean</span></span><br><span class="line"><span class="comment">    public OptimisticLockerInterceptor opLocker() &#123;</span></span><br><span class="line"><span class="comment">     return new OptimisticLockerInterceptor();</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨å®ä½“ç±»ä¸­è¡¨ç¤ºç‰ˆæœ¬çš„å­—æ®µä¸Šæ·»åŠ æ³¨è§£<code>@Version</code></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line">   <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User2</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> Long managerId;</span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line">    <span class="keyword">private</span> LocalDateTime updateTime;</span><br><span class="line">    <span class="meta">@Version</span></span><br><span class="line">    <span class="keyword">private</span> Integer version;</span><br><span class="line">    <span class="keyword">private</span> Integer deleted;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testOpLocker</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> version = <span class="number">1</span>; <span class="comment">// å‡è®¾è¿™ä¸ªversionæ˜¯å…ˆå‰æŸ¥è¯¢æ—¶è·å¾—çš„</span></span><br><span class="line">  User2 user = <span class="keyword">new</span> User2();</span><br><span class="line">  user.setId(<span class="number">8L</span>);</span><br><span class="line">  user.setEmail(<span class="string">&quot;version@baomidou.com&quot;</span>);</span><br><span class="line">  user.setVersion(version);</span><br><span class="line">  <span class="keyword">int</span> i = mapper.updateById(user);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¹‹å‰å…ˆçœ‹ä¸€ä¸‹æ•°æ®åº“çš„æƒ…å†µ</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/501.jpg" alt="501"></p><p>æ ¹æ®ä¸‹å›¾æ‰§è¡Œç»“æœï¼Œå¯ä»¥çœ‹åˆ°SQLè¯­å¥ä¸­æ·»åŠ äº†versionç›¸å…³çš„æ“ä½œ</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/682.jpg" alt="682"></p><p>å½“UPDATEè¿”å›äº†1ï¼Œè¡¨ç¤ºå½±å“è¡Œæ•°ä¸º1ï¼Œåˆ™æ›´æ–°æˆåŠŸã€‚åä¹‹ï¼Œç”±äºWHEREåé¢çš„versionä¸æ•°æ®åº“ä¸­çš„ä¸ä¸€è‡´ï¼ŒåŒ¹é…ä¸åˆ°ä»»ä½•è®°å½•ï¼Œåˆ™å½±å“è¡Œæ•°ä¸º0ï¼Œè¡¨ç¤ºæ›´æ–°å¤±è´¥ã€‚æ›´æ–°æˆåŠŸåï¼Œæ–°çš„versionä¼šè¢«å°è£…å›å®ä½“å¯¹è±¡ä¸­ã€‚</p><p>å®ä½“ç±»ä¸­versionå­—æ®µï¼Œç±»å‹åªæ”¯æŒintï¼Œlongï¼ŒDateï¼ŒTimestampï¼ŒLocalDateTime</p><p><strong>æ³¨æ„ï¼Œä¹è§‚é”æ’ä»¶ä»…æ”¯æŒ</strong><strong><code>updateById(id)</code>ä¸<code>update(entity, wrapper)</code>æ–¹æ³•</strong></p><p>æ³¨æ„ï¼šå¦‚æœä½¿ç”¨<code>wrapper</code>ï¼Œåˆ™<code>wrapper</code>ä¸èƒ½å¤ç”¨ï¼ç¤ºä¾‹å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testOpLocker</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  User2 user = <span class="keyword">new</span> User2();</span><br><span class="line">  user.setId(<span class="number">8L</span>);</span><br><span class="line">  user.setVersion(<span class="number">1</span>);</span><br><span class="line">  user.setAge(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç¬¬ä¸€æ¬¡ä½¿ç”¨</span></span><br><span class="line">  LambdaQueryWrapper&lt;User2&gt; wrapper = <span class="keyword">new</span> LambdaQueryWrapper&lt;&gt;();</span><br><span class="line">  wrapper.eq(User2::getName, <span class="string">&quot;ç‹ä¸€è›‹&quot;</span>);</span><br><span class="line">  mapper.update(user, wrapper);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç¬¬äºŒæ¬¡å¤ç”¨</span></span><br><span class="line">  user.setAge(<span class="number">3</span>);</span><br><span class="line">  mapper.update(user, wrapper);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/681.jpg" alt="681"></p><p>å¯ä»¥çœ‹åˆ°åœ¨ç¬¬äºŒæ¬¡å¤ç”¨<code>wrapper</code>æ—¶ï¼Œæ‹¼æ¥å‡ºçš„SQLä¸­ï¼Œåé¢WHEREè¯­å¥ä¸­å‡ºç°äº†2æ¬¡versionï¼Œæ˜¯æœ‰é—®é¢˜çš„ã€‚</p><h3 id="æ€§èƒ½åˆ†ææ’ä»¶"><a href="#æ€§èƒ½åˆ†ææ’ä»¶" class="headerlink" title="æ€§èƒ½åˆ†ææ’ä»¶"></a>æ€§èƒ½åˆ†ææ’ä»¶</h3><p>è¯¥æ’ä»¶ä¼šè¾“å‡ºSQLè¯­å¥çš„æ‰§è¡Œæ—¶é—´ï¼Œä»¥ä¾¿åšSQLè¯­å¥çš„æ€§èƒ½åˆ†æå’Œè°ƒä¼˜ã€‚</p><p>æ³¨ï¼š3.2.0ç‰ˆæœ¬ä¹‹åï¼Œmpè‡ªå¸¦çš„æ€§èƒ½åˆ†ææ’ä»¶è¢«å®˜æ–¹ç§»é™¤äº†ï¼Œè€Œæ¨èé£Ÿç”¨ç¬¬ä¸‰æ–¹æ€§èƒ½åˆ†ææ’ä»¶</p><p>é£Ÿç”¨æ­¥éª¤</p><ol><li>å¼•å…¥mavenä¾èµ–</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">       &lt;groupId&gt;p6spy&lt;/groupId&gt;</span><br><span class="line">       &lt;artifactId&gt;p6spy&lt;/artifactId&gt;</span><br><span class="line">       &lt;version&gt;<span class="number">3.9</span><span class="number">.1</span>&lt;/version&gt;</span><br><span class="line">   &lt;/dependency&gt;</span><br></pre></td></tr></table></figure><ol start="2"><li>ä¿®æ”¹<code>application.yml</code></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">     datasource:</span><br><span class="line">       driver-<span class="class"><span class="keyword">class</span>-<span class="title">name</span>: <span class="title">com</span>.<span class="title">p6spy</span>.<span class="title">engine</span>.<span class="title">spy</span>.<span class="title">P6SpyDriver</span> #æ¢æˆ<span class="title">p6spy</span>çš„é©±åŠ¨</span></span><br><span class="line"><span class="class">       <span class="title">url</span>: <span class="title">jdbc</span>:<span class="title">p6spy</span>:<span class="title">mysql</span>://<span class="title">localhost</span>:3306/<span class="title">yogurt</span>?<span class="title">serverTimezone</span></span>=Asia/Shanghai #urlä¿®æ”¹</span><br><span class="line">       username: root</span><br><span class="line">       password: root</span><br></pre></td></tr></table></figure><ol start="3"><li>åœ¨<code>src/main/resources</code>èµ„æºç›®å½•ä¸‹æ·»åŠ <code>spy.properties</code></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#spy.properties</span><br><span class="line">   #<span class="number">3.2</span><span class="number">.1</span>ä»¥ä¸Šä½¿ç”¨</span><br><span class="line">   modulelist=com.baomidou.mybatisplus.extension.p6spy.MybatisPlusLogFactory,com.p6spy.engine.outage.P6OutageFactory</span><br><span class="line">   # çœŸå®JDBC driver , å¤šä¸ªä»¥é€—å·åˆ†å‰²,é»˜è®¤ä¸ºç©ºã€‚ç”±äºä¸Šé¢è®¾ç½®äº†modulelist, è¿™é‡Œå¯ä»¥ä¸ç”¨è®¾ç½®driverlist</span><br><span class="line">   #driverlist=com.mysql.cj.jdbc.Driver</span><br><span class="line">   # è‡ªå®šä¹‰æ—¥å¿—æ‰“å°</span><br><span class="line">   logMessageFormat=com.baomidou.mybatisplus.extension.p6spy.P6SpyLogger</span><br><span class="line">   #æ—¥å¿—è¾“å‡ºåˆ°æ§åˆ¶å°</span><br><span class="line">   appender=com.baomidou.mybatisplus.extension.p6spy.StdoutLogger</span><br><span class="line">   #è‹¥è¦æ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶, æŠŠä¸Šé¢çš„appnderæ³¨é‡Šæ‰, æˆ–è€…é‡‡ç”¨ä¸‹é¢çš„appender, å†æ·»åŠ logfileé…ç½®</span><br><span class="line">   #ä¸é…ç½®appenderæ—¶, é»˜è®¤æ˜¯å¾€æ–‡ä»¶è¿›è¡Œè¾“å‡ºçš„</span><br><span class="line">   #appender=com.p6spy.engine.spy.appender.FileLogger</span><br><span class="line">   #logfile=log.log</span><br><span class="line">   # è®¾ç½® p6spy driver ä»£ç†</span><br><span class="line">   deregisterdrivers=<span class="keyword">true</span></span><br><span class="line">   # å–æ¶ˆJDBC URLå‰ç¼€</span><br><span class="line">   useprefix=<span class="keyword">true</span></span><br><span class="line">   # é…ç½®è®°å½• Log ä¾‹å¤–,å¯å»æ‰çš„ç»“æœé›†æœ‰error,info,batch,debug,statement,commit,rollback,result,resultset.</span><br><span class="line">   excludecategories=info,debug,result,commit,resultset</span><br><span class="line">   # æ—¥æœŸæ ¼å¼</span><br><span class="line">   dateformat=yyyy-MM-dd HH:mm:ss</span><br><span class="line">   # æ˜¯å¦å¼€å¯æ…¢SQLè®°å½•</span><br><span class="line">   outagedetection=<span class="keyword">true</span></span><br><span class="line">   # æ…¢SQLè®°å½•æ ‡å‡† <span class="number">2</span> ç§’</span><br><span class="line">   outagedetectioninterval=<span class="number">2</span></span><br><span class="line">   # æ‰§è¡Œæ—¶é—´è®¾ç½®, åªæœ‰è¶…è¿‡è¿™ä¸ªæ‰§è¡Œæ—¶é—´çš„æ‰è¿›è¡Œè®°å½•, é»˜è®¤å€¼<span class="number">0</span>, å•ä½æ¯«ç§’</span><br><span class="line">   executionThreshold=<span class="number">10</span></span><br></pre></td></tr></table></figure><p>éšä¾¿è¿è¡Œä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œå¯ä»¥çœ‹åˆ°è¯¥SQLçš„æ‰§è¡Œæ—¶é•¿è¢«è®°å½•äº†ä¸‹æ¥</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/680.jpg" alt="680"></p><h3 id="å¤šç§Ÿæˆ·SQLè§£æå™¨"><a href="#å¤šç§Ÿæˆ·SQLè§£æå™¨" class="headerlink" title="å¤šç§Ÿæˆ·SQLè§£æå™¨"></a>å¤šç§Ÿæˆ·SQLè§£æå™¨</h3><p>å¤šç§Ÿæˆ·çš„æ¦‚å¿µï¼šå¤šä¸ªç”¨æˆ·å…±ç”¨ä¸€å¥—ç³»ç»Ÿï¼Œä½†ä»–ä»¬çš„æ•°æ®æœ‰éœ€è¦ç›¸å¯¹çš„ç‹¬ç«‹ï¼Œä¿æŒä¸€å®šçš„éš”ç¦»æ€§ã€‚</p><p>å¤šç§Ÿæˆ·çš„æ•°æ®éš”ç¦»ä¸€èˆ¬æœ‰å¦‚ä¸‹çš„æ–¹å¼ï¼š</p><ul><li><p>ä¸åŒç§Ÿæˆ·ä½¿ç”¨ä¸åŒçš„æ•°æ®åº“æœåŠ¡å™¨</p><p>ä¼˜ç‚¹æ˜¯ï¼šä¸åŒç§Ÿæˆ·æœ‰ä¸åŒçš„ç‹¬ç«‹æ•°æ®åº“ï¼Œæœ‰åŠ©äºæ‰©å±•ï¼Œä»¥åŠå¯¹ä¸åŒç§Ÿæˆ·æä¾›æ›´å¥½çš„ä¸ªæ€§åŒ–ï¼Œå‡ºç°æ•…éšœæ—¶æ¢å¤æ•°æ®è¾ƒä¸ºç®€å•ã€‚</p><p>ç¼ºç‚¹æ˜¯ï¼šå¢åŠ äº†æ•°æ®åº“æ•°é‡ï¼Œè´­ç½®æˆæœ¬ï¼Œç»´æŠ¤æˆæœ¬æ›´é«˜</p></li><li><p>ä¸åŒç§Ÿæˆ·ä½¿ç”¨ç›¸åŒçš„æ•°æ®åº“æœåŠ¡å™¨ï¼Œä½†ä½¿ç”¨ä¸åŒçš„æ•°æ®åº“ï¼ˆä¸åŒçš„schemaï¼‰</p><p>ä¼˜ç‚¹æ˜¯è´­ç½®å’Œç»´æŠ¤æˆæœ¬ä½äº†ä¸€äº›ï¼Œç¼ºç‚¹æ˜¯æ•°æ®æ¢å¤è¾ƒä¸ºå›°éš¾ï¼Œå› ä¸ºä¸åŒç§Ÿæˆ·çš„æ•°æ®éƒ½æ”¾åœ¨äº†ä¸€èµ·</p></li><li><p>ä¸åŒç§Ÿæˆ·ä½¿ç”¨ç›¸åŒçš„æ•°æ®åº“æœåŠ¡å™¨ï¼Œä½¿ç”¨ç›¸åŒçš„æ•°æ®åº“ï¼Œå…±äº«æ•°æ®è¡¨ï¼Œåœ¨è¡¨ä¸­å¢åŠ ç§Ÿæˆ·idæ¥åšåŒºåˆ†</p><p>ä¼˜ç‚¹æ˜¯ï¼Œè´­ç½®å’Œç»´æŠ¤æˆæœ¬æœ€ä½ï¼Œæ”¯æŒç”¨æˆ·æœ€å¤šï¼Œç¼ºç‚¹æ˜¯éš”ç¦»æ€§æœ€ä½ï¼Œå®‰å…¨æ€§æœ€ä½</p></li></ul><p>é£Ÿç”¨å®ä¾‹å¦‚ä¸‹</p><p>æ·»åŠ å¤šç§Ÿæˆ·æ‹¦æˆªå™¨é…ç½®ã€‚æ·»åŠ é…ç½®åï¼Œåœ¨æ‰§è¡ŒCRUDçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨åœ¨SQLè¯­å¥æœ€åæ‹¼æ¥ç§Ÿæˆ·idçš„æ¡ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mp.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.handler.TenantLineHandler;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.TenantLineInnerInterceptor;</span><br><span class="line"><span class="keyword">import</span> net.sf.jsqlparser.expression.Expression;</span><br><span class="line"><span class="keyword">import</span> net.sf.jsqlparser.expression.LongValue;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisPlusConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Bean</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> MybatisPlusInterceptor <span class="title">mybatisPlusInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  MybatisPlusInterceptor interceptor = <span class="keyword">new</span> MybatisPlusInterceptor();</span><br><span class="line">  interceptor.addInnerInterceptor(<span class="keyword">new</span> TenantLineInnerInterceptor(<span class="keyword">new</span> TenantLineHandler() &#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Expression <span class="title">getTenantId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è¿”å›ç§Ÿæˆ·idçš„å€¼, è¿™é‡Œå›ºå®šå†™æ­»ä¸º1</span></span><br><span class="line">                <span class="comment">// ä¸€èˆ¬æ˜¯ä»å½“å‰ä¸Šä¸‹æ–‡ä¸­å–å‡ºä¸€ä¸ª ç§Ÿæˆ·id</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> LongValue(<span class="number">1</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            ** é€šå¸¸ä¼šå°†è¡¨ç¤ºç§Ÿæˆ·idçš„åˆ—åï¼Œéœ€è¦æ’é™¤ç§Ÿæˆ·idçš„è¡¨ç­‰ä¿¡æ¯ï¼Œå°è£…åˆ°ä¸€ä¸ªé…ç½®ç±»ä¸­ï¼ˆå¦‚TenantConfigï¼‰</span></span><br><span class="line"><span class="comment">            **/</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getTenantIdColumn</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è¿”å›è¡¨ä¸­çš„è¡¨ç¤ºç§Ÿæˆ·idçš„åˆ—å</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;manager_id&quot;</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">ignoreTable</span><span class="params">(String tableName)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è¡¨åä¸ä¸º user2 çš„è¡¨, ä¸æ‹¼æ¥å¤šç§Ÿæˆ·æ¡ä»¶</span></span><br><span class="line">    <span class="keyword">return</span> !<span class="string">&quot;user2&quot;</span>.equals(tableName);</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å¦‚æœç”¨äº†åˆ†é¡µæ’ä»¶æ³¨æ„å…ˆ add TenantLineInnerInterceptor å† add PaginationInnerInterceptor</span></span><br><span class="line">        <span class="comment">// ç”¨äº†åˆ†é¡µæ’ä»¶å¿…é¡»è®¾ç½® MybatisConfiguration#useDeprecatedExecutor = false</span></span><br><span class="line">  <span class="keyword">return</span> interceptor;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testTenant</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  LambdaQueryWrapper&lt;User2&gt; wrapper = <span class="keyword">new</span> LambdaQueryWrapper&lt;&gt;();</span><br><span class="line">  wrapper.likeRight(User2::getName, <span class="string">&quot;ç‹&quot;</span>)</span><br><span class="line">    .select(User2::getName, User2::getAge, User2::getEmail, User2::getManagerId);</span><br><span class="line">  user2Mapper.selectList(wrapper);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/640" alt="å›¾ç‰‡"></p><h3 id="åŠ¨æ€è¡¨åSQLè§£æå™¨"><a href="#åŠ¨æ€è¡¨åSQLè§£æå™¨" class="headerlink" title="åŠ¨æ€è¡¨åSQLè§£æå™¨"></a>åŠ¨æ€è¡¨åSQLè§£æå™¨</h3><p>å½“æ•°æ®é‡ç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé‡‡ç”¨åˆ†åº“åˆ†è¡¨ã€‚è¿™æ—¶ï¼Œå¯èƒ½å°±ä¼šæœ‰å¤šå¼ è¡¨ï¼Œå…¶è¡¨ç»“æ„ç›¸åŒï¼Œä½†è¡¨åä¸åŒã€‚ä¾‹å¦‚<code>order_1</code>ï¼Œ<code>order_2</code>ï¼Œ<code>order_3</code>ï¼ŒæŸ¥è¯¢æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦åŠ¨æ€è®¾ç½®è¦æŸ¥çš„è¡¨åã€‚mpæä¾›äº†åŠ¨æ€è¡¨åSQLè§£æå™¨ï¼Œé£Ÿç”¨ç¤ºä¾‹å¦‚ä¸‹</p><p>å…ˆåœ¨mysqlä¸­æ‹·è´ä¸€ä¸‹<code>user2</code>è¡¨</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/600.jpg" alt="600"></p><p>é…ç½®åŠ¨æ€è¡¨åæ‹¦æˆªå™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.mp.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.handler.TableNameHandler;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.DynamicTableNameInnerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisPlusConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Bean</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> MybatisPlusInterceptor <span class="title">mybatisPlusInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  MybatisPlusInterceptor interceptor = <span class="keyword">new</span> MybatisPlusInterceptor();</span><br><span class="line">  DynamicTableNameInnerInterceptor dynamicTableNameInnerInterceptor = <span class="keyword">new</span> DynamicTableNameInnerInterceptor();</span><br><span class="line">  HashMap&lt;String, TableNameHandler&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="comment">// å¯¹äºuser2è¡¨ï¼Œè¿›è¡ŒåŠ¨æ€è¡¨åè®¾ç½®</span></span><br><span class="line">  map.put(<span class="string">&quot;user2&quot;</span>, (sql, tableName) -&gt; &#123;</span><br><span class="line">   String _ = <span class="string">&quot;_&quot;</span>;</span><br><span class="line">   <span class="keyword">int</span> random = <span class="keyword">new</span> Random().nextInt(<span class="number">2</span>) + <span class="number">1</span>;</span><br><span class="line">   <span class="keyword">return</span> tableName + _ + random; <span class="comment">// è‹¥è¿”å›null, åˆ™ä¸ä¼šè¿›è¡ŒåŠ¨æ€è¡¨åæ›¿æ¢, è¿˜æ˜¯ä¼šä½¿ç”¨user2</span></span><br><span class="line">  &#125;);</span><br><span class="line">  dynamicTableNameInnerInterceptor.setTableNameHandlerMap(map);</span><br><span class="line">  interceptor.addInnerInterceptor(dynamicTableNameInnerInterceptor);</span><br><span class="line">  <span class="keyword">return</span> interceptor;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/641.jpg" alt="641"></p><p>æµ‹è¯•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line"> public void testDynamicTable() &#123;</span><br><span class="line">  user2Mapper.selectList(null);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li><p>æ¡ä»¶æ„é€ å™¨<code>AbstractWrapper</code>ä¸­æä¾›äº†å¤šä¸ªæ–¹æ³•ç”¨äºæ„é€ SQLè¯­å¥ä¸­çš„WHEREæ¡ä»¶ï¼Œè€Œå…¶å­ç±»<code>QueryWrapper</code>é¢å¤–æä¾›äº†<code>select</code>æ–¹æ³•ï¼Œå¯ä»¥åªé€‰å–ç‰¹å®šçš„åˆ—ï¼Œå­ç±»<code>UpdateWrapper</code>é¢å¤–æä¾›äº†<code>set</code>æ–¹æ³•ï¼Œç”¨äºè®¾ç½®SQLä¸­çš„SETè¯­å¥ã€‚é™¤äº†æ™®é€šçš„<code>Wrapper</code>ï¼Œè¿˜æœ‰åŸºäºlambdaè¡¨è¾¾å¼çš„<code>Wrapper</code>ï¼Œå¦‚<code>LambdaQueryWrapper</code>ï¼Œ<code>LambdaUpdateWrapper</code>ï¼Œå®ƒä»¬åœ¨æ„é€ WHEREæ¡ä»¶æ—¶ï¼Œç›´æ¥ä»¥<strong>æ–¹æ³•å¼•ç”¨</strong>æ¥æŒ‡å®šWHEREæ¡ä»¶ä¸­çš„åˆ—ï¼Œæ¯”æ™®é€š<code>Wrapper</code>é€šè¿‡å­—ç¬¦ä¸²æ¥æŒ‡å®šè¦æ›´åŠ ä¼˜é›…ã€‚å¦ï¼Œè¿˜æœ‰<strong>é“¾å¼Wrapper</strong>ï¼Œå¦‚<code>LambdaQueryChainWrapper</code>ï¼Œå®ƒå°è£…äº†<code>BaseMapper</code>ï¼Œå¯ä»¥æ›´æ–¹ä¾¿åœ°è·å–ç»“æœã€‚</p></li><li><p>æ¡ä»¶æ„é€ å™¨é‡‡ç”¨<strong>é“¾å¼è°ƒç”¨</strong>æ¥æ‹¼æ¥å¤šä¸ªæ¡ä»¶ï¼Œæ¡ä»¶ä¹‹é—´é»˜è®¤ä»¥<code>AND</code>è¿æ¥</p></li><li><p>å½“<code>AND</code>æˆ–<code>OR</code>åé¢çš„æ¡ä»¶éœ€è¦è¢«æ‹¬å·åŒ…è£¹æ—¶ï¼Œå°†æ‹¬å·ä¸­çš„æ¡ä»¶ä»¥lambdaè¡¨è¾¾å¼å½¢å¼ï¼Œä½œä¸ºå‚æ•°ä¼ å…¥<code>and()</code>æˆ–<code>or()</code></p><p>ç‰¹åˆ«çš„ï¼Œå½“<code>()</code>éœ€è¦æ”¾åœ¨WHEREè¯­å¥çš„æœ€å¼€å¤´æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>nested()</code>æ–¹æ³•</p></li><li><p>æ¡ä»¶è¡¨è¾¾å¼æ—¶å½“éœ€è¦ä¼ å…¥è‡ªå®šä¹‰çš„SQLè¯­å¥ï¼Œæˆ–è€…éœ€è¦è°ƒç”¨æ•°æ®åº“å‡½æ•°æ—¶ï¼Œå¯ç”¨<code>apply()</code>æ–¹æ³•è¿›è¡ŒSQLæ‹¼æ¥</p></li><li><p>æ¡ä»¶æ„é€ å™¨ä¸­çš„å„ä¸ªæ–¹æ³•å¯ä»¥é€šè¿‡ä¸€ä¸ª<code>boolean</code>ç±»å‹çš„å˜é‡<code>condition</code>ï¼Œæ¥æ ¹æ®éœ€è¦çµæ´»æ‹¼æ¥WHEREæ¡ä»¶ï¼ˆä»…å½“<code>condition</code>ä¸º<code>true</code>æ—¶ä¼šæ‹¼æ¥SQLè¯­å¥ï¼‰</p></li><li><p>ä½¿ç”¨lambdaæ¡ä»¶æ„é€ å™¨ï¼Œå¯ä»¥é€šè¿‡lambdaè¡¨è¾¾å¼ï¼Œç›´æ¥ä½¿ç”¨å®ä½“ç±»ä¸­çš„å±æ€§è¿›è¡Œæ¡ä»¶æ„é€ ï¼Œæ¯”æ™®é€šçš„æ¡ä»¶æ„é€ å™¨æ›´åŠ ä¼˜é›…</p></li><li><p>è‹¥mpæä¾›çš„æ–¹æ³•ä¸å¤Ÿç”¨ï¼Œå¯ä»¥é€šè¿‡<strong>è‡ªå®šä¹‰SQL</strong>ï¼ˆåŸç”Ÿmybatisï¼‰çš„å½¢å¼è¿›è¡Œæ‰©å±•å¼€å‘</p></li><li><p>ä½¿ç”¨mpè¿›è¡Œåˆ†é¡µæŸ¥è¯¢æ—¶ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªåˆ†é¡µæ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰ï¼Œæ³¨å†Œåˆ°Springå®¹å™¨ä¸­ï¼ŒéšåæŸ¥è¯¢æ—¶ï¼Œé€šè¿‡ä¼ å…¥ä¸€ä¸ªåˆ†é¡µå¯¹è±¡ï¼ˆPageå¯¹è±¡ï¼‰è¿›è¡ŒæŸ¥è¯¢å³å¯ã€‚å•è¡¨æŸ¥è¯¢æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>BaseMapper</code>æä¾›çš„<code>selectPage</code>æˆ–<code>selectMapsPage</code>æ–¹æ³•ã€‚å¤æ‚åœºæ™¯ä¸‹ï¼ˆå¦‚å¤šè¡¨è”æŸ¥ï¼‰ï¼Œä½¿ç”¨è‡ªå®šä¹‰SQLã€‚</p></li><li><p>ARæ¨¡å¼å¯ä»¥ç›´æ¥é€šè¿‡æ“ä½œå®ä½“ç±»æ¥æ“ä½œæ•°æ®åº“ã€‚è®©å®ä½“ç±»ç»§æ‰¿è‡ª<code>Model</code>å³å¯</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> MyBatis-plus </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºhexo+butterflyçš„ä¸ªäººåšå®¢æ­å»ºæ•™ç¨‹ï¼ˆå››ï¼‰ ä¸»é¢˜ç¾åŒ–ç¯‡</title>
      <link href="/2022/01/25/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%96%87%E6%A1%A3(%E5%9B%9B)/"/>
      <url>/2022/01/25/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%96%87%E6%A1%A3(%E5%9B%9B)/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡ä»‹ç»ä¸»é¢˜è¿›ä¸€æ­¥ç¾åŒ–ï¼Œä»¥åŠæ·»åŠ æ›´å¤šæœ‰è¶£çš„åŠŸèƒ½ã€‚</p><h2 id="æ·»åŠ çœ‹æ¿å¨˜"><a href="#æ·»åŠ çœ‹æ¿å¨˜" class="headerlink" title="æ·»åŠ çœ‹æ¿å¨˜"></a>æ·»åŠ çœ‹æ¿å¨˜</h2><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format27.png" alt="format27"></p><p>1ï¼šè¿›å…¥ <code>Butterfly</code> ä¸»é¢˜ï¼Œåœ¨ <code>[åšå®¢å]\themes\butterfly\source\</code> ç›®å½•ä¸‹æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œè¾“å…¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/stevenjoezhang/live2d-widget.git live2d-widget</span><br></pre></td></tr></table></figure><p>2ï¼šæ‰¾åˆ°è·¯å¾„ <code>[åšå®¢å]\themes\butterfly\source\live2d-widget\autoload.js</code>ï¼Œæ‰“å¼€ <code>autoload.js</code>ï¼Œä¿®æ”¹å†…å®¹ï¼š</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">- const live2d_path = &quot;https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget/&quot;;</span></span><br><span class="line"><span class="addition">+ const live2d_path = &quot;/live2d-widget/&quot;;</span></span><br></pre></td></tr></table></figure><p>3ï¼šåœ¨ <code>Butterfly</code> çš„ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>[Blogroot]\_config.butterfly.yml</code> ä¸­ï¼Œ<br><code>butterfly</code> ä¸»é¢˜å…¶å®è‡ªå¸¦ <code>fontawesome</code> ä¾èµ–ï¼Œæ— éœ€å¼•å…¥ï¼Œ</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    # Inject</span><br><span class="line">    # Insert the code to head (before &#x27;&lt;/head&gt;&#x27; tag) and the bottom (before &#x27;&lt;/body&gt;&#x27; tag)</span><br><span class="line">    # æ’å…¥ä»£ç åˆ°å¤´éƒ¨ &lt;/head&gt; ä¹‹å‰ å’Œ åº•éƒ¨ &lt;/body&gt; ä¹‹å‰</span><br><span class="line">    inject:</span><br><span class="line">      head:</span><br><span class="line">        # - &lt;link rel=&quot;stylesheet&quot; href=&quot;/xxx.css&quot;&gt;</span><br><span class="line">      bottom:</span><br><span class="line">        # - &lt;script src=&quot;xxxx&quot;&gt;&lt;/script&gt;</span><br><span class="line"><span class="addition">+       - &lt;script defer src=&quot;/live2d-widget/autoload.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><p>4ï¼šä¿å­˜æ‰€æœ‰æ–‡ä»¶çš„ä¿®æ”¹ï¼Œç„¶åé¡ºåºæ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>5ï¼šè‡ªå®šä¹‰ä¿®æ”¹<br>æœ‰ä¸€å®šå‰ç«¯åŸºç¡€çš„å°ä¼™ä¼´å¯ä»¥é€šè¿‡ä¿®æ”¹ <code>[Blogroot]\themes\butterfly\source\live2d-widget</code> è·¯å¾„ä¸‹çš„æ ·å¼èµ„æºæ–‡ä»¶ï¼š</p><ul><li><code>waifu-tips.js</code>: åŒ…å«äº†æŒ‰é’®å’Œå¯¹è¯æ¡†çš„é€»è¾‘</li><li><code>waifu-tips.json</code> : å®šä¹‰äº†è§¦å‘æ¡ä»¶ï¼ˆselectorï¼ŒCSS é€‰æ‹©å™¨ï¼‰å’Œè§¦å‘æ—¶æ˜¾ç¤ºçš„æ–‡å­—ï¼ˆtextï¼‰ï¼›</li><li><code>waifu.css</code>: çœ‹æ¿å¨˜çš„æ ·å¼è¡¨ã€‚å¯ä»¥å¯¹çœ‹æ¿å¨˜çš„ä½ç½®å¸ƒå±€ç­‰åšè‡ªå®šä¹‰ä¿®æ”¹ã€‚</li></ul><h2 id="å›¾ç‰‡è®¾ç½®"><a href="#å›¾ç‰‡è®¾ç½®" class="headerlink" title="å›¾ç‰‡è®¾ç½®"></a>å›¾ç‰‡è®¾ç½®</h2><h2 id="ç«™ç‚¹å›¾æ ‡"><a href="#ç«™ç‚¹å›¾æ ‡" class="headerlink" title="ç«™ç‚¹å›¾æ ‡"></a>ç«™ç‚¹å›¾æ ‡</h2><p>ç«™ç‚¹å›¾æ ‡åˆç§°ç«™ç‚¹icon(<code>favicon.ico</code>)<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">favicon:</span> <span class="string">/img/favicon.png</span> <span class="comment"># å°†å›¾ç‰‡æ”¾å…¥ themes -&gt; Butterfly -&gt; source -&gt; img é‡Œ</span></span><br></pre></td></tr></table></figure><h2 id="å°é¢å›¾ç‰‡è®¾ç½®"><a href="#å°é¢å›¾ç‰‡è®¾ç½®" class="headerlink" title="å°é¢å›¾ç‰‡è®¾ç½®"></a>å°é¢å›¾ç‰‡è®¾ç½®</h2><p>åœ¨è®¿é—®ç³»ç»Ÿé¦–é¡µæ—¶ï¼Œå‡ºç°çš„å°é¢å›¾ç‰‡<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">index_img:</span> <span class="string">å›¾ç‰‡åœ°å€</span> <span class="comment"># ä¸»é¡µå°é¢å›¾ç‰‡</span></span><br><span class="line"><span class="attr">default_top_img:</span> <span class="string">å›¾ç‰‡åœ°å€</span> <span class="comment"># æ–‡ç« è¯¦æƒ…é¡µçš„é¡¶éƒ¨å›¾ç‰‡</span></span><br><span class="line"><span class="attr">archive_img:</span> <span class="string">å›¾ç‰‡åœ°å€</span> <span class="comment"># å½’æ¡£é¡µé¡¶éƒ¨çš„å›¾ç‰‡</span></span><br><span class="line"><span class="attr">tag_img:</span> <span class="string">å›¾ç‰‡åœ°å€</span> <span class="comment"># æ ‡ç­¾é¡µé¡¶éƒ¨çš„å›¾ç‰‡</span></span><br><span class="line"><span class="attr">category_img:</span> <span class="string">å›¾ç‰‡åœ°å€</span> <span class="comment"># åˆ†ç±»é¡µé¡¶éƒ¨çš„å›¾ç‰‡</span></span><br></pre></td></tr></table></figure><h2 id="é”™è¯¯å›¾ç‰‡"><a href="#é”™è¯¯å›¾ç‰‡" class="headerlink" title="é”™è¯¯å›¾ç‰‡"></a>é”™è¯¯å›¾ç‰‡</h2><p>é…ç½®äº†è¯¥å±æ€§åä¼šæ›¿æ¢æ— æ³•å±•ç¤ºçš„å›¾ç‰‡<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">error_img:</span></span><br><span class="line">  <span class="attr">flink:</span> <span class="string">/img/friend_404.gif</span></span><br><span class="line">  <span class="attr">post_page:</span> <span class="string">/img/404.jpg</span></span><br></pre></td></tr></table></figure><h2 id="å­—æ•°ç»Ÿè®¡"><a href="#å­—æ•°ç»Ÿè®¡" class="headerlink" title="å­—æ•°ç»Ÿè®¡"></a>å­—æ•°ç»Ÿè®¡</h2><p>ä¸º <code>Butterfly</code> é…ä¸Šå­—æ•°ç»Ÿè®¡ç‰¹æ€§ï¼Œä½ éœ€è¦å¦‚ä¸‹å‡ ä¸ªæ­¥éª¤:</p><ol><li>æ‰“å¼€ hexo å·¥ä½œç›®å½•</li><li>è¿›å…¥å‘½ä»¤æç¤ºç¬¦è¾“å…¥<code>npm install hexo-wordcount --save</code> or <code>yarn add hexo-wordcount</code></li><li>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">wordcount:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post_wordcount:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">min2read:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_wordcount:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="æ–‡ç« æ‘˜è¦"><a href="#æ–‡ç« æ‘˜è¦" class="headerlink" title="æ–‡ç« æ‘˜è¦"></a>æ–‡ç« æ‘˜è¦</h2><p>æ–‡ç« æ‘˜è¦ï¼ˆå¸å¼•è¯»è€…å¾€ä¸‹è¯»ï¼‰<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">index_post_content:</span></span><br><span class="line">  <span class="attr">method:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">length:</span> <span class="number">500</span> <span class="comment"># èŠ‚é€‰æ–‡ç« çš„å‰500ä¸ªå­—</span></span><br></pre></td></tr></table></figure><h2 id="åˆ†äº«"><a href="#åˆ†äº«" class="headerlink" title="åˆ†äº«"></a>åˆ†äº«</h2><p>åˆ†äº«ä½ çš„å†…å®¹sharejs</p><p>å¦‚æœä½ ä¸çŸ¥é“ <a href="https://github.com/overtrue/share.js/">sharejs</a>ï¼Œåˆ°å®˜ç½‘çœ‹çœ‹è¯´æ˜å§ã€‚<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sharejs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">sites:</span> <span class="string">facebook,twitter,wechat,weibo,qq</span>  <span class="comment">#æƒ³è¦æ˜¾ç¤ºçš„å†…å®¹</span></span><br></pre></td></tr></table></figure><h2 id="è¯„è®º"><a href="#è¯„è®º" class="headerlink" title="è¯„è®º"></a>è¯„è®º</h2><p>ä» 3.0.0 å¼€å§‹ï¼Œå¼€å¯è¯„è®ºéœ€è¦åœ¨ comments-use ä¸­å¡«å†™ä½ éœ€è¦çš„è¯„è®ºã€‚<br>æ”¯æŒåŒè¯„è®ºæ˜¾ç¤ºï¼Œåªéœ€è¦é…ç½®ä¸¤ä¸ªè¯„è®ºï¼ˆç¬¬ä¸€ä¸ªä¸ºé»˜è®¤æ˜¾ç¤ºï¼‰<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="attr">use:</span> <span class="comment"># ä½¿ç”¨çš„è¯„è®ºï¼ˆè¯·æ³¨æ„ï¼Œå¡«å†™çš„è¯„è®ºé¦–å­—æ¯éœ€è¦å¤§å†™ã€‚æœ€å¤šæ”¯æŒä¸¤ä¸ªï¼Œå¦‚æœä¸éœ€è¦è¯·ç•™ç©ºï¼‰</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">Valine</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">Disqus</span></span><br><span class="line">  <span class="comment"># - Valine</span></span><br><span class="line">  <span class="comment"># - Disqus</span></span><br><span class="line">  <span class="attr">text:</span> <span class="literal">true</span> <span class="comment"># æ˜¯å¦æ˜¾ç¤ºè¯„è®ºæœåŠ¡å•†çš„åå­—</span></span><br><span class="line">  <span class="attr">lazyload:</span> <span class="literal">false</span> <span class="comment"># æ˜¯å¦ä¸ºè¯„è®ºå¼€å¯ lazyloadï¼Œå¼€å¯åï¼Œåªæœ‰æ»šåŠ¨åˆ°è¯„è®ºä½ç½®æ—¶æ‰ä¼šåŠ è½½è¯„è®ºæ‰€éœ€è¦çš„èµ„æºï¼ˆå¼€å¯ lazyload åï¼Œè¯„è®ºæ•°å°†ä¸æ˜¾ç¤ºï¼‰</span></span><br><span class="line">  <span class="attr">count:</span> <span class="literal">false</span> <span class="comment"># æ˜¯å¦åœ¨æ–‡ç« é¡¶éƒ¨æ˜¾ç¤ºè¯„è®ºæ•° livere å’Œ utterances ä¸æ”¯æŒè¯„è®ºæ•°æ˜¾ç¤º</span></span><br></pre></td></tr></table></figure><h2 id="Valine"><a href="#Valine" class="headerlink" title="Valine"></a>Valine</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="attr">appId:</span> <span class="string">å¡«å…¥ç”³è¯·åˆ°çš„appid</span> <span class="comment"># leancloud application app id</span></span><br><span class="line">  <span class="attr">appKey:</span> <span class="string">å¡«å…¥ç”³è¯·åˆ°çš„ç§˜é’¥</span> <span class="comment"># leancloud application app key</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">monsterid</span> <span class="comment"># gravatar style https://valine.js.org/#/avatar</span></span><br><span class="line">  <span class="attr">serverURLs:</span> <span class="comment"># This configuration is suitable for domestic custom domain name users, overseas version will be automatically detected (no need to manually fill in)</span></span><br><span class="line">  <span class="attr">bg:</span> <span class="string">/img/comment_bg.png</span> <span class="comment"># valine background</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">è®°å½•ä½ çš„é‚®ç®±ï¼Œæ–¹ä¾¿å¿«é€Ÿå›å¤</span></span><br><span class="line">  <span class="attr">master:</span> <span class="comment"># md5åŠ å¯†åçš„åšä¸»é‚®ç®±</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">A5FB062F4B03DF13194A698AF2383568</span>  <span class="comment">#å¯æ·»åŠ å¤šä¸ª</span></span><br><span class="line">  <span class="attr">friends:</span> <span class="comment"># md5åŠ å¯†åçš„å°ä¼™ä¼´é‚®ç®±</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">6E85D9254372CD179BBEA9881410F4D6</span></span><br><span class="line">  <span class="attr">tagMeta:</span> <span class="string">&#x27;åšä¸»,æœ‹å‹,è®¿å®¢&#x27;</span> <span class="comment"># æ ‡ç­¾è¦æ˜¾ç¤ºçš„æ–‡å­—,é»˜è®¤&#x27;åšä¸»,æœ‹å‹,è®¿å®¢&#x27;</span></span><br><span class="line">  <span class="attr">option:</span></span><br></pre></td></tr></table></figure><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format28.png" alt="format28"></p><h2 id="åœ¨çº¿èŠå¤©"><a href="#åœ¨çº¿èŠå¤©" class="headerlink" title="åœ¨çº¿èŠå¤©"></a>åœ¨çº¿èŠå¤©</h2><p>ä» 3.0 å¼€å§‹ï¼ŒButterfly ä¸»é¢˜å†…ç½®äº† 4 ç§åœ¨ç¶«èŠå¤©å·¥å…·ã€‚ä½ å¯ä»¥é€‰æ‹©å¼€å¯ä¸€ç§ï¼Œæ–¹ä¾¿ä½ ä¸è®¿å®¢çš„äº¤æµã€‚<br>é€šç”¨è®¾ç½®<br>è¿™äº›å·¥å…·éƒ½æä¾›äº†ä¸€ä¸ªæŒ‰é’®å¯ä»¥æ‰“å¼€ / å…³é—­èŠå¤©çª—å£ã€‚<br>ä¸»é¢˜ä¹Ÿæä¾›äº†ä¸€ä¸ªé›†åˆä¸»é¢˜ç‰¹è‰²çš„æŒ‰é’®æ¥æ›¿æ¢è¿™äº›å·¥å…·æœ¬èº«çš„æŒ‰é’®ï¼Œè¿™ä¸ªèŠå¤©æŒ‰é’®å°†ä¼šå‡ºç°åœ¨å³ä¸‹è§’é‡Œã€‚<br>ä½ åªéœ€è¦æŠŠ chat_btn æ‰“å¼€å°±è¡Œã€‚<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶_config.butterfly.ymlï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">chat_btn:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format29.png" alt="format29"></p><h2 id="daovoice"><a href="#daovoice" class="headerlink" title="daovoice"></a>daovoice</h2><p>æ‰“å¼€ <a href="http://daovoice.io/">daovoice</a> å¹¶æ³¨å†Œå¸å·,æ‰¾åˆ°ä½ çš„ app id</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format30.png" alt="format30"></p><p>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">daovoice:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">app_id:</span> <span class="string">xxxxx</span></span><br></pre></td></tr></table></figure><p>å¯åœ¨èŠå¤©è®¾ç½®é‡Œé…ç½®èŠå¤©æŒ‰é’®ç­‰æ ·å¼<img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format31.png" alt="format31"></p><h2 id="ç™¾åº¦ç»Ÿè®¡"><a href="#ç™¾åº¦ç»Ÿè®¡" class="headerlink" title="ç™¾åº¦ç»Ÿè®¡"></a>ç™¾åº¦ç»Ÿè®¡</h2><ol><li>ç™»å½•ç™¾åº¦ç»Ÿè®¡çš„å®˜æ–¹ç½‘ç«™</li><li>æ‰¾åˆ°ä½ ç™¾åº¦ç»Ÿè®¡çš„ç»Ÿè®¡ä»£ç </li></ol><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format32.png" alt="format32">ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">baidu_analytics:</span> <span class="string">ä½ çš„ä»£ç </span></span><br></pre></td></tr></table></figure><h2 id="è°·æ­Œç»Ÿè®¡"><a href="#è°·æ­Œç»Ÿè®¡" class="headerlink" title="è°·æ­Œç»Ÿè®¡"></a>è°·æ­Œç»Ÿè®¡</h2><ol><li>ç™»å½•è°·æ­Œåˆ†æçš„å®˜æ–¹ç½‘ç«™</li><li>æ‰¾åˆ°ä½ çš„è°·æ­Œåˆ†æçš„è·Ÿè¸ª ID</li></ol><p><img src="https://img-blog.csdnimg.cn/img_convert/c2d57f91029357b692d9ad8c6229a4e8.png" alt="img"></p><p>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">google_analytics:</span> <span class="string">ä½ çš„ä»£ç </span> <span class="comment"># é€šå¸¸ä»¥`UA-`æ‰“å¤´</span></span><br></pre></td></tr></table></figure><h2 id="è…¾è®¯ç§»åŠ¨åˆ†æ"><a href="#è…¾è®¯ç§»åŠ¨åˆ†æ" class="headerlink" title="è…¾è®¯ç§»åŠ¨åˆ†æ"></a>è…¾è®¯ç§»åŠ¨åˆ†æ</h2><ol><li>ç™»å½•è…¾è®¯ç§»åŠ¨åˆ†æçš„å®˜æ–¹ç½‘ç«™</li><li>é€‰æ‹© WEBåº”ç”¨</li><li>æ‰¾åˆ°ä½ çš„ç«™ç‚¹ ID</li></ol><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format33.png" alt="format33"></p><p>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">tencent_analytics:</span> <span class="string">ä½ çš„ID</span></span><br></pre></td></tr></table></figure><h2 id="CNZZåˆ†æ"><a href="#CNZZåˆ†æ" class="headerlink" title="CNZZåˆ†æ"></a>CNZZåˆ†æ</h2><ol><li>ç™»å½• CNZZ åˆ†æçš„å®˜æ–¹ç½‘ç«™</li><li>æ‰¾åˆ° ç«™ç‚¹è®¾ç½® - è·å–ä»£ç </li><li>æ‰¾åˆ°ä½ çš„ web_id</li></ol><p>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cnzz_analytics:</span> <span class="string">ä½ çš„ä»£ç </span></span><br></pre></td></tr></table></figure><h2 id="è°·æ­Œå¹¿å‘Šï¼ˆèµšç‚¹å°è´¹ï¼‰"><a href="#è°·æ­Œå¹¿å‘Šï¼ˆèµšç‚¹å°è´¹ï¼‰" class="headerlink" title="è°·æ­Œå¹¿å‘Šï¼ˆèµšç‚¹å°è´¹ï¼‰"></a>è°·æ­Œå¹¿å‘Šï¼ˆèµšç‚¹å°è´¹ï¼‰</h2><p>ä¸»é¢˜å·²é›†æˆè°·æ­Œå¹¿å‘Šï¼ˆè‡ªåŠ¨å¹¿å‘Šï¼‰<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">google_adsense:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">auto_ads:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">js:</span> <span class="string">https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js</span></span><br><span class="line">  <span class="attr">client:</span> <span class="comment"># å¡«å…¥ä¸ªäººè¯†åˆ«ç </span></span><br><span class="line">  <span class="attr">enable_page_level_ads:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="æ‰‹åŠ¨å¹¿å‘Š"><a href="#æ‰‹åŠ¨å¹¿å‘Š" class="headerlink" title="æ‰‹åŠ¨å¹¿å‘Š"></a>æ‰‹åŠ¨å¹¿å‘Š</h2><p>ä¸»é¢˜é¢„ç•™äº†ä¸‰ä¸ªä½ç½®å¯ä¾›æ’å…¥å¹¿å‘Šï¼Œåˆ†åˆ«ä¸ºä¸»é¡µæ–‡ç«  (æ¯ä¸‰ç¯‡æ–‡ç« å‡ºç°å¹¿å‘Š)/aside å…¬å‘Šä¹‹å / æ–‡ç« é¡µæ‰“èµä¹‹åã€‚ï¼ŒæŠŠ html ä»£ç å¡«å†™åˆ°å¯¹åº”çš„ä½ç½®<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ad:</span></span><br><span class="line">  <span class="attr">index:</span></span><br><span class="line">  <span class="attr">aside:</span></span><br><span class="line">  <span class="attr">post:</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">index:</span> <span class="string">&lt;ins</span> <span class="string">class=&quot;adsbygoogle&quot;</span> <span class="string">style=&quot;display:block&quot;</span> <span class="string">data-ad-format=&quot;fluid&quot;</span> <span class="string">data-ad-layout-key=&quot;xxxxxxxxxxxx&quot;</span> <span class="string">data-ad-client=&quot;ca-pub-xxxxxxxxxx&quot;</span> <span class="string">data-ad-slot=&quot;xxxxxxxxxx&quot;&gt;&lt;/ins&gt;&lt;script&gt;(adsbygoogle=window.adsbygoogle||[]).push(&#123;&#125;)&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ç½‘ç«™éªŒè¯"><a href="#ç½‘ç«™éªŒè¯" class="headerlink" title="ç½‘ç«™éªŒè¯"></a>ç½‘ç«™éªŒè¯</h2><p>å¦‚æœéœ€è¦æœç´¢å¼•æ“æ”¶å½•ç½‘ç«™ï¼Œå¯èƒ½éœ€è¦ç™»å½•å¯¹åº”æœç´¢å¼•æ“çš„ç®¡ç†å¹³å°è¿›è¡Œæäº¤ã€‚<br>å„è‡ªçš„éªŒè¯ç å¯ä»å„è‡ªç®¡ç†å¹³å°æ‹¿åˆ°<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Google Webmaster tools verification setting</span></span><br><span class="line"><span class="comment"># See: https://www.google.com/webmasters/</span></span><br><span class="line"><span class="attr">google_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Bing Webmaster tools verification setting</span></span><br><span class="line"><span class="comment"># See: https://www.bing.com/webmaster/</span></span><br><span class="line"><span class="attr">bing_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Baidu Webmaster tools verification setting</span></span><br><span class="line"><span class="comment"># See: https://ziyuan.baidu.com/site/</span></span><br><span class="line"><span class="attr">baidu_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 360 Webmaster tools verification setting</span></span><br><span class="line"><span class="comment"># see http://zhanzhang.so.com/</span></span><br><span class="line"><span class="attr">qihu_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Yandex Webmaster tools verification setting</span></span><br><span class="line"><span class="comment"># see https://webmaster.yandex.com/</span></span><br><span class="line"><span class="attr">yandex_site_verification:</span></span><br></pre></td></tr></table></figure><h2 id="è‡ªå®šä¹‰ä¸»é¢˜è‰²"><a href="#è‡ªå®šä¹‰ä¸»é¢˜è‰²" class="headerlink" title="è‡ªå®šä¹‰ä¸»é¢˜è‰²"></a>è‡ªå®šä¹‰ä¸»é¢˜è‰²</h2><p>å¯ä»¥ä¿®æ”¹å¤§éƒ¨åˆ† UI é¢œè‰²<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme_color:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">main:</span> <span class="string">&quot;#49B1F5&quot;</span></span><br><span class="line">  <span class="attr">paginator:</span> <span class="string">&quot;#00c4b6&quot;</span></span><br><span class="line">  <span class="attr">button_hover:</span> <span class="string">&quot;#FF7242&quot;</span></span><br><span class="line">  <span class="attr">text_selection:</span> <span class="string">&quot;#00c4b6&quot;</span></span><br><span class="line">  <span class="attr">link_color:</span> <span class="string">&quot;#99a9bf&quot;</span></span><br><span class="line">  <span class="attr">meta_color:</span> <span class="string">&quot;#858585&quot;</span></span><br><span class="line">  <span class="attr">hr_color:</span> <span class="string">&quot;#A4D8FA&quot;</span></span><br><span class="line">  <span class="attr">code_foreground:</span> <span class="string">&quot;#F47466&quot;</span></span><br><span class="line">  <span class="attr">code_background:</span> <span class="string">&quot;rgba(27, 31, 35, .05)&quot;</span></span><br><span class="line">  <span class="attr">toc_color:</span> <span class="string">&quot;#00c4b6&quot;</span></span><br><span class="line">  <span class="attr">blockquote_padding_color:</span> <span class="string">&quot;#49b1f5&quot;</span></span><br><span class="line">  <span class="attr">blockquote_background_color:</span> <span class="string">&quot;#49b1f5&quot;</span></span><br></pre></td></tr></table></figure><h2 id="ç½‘ç«™èƒŒæ™¯"><a href="#ç½‘ç«™èƒŒæ™¯" class="headerlink" title="ç½‘ç«™èƒŒæ™¯"></a>ç½‘ç«™èƒŒæ™¯</h2><p>é»˜è®¤æ˜¾ç¤ºç™½è‰²ï¼Œå¯è®¾ç½®å›¾ç‰‡æˆ–è€…é¢œè‰²<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">background:</span> <span class="comment">#å›¾ç‰‡æˆ–è€…é¢œè‰²</span></span><br></pre></td></tr></table></figure><p>ç•™æ„: å¦‚æœä½ çš„ç½‘ç«™æ ¹ç›®å½•ä¸æ˜¯â€™/â€˜, ä½¿ç”¨æœ¬åœ°å›¾ç‰‡æ—¶ï¼Œéœ€åŠ ä¸Šä½ çš„æ ¹ç›®å½•ã€‚<br>ä¾‹å¦‚ï¼šç½‘ç«™æ˜¯ <code>https://yoursite.com/blog</code>, å¼•ç”¨ä¸€å¼  <code>img/xx.png</code> å›¾ç‰‡ï¼Œåˆ™è®¾ç½® <code>background</code> ä¸º <code>url (/blog/img/xx.png)</code></p><h2 id="footer-èƒŒæ™¯ï¼ˆé¡µè„šèƒŒæ™¯ï¼‰"><a href="#footer-èƒŒæ™¯ï¼ˆé¡µè„šèƒŒæ™¯ï¼‰" class="headerlink" title="footer èƒŒæ™¯ï¼ˆé¡µè„šèƒŒæ™¯ï¼‰"></a>footer èƒŒæ™¯ï¼ˆé¡µè„šèƒŒæ™¯ï¼‰</h2><p>footer çš„èƒŒæ™¯ä¼šä¸ <code>top_img</code> çš„ä¸€è‡´ï¼Œå½“è®¾ç½® <code>false</code> æ—¶ï¼Œå°†ä¸ä¸»é¢˜è‰²ä¸€è‡´ã€‚<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># footeræ˜¯å¦æ˜¾ç¤ºå›¾ç‰‡èƒŒæ™¯(ä¸top_imgä¸€è‡´)</span></span><br><span class="line"><span class="attr">footer_bg:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="æ‰“å­—æ•ˆæœ"><a href="#æ‰“å­—æ•ˆæœ" class="headerlink" title="æ‰“å­—æ•ˆæœ"></a>æ‰“å­—æ•ˆæœ</h2><p>æ‰“å­—æ•ˆæœ <a href="https://github.com/disjukr/activate-power-mode">activate-power-mode</a><br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Typewriter Effect (æ‰“å­—æ•ˆæœ)</span></span><br><span class="line"><span class="comment"># https://github.com/disjukr/activate-power-mode</span></span><br><span class="line"><span class="attr">activate_power_mode:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">colorful:</span> <span class="literal">true</span> <span class="comment"># open particle animation (å†’å…‰ç‰¹æ•ˆ)</span></span><br><span class="line">  <span class="attr">shake:</span> <span class="literal">true</span> <span class="comment">#  open shake (æŠ–åŠ¨ç‰¹æ•ˆ)</span></span><br></pre></td></tr></table></figure><h3 id="é™æ­¢å½©å¸¦"><a href="#é™æ­¢å½©å¸¦" class="headerlink" title="é™æ­¢å½©å¸¦"></a>é™æ­¢å½©å¸¦</h3><p>å¥½çœ‹çš„å½©å¸¦èƒŒæ™¯ï¼Œå¯è®¾ç½®æ¯æ¬¡åˆ·æ–°æ›´æ¢å½©å¸¦ï¼Œæˆ–è€…æ¯æ¬¡ç‚¹å‡»æ›´æ¢å½©å¸¦<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">canvas_ribbon:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">size:</span> <span class="number">150</span></span><br><span class="line">  <span class="attr">alpha:</span> <span class="number">0.6</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">-1</span></span><br><span class="line">  <span class="attr">click_to_change:</span> <span class="literal">false</span>  <span class="comment">#è®¾ç½®æ˜¯å¦æ¯æ¬¡ç‚¹å‡»éƒ½æ›´æ¢ç¶µå¸¦</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span> <span class="comment"># false æ‰‹æœºç«¯ä¸æ˜¾ç¤º true æ‰‹æœºç«¯æ˜¾ç¤º</span></span><br></pre></td></tr></table></figure><h3 id="åŠ¨æ€å½©å¸¦"><a href="#åŠ¨æ€å½©å¸¦" class="headerlink" title="åŠ¨æ€å½©å¸¦"></a>åŠ¨æ€å½©å¸¦</h3><p>å¥½çœ‹çš„å½©å¸¦èƒŒæ™¯ï¼Œä¼šé£˜åŠ¨<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">canvas_ribbon_piao:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span> <span class="comment"># false æ‰‹æœºç«¯ä¸æ˜¾ç¤º true æ‰‹æœºç«¯æ˜¾ç¤º</span></span><br></pre></td></tr></table></figure><h3 id="canvas-nest"><a href="#canvas-nest" class="headerlink" title="canvas-nest"></a>canvas-nest</h3><p>å¥½çœ‹çš„æ˜Ÿç©ºä¾‹å­ç‰¹æ•ˆï¼Œä¼šé£˜åŠ¨<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">canvas_nest:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">&#x27;0,0,255&#x27;</span> <span class="comment">#color of lines, default: &#x27;0,0,0&#x27;; RGB values: (R,G,B).(<span class="doctag">note:</span> use &#x27;,&#x27; to separate.)</span></span><br><span class="line">  <span class="attr">opacity:</span> <span class="number">0.7</span> <span class="comment"># the opacity of line (0~1), default: 0.5.</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">-1</span> <span class="comment"># z-index property of the background, default: -1.</span></span><br><span class="line">  <span class="attr">count:</span> <span class="number">99</span> <span class="comment"># the number of lines, default: 99.</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span> <span class="comment"># false æ‰‹æœºç«¯ä¸æ˜¾ç¤º true æ‰‹æœºç«¯æ˜¾ç¤º</span></span><br></pre></td></tr></table></figure><h2 id="é¼ æ ‡ç‚¹å‡»æ•ˆæœ"><a href="#é¼ æ ‡ç‚¹å‡»æ•ˆæœ" class="headerlink" title="é¼ æ ‡ç‚¹å‡»æ•ˆæœ"></a>é¼ æ ‡ç‚¹å‡»æ•ˆæœ</h2><h2 id="çƒŸèŠ±"><a href="#çƒŸèŠ±" class="headerlink" title="çƒŸèŠ±"></a>çƒŸèŠ±</h2><p>zIndex å»ºè®®åªåœ¨ -1 å’Œ 9999 ä¸Šé€‰<br>-1 ä»£è¡¨çƒŸç«æ•ˆæœåœ¨åº•éƒ¨<br>9999 ä»£è¡¨çƒŸç«æ•ˆæœåœ¨å‰é¢<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">fireworks:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">9999</span> <span class="comment"># -1 or 9999</span></span><br></pre></td></tr></table></figure><h3 id="çˆ±å¿ƒ"><a href="#çˆ±å¿ƒ" class="headerlink" title="çˆ±å¿ƒ"></a>çˆ±å¿ƒ</h3><p>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç‚¹å‡»å‡ºç°çˆ±å¿ƒ</span></span><br><span class="line"><span class="attr">click_heart:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="æ–‡å­—"><a href="#æ–‡å­—" class="headerlink" title="æ–‡å­—"></a>æ–‡å­—</h3><p>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç‚¹å‡»å‡ºç°æ–‡å­—ï¼Œæ–‡å­—å¯è‡ªè¡Œä¿®æ”¹</span></span><br><span class="line"><span class="attr">ClickShowText:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">text:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">I</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">LOVE</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">YOU</span></span><br><span class="line">  <span class="attr">fontSize:</span> <span class="string">15px</span></span><br></pre></td></tr></table></figure><h2 id="é¡µé¢ç¾åŒ–"><a href="#é¡µé¢ç¾åŒ–" class="headerlink" title="é¡µé¢ç¾åŒ–"></a>é¡µé¢ç¾åŒ–</h2><p>ä¼šæ”¹å˜ olã€ulã€h1-h5 çš„æ ·å¼<br><code>field</code> é…ç½®ç”Ÿæ•ˆçš„åŒºåŸŸ</p><ul><li>post åªåœ¨æ–‡ç« é¡µç”Ÿæ•ˆ</li><li>site åœ¨å…¨ç«™ç”Ÿæ•ˆ<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¾åŒ–é¡µé¢æ˜¾ç¤º</span></span><br><span class="line"><span class="attr">beautify:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">site</span> <span class="comment"># site/post</span></span><br><span class="line">  <span class="attr">title-prefix-icon:</span> <span class="string">&#x27;\f0c1&#x27;</span></span><br><span class="line">  <span class="attr">title-prefix-icon-color:</span> <span class="string">&quot;#F47466&quot;</span></span><br></pre></td></tr></table></figure><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format34.png" alt="format34"></p><p>å¯¹æ¯”å¦‚ä¸‹</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format35.png" alt="format35"></p><h3 id="å…¨å±€å­—ä½“"><a href="#å…¨å±€å­—ä½“" class="headerlink" title="å…¨å±€å­—ä½“"></a>å…¨å±€å­—ä½“</h3><p>å¯è‡ªè¡Œè®¾ç½®å­—ä½“çš„ <code>font-family</code><br>å¦‚ä¸éœ€è¦é…ç½®ï¼Œè¯·ç•™ç©º<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">global-font-size:</span></span><br><span class="line">  <span class="attr">code-font-size:</span></span><br><span class="line">  <span class="attr">font-family:</span> <span class="string">-apple-system,</span> <span class="string">BlinkMacSystemFont,</span> <span class="string">&quot;Segoe UI&quot;</span><span class="string">,</span> <span class="string">&quot;Helvetica Neue&quot;</span><span class="string">,</span> <span class="string">Lato,</span> <span class="string">Roboto,</span> <span class="string">&quot;PingFang SC&quot;</span><span class="string">,</span> <span class="string">&quot;Microsoft JhengHei&quot;</span><span class="string">,</span> <span class="string">&quot;Microsoft YaHei&quot;</span><span class="string">,</span> <span class="string">sans-serif</span></span><br><span class="line">  <span class="attr">code-font-family:</span> <span class="string">consolas,</span> <span class="string">Menlo,</span> <span class="string">&quot;PingFang SC&quot;</span><span class="string">,</span> <span class="string">&quot;Microsoft JhengHei&quot;</span><span class="string">,</span> <span class="string">&quot;Microsoft YaHei&quot;</span><span class="string">,</span> <span class="string">sans-serif</span></span><br></pre></td></tr></table></figure><h3 id="Blog-æ ‡é¢˜å­—ä½“"><a href="#Blog-æ ‡é¢˜å­—ä½“" class="headerlink" title="Blog æ ‡é¢˜å­—ä½“"></a>Blog æ ‡é¢˜å­—ä½“</h3><p>å¯è‡ªè¡Œè®¾ç½®å­—ä½“çš„ <code>font-family</code><br>å¦‚ä¸éœ€è¦é…ç½®ï¼Œè¯·ç•™ç©º<br>å¦‚ä¸éœ€è¦ä½¿ç”¨ç½‘ç»œå­—ä½“ï¼Œåªéœ€è¦æŠŠ font_link ç•™ç©ºå°±è¡Œ<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">blog_title_font:</span></span><br><span class="line">  <span class="attr">font_link:</span> <span class="string">https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap</span></span><br><span class="line">  <span class="attr">font-family:</span> <span class="string">Titillium</span> <span class="string">Web,</span> <span class="string">&#x27;PingFang SC&#x27;</span><span class="string">,</span> <span class="string">&#x27;Hiragino Sans GB&#x27;</span><span class="string">,</span> <span class="string">&#x27;Microsoft JhengHei&#x27;</span><span class="string">,</span> <span class="string">&#x27;Microsoft YaHei&#x27;</span><span class="string">,</span> <span class="string">sans-serif</span></span><br></pre></td></tr></table></figure><h2 id="ç½‘ç«™å‰¯æ ‡é¢˜"><a href="#ç½‘ç«™å‰¯æ ‡é¢˜" class="headerlink" title="ç½‘ç«™å‰¯æ ‡é¢˜"></a>ç½‘ç«™å‰¯æ ‡é¢˜</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">å¯è®¾ç½®ä¸»é¡µä¸­æ˜¾ç¤ºçš„ç½‘ç«™å‰¯æ ‡é¢˜æˆ–è€…å–œæ¬¢çš„åº§å³é“­ã€‚</span></span><br><span class="line"><span class="string">ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶_config.butterfly.ymlï¼š</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸»é¡µsubtitle</span></span><br><span class="line"><span class="attr">subtitle:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># æ‰“å­—æ•ˆæœ</span></span><br><span class="line">  <span class="attr">effect:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># å¾ªç¯æˆ–è€…åªæ‰“å­—ä¸€æ¬¡</span></span><br><span class="line">  <span class="attr">loop:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># sourceè°ƒç”¨ç¬¬ä¸‰æ–¹æœåŠ¡</span></span><br><span class="line">  <span class="comment"># source: false å…³é—­è°ƒç”¨</span></span><br><span class="line">  <span class="comment"># source: 1  è°ƒç”¨æå¤©apiçš„éšæœºè¯­å½•ï¼ˆç®€ä½“ï¼‰ https://api.btstu.cn/</span></span><br><span class="line">  <span class="comment"># source: 2  è°ƒç”¨ä¸€è¨€ç½‘çš„ä¸€å¥è¯ï¼ˆç®€ä½“ï¼‰ https://hitokoto.cn/</span></span><br><span class="line">  <span class="comment"># source: 3  è°ƒç”¨ä¸€å¥ç½‘ï¼ˆç®€ä½“ï¼‰ http://yijuzhan.com/</span></span><br><span class="line">  <span class="comment"># source: 4  è°ƒç”¨ä»Šæ—¥è¯—è¯ï¼ˆç®€ä½“ï¼‰ https://www.jinrishici.com/</span></span><br><span class="line">  <span class="comment"># subtitle ä¼šå…ˆæ˜¾ç¤º source , å†æ˜¾ç¤º sub çš„å†…å®¹</span></span><br><span class="line">  <span class="attr">source:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># å¦‚æœæœ‰è‹±æ–‡é€—å·&#x27; , &#x27;,è¯·ä½¿ç”¨è½¬ä¹‰å­—å…ƒ &amp;#44;</span></span><br><span class="line">  <span class="comment"># å¦‚æœæœ‰è‹±æ–‡åŒå¼•å·&#x27; &quot; &#x27;,è¯·ä½¿ç”¨è½¬ä¹‰å­—å…ƒ &amp;quot;</span></span><br><span class="line">  <span class="comment"># å¼€å¤´ä¸å…è®¸è½¬ä¹‰å­—å…ƒï¼Œå¦‚éœ€è¦ï¼Œè¯·æŠŠæ•´ä¸ªå¥å­ç”¨åŒå¼•å·åŒ…ä½</span></span><br><span class="line">  <span class="comment"># ä¾‹å¦‚ â€&amp;quotNever put off till tomorrow what you can do today&amp;quot&quot;</span></span><br><span class="line">  <span class="comment"># å¦‚æœå…³é—­æ‰“å­—æ•ˆæœï¼Œsubtitleåªä¼šæ˜¾ç¤ºsubçš„ç¬¬ä¸€è¡Œæ–‡å­—</span></span><br><span class="line">  <span class="attr">sub:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ä»Šæ—¥äº‹&amp;#44;ä»Šæ—¥æ¯•</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">Never</span> <span class="string">put</span> <span class="string">off</span> <span class="string">till</span> <span class="string">tomorrow</span> <span class="string">what</span> <span class="string">you</span> <span class="string">can</span> <span class="string">do</span> <span class="string">today</span></span><br></pre></td></tr></table></figure><h2 id="ä¸»é¡µ-top-img-æ˜¾ç¤ºå¤§å°"><a href="#ä¸»é¡µ-top-img-æ˜¾ç¤ºå¤§å°" class="headerlink" title="ä¸»é¡µ top_img æ˜¾ç¤ºå¤§å°"></a>ä¸»é¡µ top_img æ˜¾ç¤ºå¤§å°</h2><p>é»˜è®¤çš„æ˜¾ç¤ºä¸ºå…¨å±ã€‚site-info çš„åŒºåŸŸä¼šå±…ä¸­æ˜¾ç¤º<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸»é¡µè®¾ç½®</span></span><br><span class="line"><span class="comment"># é»˜è®¤top_imgå…¨å±ï¼Œsite_infoåœ¨ä¸­é—´</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨é»˜è®¤, éƒ½æ— éœ€å¡«å†™ï¼ˆå»ºè®®é»˜è®¤ï¼‰</span></span><br><span class="line"><span class="attr">index_site_info_top:</span> <span class="comment"># ä¸»é¡µæ ‡é¢˜è·ç¦»é¡¶éƒ¨è·ç¦»  ä¾‹å¦‚ 300px/300em/300rem/10%</span></span><br><span class="line"><span class="attr">index_top_img_height:</span>  <span class="comment">#ä¸»é¡µtop_imgé«˜åº¦ ä¾‹å¦‚ 300px/300em/300rem  ä¸èƒ½ä½¿ç”¨ç™¾åˆ†æ¯”</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šindex_top_img_height çš„å€¼ä¸èƒ½ä½¿ç”¨ç™¾åˆ†æ¯”ã€‚<br>2 ä¸ªéƒ½ä¸å¡«çš„è¯ï¼Œä¼šä½¿ç”¨é»˜è®¤å€¼</p><h2 id="é¡µé¢åŠ è½½åŠ¨ç”»-preloader"><a href="#é¡µé¢åŠ è½½åŠ¨ç”»-preloader" class="headerlink" title="é¡µé¢åŠ è½½åŠ¨ç”» preloader"></a>é¡µé¢åŠ è½½åŠ¨ç”» preloader</h2><p>å½“è¿›å…¥ç½‘é¡µæ—¶ï¼Œå› ä¸ºåŠ è½½é€Ÿåº¦çš„é—®é¢˜ï¼Œå¯èƒ½ä¼šå¯¼è‡´ top_img å›¾ç‰‡å‡ºç°æ–­å±‚æ˜¾ç¤ºï¼Œæˆ–è€…ç½‘é¡µåŠ è½½ä¸å…¨è€Œå‡ºç°ç­‰å¾…æ—¶é—´ï¼Œå¼€å¯ preloader åï¼Œä¼šæ˜¾ç¤ºåŠ è½½åŠ¨ç”»ï¼Œç­‰é¡µé¢åŠ è½½å®Œï¼ŒåŠ è½½åŠ¨ç”»ä¼šæ¶ˆå¤±ã€‚<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶_config.butterfly.ymlï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">preloader:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="PWA"><a href="#PWA" class="headerlink" title="PWA"></a>PWA</h2><p>PWAç®€å•æ¥è¯´å°±æ˜¯è®©ç½‘ç«™æœ‰Appä½“éªŒ,è¦ä¸º Butterfly é…ä¸Š PWA ç‰¹æ€§ï¼Œä½ éœ€è¦å¦‚ä¸‹å‡ ä¸ªæ­¥éª¤:</p><ol><li>æ‰“å¼€ hexo å·¥ä½œç›®å½•</li><li><code>npm install hexo-offline --save</code> æˆ–è€… <code>yarn add hexo-offline</code></li><li>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># offline config passed to sw-precache.</span></span><br><span class="line"><span class="attr">offline:</span></span><br><span class="line">  <span class="attr">maximumFileSizeToCacheInBytes:</span> <span class="number">10485760</span> <span class="comment"># ç¼“å­˜çš„æœ€å¤§æ–‡ä»¶å¤§å°ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½</span></span><br><span class="line">  <span class="attr">staticFileGlobs:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">public/**/*.&#123;js,html,css,png,jpg,gif,svg,webp,eot,ttf,woff,woff2&#125;</span></span><br><span class="line">  <span class="comment"># é™æ€æ–‡ä»¶åˆé›†ï¼Œå¦‚æœä½ çš„ç«™ç‚¹ä½¿ç”¨äº†ä¾‹å¦‚webpæ ¼å¼çš„æ–‡ä»¶ï¼Œè¯·å°†æ–‡ä»¶ç±»å‹æ·»åŠ è¿›å»ã€‚</span></span><br><span class="line">  <span class="attr">stripPrefix:</span> <span class="string">public</span></span><br><span class="line">  <span class="attr">verbose:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">runtimeCaching:</span></span><br><span class="line">    <span class="comment"># CDNs - should be cacheFirst, since they should be used specific versions so should not change</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">urlPattern:</span> <span class="string">/*</span> <span class="comment"># å¦‚æœä½ éœ€è¦åŠ è½½CDNèµ„æºï¼Œè¯·é…ç½®è¯¥é€‰é¡¹ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥ä¸é…ç½®ã€‚</span></span><br><span class="line">      <span class="attr">handler:</span> <span class="string">cacheFirst</span></span><br><span class="line">      <span class="attr">options:</span></span><br><span class="line">        <span class="attr">origin:</span> <span class="string">your_websie_url</span> <span class="comment"># å¯æ›¿æ¢æˆä½ çš„ url</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ›´å¤šå†…å®¹è¯·æŸ¥çœ‹ <a href="https://github.com/JLHwung/hexo-offline">hexo-offline</a> çš„å®˜æ–¹æ–‡æ¡£</p><p>1 åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­å¼€å¯ pwa é€‰é¡¹ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pwa:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">manifest:</span> <span class="string">/img/pwa/manifest.json</span></span><br><span class="line">  <span class="attr">apple_touch_icon:</span> <span class="string">/img/pwa/apple-touch-icon.png</span></span><br><span class="line">  <span class="attr">favicon_32_32:</span> <span class="string">/img/pwa/32.png</span></span><br><span class="line">  <span class="attr">favicon_16_16:</span> <span class="string">/img/pwa/16.png</span></span><br><span class="line">  <span class="attr">mask_icon:</span> <span class="string">/img/pwa/safari-pinned-tab.svg</span></span><br></pre></td></tr></table></figure><p>2 åœ¨åˆ›å»º source/ ç›®å½•ä¸­åˆ›å»º manifest.json æ–‡ä»¶ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;name&quot;:</span> <span class="string">&quot;string&quot;</span>, <span class="string">//åº”ç”¨å…¨ç§°</span></span><br><span class="line">    <span class="attr">&quot;short_name&quot;:</span> <span class="string">&quot;Junzhou&quot;</span>, <span class="string">//åº”ç”¨ç®€ç§°</span></span><br><span class="line">    <span class="attr">&quot;theme_color&quot;:</span> <span class="string">&quot;#49b1f5&quot;</span>, <span class="string">//åŒ¹é…æµè§ˆå™¨çš„åœ°å€æ é¢œè‰²</span></span><br><span class="line">    <span class="attr">&quot;background_color&quot;:</span> <span class="string">&quot;#49b1f5&quot;</span>,<span class="string">//åŠ è½½åº”ç”¨æ—¶çš„èƒŒæ™¯è‰²</span></span><br><span class="line">    <span class="attr">&quot;display&quot;:</span> <span class="string">&quot;standalone&quot;</span>,<span class="string">//é¦–é€‰æ˜¾ç¤ºæ¨¡å¼</span> <span class="string">å…¶ä»–é€‰é¡¹æœ‰ï¼šfullscreen</span>,<span class="string">minimal-ui</span>,<span class="string">browser</span></span><br><span class="line">    <span class="attr">&quot;scope&quot;:</span> <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;start_url&quot;:</span> <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;icons&quot;:</span> [ <span class="string">//è¯¥æ•°ç»„æŒ‡å®šiconså›¾æ ‡å‚æ•°ï¼Œç”¨æ¥æ—¶é€‚é…ä¸åŒè®¾å¤‡ï¼ˆéœ€ä¸ºpngï¼Œè‡³å°‘åŒ…å«ä¸€ä¸ª192px*192pxçš„å›¾æ ‡ï¼‰</span></span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;src&quot;:</span> <span class="string">&quot;images/pwaicons/36.png&quot;</span>, <span class="string">//å›¾æ ‡æ–‡ä»¶çš„ç›®å½•ï¼Œéœ€åœ¨source/ç›®å½•ä¸‹è‡ªè¡Œåˆ›å»ºã€‚</span></span><br><span class="line">          <span class="attr">&quot;sizes&quot;:</span> <span class="string">&quot;36x36&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;:</span> <span class="string">&quot;image/png&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;src&quot;:</span> <span class="string">&quot;images/pwaicons/48.png&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;sizes&quot;:</span> <span class="string">&quot;48x48&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;:</span> <span class="string">&quot;image/png&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;src&quot;:</span> <span class="string">&quot;images/pwaicons/72.png&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;sizes&quot;:</span> <span class="string">&quot;72x72&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;:</span> <span class="string">&quot;image/png&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;src&quot;:</span> <span class="string">&quot;images/pwaicons/96.png&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;sizes&quot;:</span> <span class="string">&quot;96x96&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;:</span> <span class="string">&quot;image/png&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;src&quot;:</span> <span class="string">&quot;images/pwaicons/144.png&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;sizes&quot;:</span> <span class="string">&quot;144x144&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;:</span> <span class="string">&quot;image/png&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;src&quot;:</span> <span class="string">&quot;images/pwaicons/192.png&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;sizes&quot;:</span> <span class="string">&quot;192x192&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;:</span> <span class="string">&quot;image/png&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;src&quot;:</span> <span class="string">&quot;images/pwaicons/512.png&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;sizes&quot;:</span> <span class="string">&quot;512x512&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;type&quot;:</span> <span class="string">&quot;image/png&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">&quot;splash_pages&quot;:</span> <span class="literal">null</span> <span class="string">//é…ç½®è‡ªå®šä¹‰å¯åŠ¨åŠ¨ç”»ã€‚</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½ ä¹Ÿå¯ä»¥é€šè¿‡ Web App Manifest å¿«é€Ÿåˆ›å»º manifest.jsonã€‚ï¼ˆWeb App Manifest è¦æ±‚è‡³å°‘åŒ…å«ä¸€ä¸ª 512*512 åƒç´ çš„å›¾æ ‡ï¼‰</p><p>å¯ä»¥é€šè¿‡ Chrome æ’ä»¶ Lighthouse æ£€æŸ¥ PWA é…ç½®æ˜¯å¦ç”Ÿæ•ˆä»¥åŠé…ç½®æ˜¯å¦æ­£ç¡®ã€‚<br>æ‰“å¼€åšå®¢é¡µé¢<br>å¯åŠ¨ Lighthouse æ’ä»¶ (Lighthouse æ’ä»¶è¦æ±‚è‡³å°‘åŒ…å«ä¸€ä¸ª 512*512 åƒç´ çš„å›¾æ ‡)<br>å…³äº PWAï¼ˆæ¸è¿›å¼å¢å¼º Web åº”ç”¨ï¼‰çš„æ›´å¤šå†…å®¹è¯·å‚é–² Google Tools for Web Developers</p><h2 id="å›¾ç‰‡å¤§å›¾æŸ¥çœ‹æ¨¡å¼fancybox"><a href="#å›¾ç‰‡å¤§å›¾æŸ¥çœ‹æ¨¡å¼fancybox" class="headerlink" title="å›¾ç‰‡å¤§å›¾æŸ¥çœ‹æ¨¡å¼fancybox"></a>å›¾ç‰‡å¤§å›¾æŸ¥çœ‹æ¨¡å¼fancybox</h2><p>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># fancybox http://fancyapps.com/fancybox/3/</span></span><br><span class="line"><span class="attr">fancybox:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="medium-zoom"><a href="#medium-zoom" class="headerlink" title="medium_zoom"></a>medium_zoom</h2><p>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">medium_zoom:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="Snackbar-å¼¹çª—"><a href="#Snackbar-å¼¹çª—" class="headerlink" title="Snackbar å¼¹çª—"></a>Snackbar å¼¹çª—</h2><p>Snackbar å¼¹çª—ï¼Œæ ¹æ®è‡ªå·±çˆ±å¥½å¼€å¯<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">snackbar:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">bottom-left</span></span><br><span class="line">  <span class="attr">bg_light:</span> <span class="string">&#x27;#49b1f5&#x27;</span> <span class="comment">#light modeæ—¶å¼¹çª—èƒŒæ™¯</span></span><br><span class="line">  <span class="attr">bg_dark:</span> <span class="string">&#x27;#2d3035&#x27;</span> <span class="comment">#dark modeæ—¶å¼¹çª—èƒŒæ™¯</span></span><br></pre></td></tr></table></figure><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format36.gif" alt="format36"></p><h2 id="è±†ç“£"><a href="#è±†ç“£" class="headerlink" title="è±†ç“£"></a>è±†ç“£</h2><p>å¾ˆå¤šäººä½¿ç”¨ <a href="https://github.com/mythsman/hexo-douban">hexo-douban</a> è¿™æ¬¾æ’ä»¶ã€‚ä½†æ˜¯è¯¥æ’ä»¶æ˜¯ç›´æ¥ç”Ÿæˆç›¸åº”çš„ç½‘é¡µï¼Œè€Œä¸ä¼šå»è¯»å–å¯¹åº”çš„ markdown æ–‡ä»¶ã€‚å› æ­¤ï¼Œå¯åœ¨è®¾ç½®é‡Œè¿›è¡Œç›¸åº”çš„é…ç½®ã€‚<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¦‚æœä½ æœ‰ä½¿ç”¨hexo-doubanï¼Œå¯é…ç½®è¿™ä¸ª</span></span><br><span class="line"><span class="attr">douban:</span></span><br><span class="line">  <span class="attr">meta:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">movies_img:</span> <span class="string">https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/movie.jpg</span></span><br><span class="line">  <span class="attr">books_img:</span></span><br><span class="line">  <span class="attr">games_img:</span></span><br></pre></td></tr></table></figure><h2 id="Pjax"><a href="#Pjax" class="headerlink" title="Pjax"></a>Pjax</h2><p>å½“ç”¨æˆ·ç‚¹å‡»é“¾æ¥ï¼Œé€šè¿‡ ajax æ›´æ–°é¡µé¢éœ€è¦å˜åŒ–çš„éƒ¨åˆ†ï¼Œç„¶åä½¿ç”¨ HTML5 çš„ pushState ä¿®æ”¹æµè§ˆå™¨çš„ URL åœ°å€ã€‚<br>è¿™æ ·å¯ä»¥ä¸ç”¨é‡å¤åŠ è½½ç›¸åŒçš„èµ„æºï¼ˆcss/jsï¼‰ï¼Œ ä»è€Œæå‡ç½‘é¡µçš„åŠ è½½é€Ÿåº¦ã€‚<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¦‚æœä½ æœ‰ä½¿ç”¨hexo-doubanï¼Œå¯é…ç½®è¿™ä¸ª</span></span><br><span class="line"><span class="attr">pjax:</span> </span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">/music/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">/no-pjax/</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åšå®¢æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åšå®¢æ­å»º </tag>
            
            <tag> hexo </tag>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è´Ÿè½½å‡è¡¡æœ€çŸ­å“åº”ç­–ç•¥</title>
      <link href="/2022/01/19/dubbo%E6%96%B0%E5%A2%9E%E6%9C%80%E7%9F%AD%E5%93%8D%E5%BA%94%E6%97%B6%E9%97%B4-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%AD%96%E7%95%A5%E5%88%86%E6%9E%90/"/>
      <url>/2022/01/19/dubbo%E6%96%B0%E5%A2%9E%E6%9C%80%E7%9F%AD%E5%93%8D%E5%BA%94%E6%97%B6%E9%97%B4-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%AD%96%E7%95%A5%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h3 id="2020-å¹´-5-æœˆ-15-æ—¥ï¼ŒDubbo-å‘å¸ƒ-2-7-7-release-ç‰ˆæœ¬ã€‚å…¶ä¸­æœ‰è¿™ä¹ˆä¸€ä¸ª-Features"><a href="#2020-å¹´-5-æœˆ-15-æ—¥ï¼ŒDubbo-å‘å¸ƒ-2-7-7-release-ç‰ˆæœ¬ã€‚å…¶ä¸­æœ‰è¿™ä¹ˆä¸€ä¸ª-Features" class="headerlink" title="2020 å¹´ 5 æœˆ 15 æ—¥ï¼ŒDubbo å‘å¸ƒ 2.7.7 release ç‰ˆæœ¬ã€‚å…¶ä¸­æœ‰è¿™ä¹ˆä¸€ä¸ª Features"></a><strong>2020 å¹´ 5 æœˆ 15 æ—¥ï¼ŒDubbo å‘å¸ƒ 2.7.7 release ç‰ˆæœ¬ã€‚å…¶ä¸­æœ‰è¿™ä¹ˆä¸€ä¸ª Features</strong></h3><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format.png" alt="format"></p><p>æ–°å¢ä¸€ä¸ªè´Ÿè½½å‡è¡¡ç­–ç•¥ã€‚</p><p>å…ˆçœ‹ä¸€ä¸‹æäº¤è®°å½•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/chickenlj/incubator-dubbo/commit/6d2ba7ec7b5a1cb7971143d4262d0a1bfc826d45</span><br></pre></td></tr></table></figure><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format1.png" alt="format1"></p><p>è´Ÿè½½å‡è¡¡æ˜¯åŸºäº SPI å®ç°çš„ï¼Œæˆ‘ä»¬çœ‹åˆ°å¯¹åº”çš„æ–‡ä»¶ä¸­å¤šäº†ä¸€ä¸ªåä¸º shortestresponse çš„ keyã€‚</p><p>è¿™ä¸ªï¼Œå°±æ˜¯æ–°å¢çš„è´Ÿè½½å‡è¡¡ç­–ç•¥äº†ã€‚çœ‹åå­—ï¼Œä½ ä¹ŸçŸ¥é“äº†è¿™ä¸ªç­–ç•¥çš„åç§°å°±å«ï¼šæœ€çŸ­å“åº”ã€‚</p><p>æ‰€ä»¥æˆªæ­¢ 2.7.7 ç‰ˆæœ¬ï¼Œå®˜æ–¹æä¾›äº†äº”ç§è´Ÿè½½å‡è¡¡ç®—æ³•äº†ï¼Œä»–ä»¬åˆ†åˆ«æ˜¯ï¼š</p><ol><li>ConsistentHashLoadBalance ä¸€è‡´æ€§å“ˆå¸Œè´Ÿè½½å‡è¡¡</li><li>LeastActiveLoadBalance æœ€å°æ´»è·ƒæ•°è´Ÿè½½å‡è¡¡</li><li>RandomLoadBalance åŠ æƒéšæœºè´Ÿè½½å‡è¡¡</li><li>RoundRobinLoadBalance åŠ æƒè½®è¯¢è´Ÿè½½å‡è¡¡</li><li>ShortestResponseLoadBalance æœ€çŸ­å“åº”æ—¶é—´è´Ÿè½½å‡è¡¡</li></ol><p>æœ€çŸ­å“åº”æ—¶é—´è´Ÿè½½å‡è¡¡</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™ä¸ªç±»ä¸Šçš„æ³¨è§£ï¼Œå…ˆæœ‰ä¸ªæ•´ä½“çš„è®¤çŸ¥ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.apache.dubbo.rpc.cluster.loadbalance.ShortestResponseLoadBalance</span><br></pre></td></tr></table></figure><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format2.png" alt="format2"></p><p>ç¿»è¯‘ä¸€ä¸‹æ˜¯ä»€ä¹ˆæ„æ€ï¼š</p><ol><li>ä»å¤šä¸ªæœåŠ¡æä¾›è€…ä¸­é€‰æ‹©å‡ºè°ƒç”¨æˆåŠŸçš„ä¸”å“åº”æ—¶é—´æœ€çŸ­çš„æœåŠ¡æä¾›è€…ï¼Œç”±äºæ»¡è¶³è¿™æ ·æ¡ä»¶çš„æœåŠ¡æä¾›è€…æœ‰å¯èƒ½æœ‰å¤šä¸ªã€‚æ‰€ä»¥å½“é€‰æ‹©å‡ºå¤šä¸ªæœåŠ¡æä¾›è€…åè¦æ ¹æ®ä»–ä»¬çš„æƒé‡åšåˆ†æã€‚</li><li>ä½†æ˜¯å¦‚æœåªé€‰æ‹©å‡ºæ¥äº†ä¸€ä¸ªï¼Œç›´æ¥ç”¨é€‰å‡ºæ¥è¿™ä¸ªã€‚</li><li>å¦‚æœçœŸçš„æœ‰å¤šä¸ªï¼Œçœ‹å®ƒä»¬çš„æƒé‡æ˜¯å¦ä¸€æ ·ï¼Œå¦‚æœä¸ä¸€æ ·ï¼Œåˆ™èµ°åŠ æƒéšæœºç®—æ³•çš„é€»è¾‘ã€‚</li><li>å¦‚æœå®ƒä»¬çš„æƒé‡æ˜¯ä¸€æ ·çš„ï¼Œåˆ™éšæœºè°ƒç”¨ä¸€ä¸ªã€‚</li></ol><p>å†é…ä¸ªå›¾ï¼Œå°±å¥½ç†è§£äº†ï¼Œå¯ä»¥å…ˆä¸ç®¡å›¾ç‰‡ä¸­çš„æ ‡å·ï¼š</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format3.png" alt="format3"></p><p>æœ‰äº†ä¸Šé¢çš„æ•´ä½“æ¦‚å¿µçš„é“ºå«äº†ï¼Œæ¥ä¸‹æ¥åˆ†ææºç çš„æ—¶å€™å°±ç®€å•äº†ã€‚</p><p>æºç ä¸€å…±å°± 66 è¡Œï¼Œæˆ‘æŠŠå®ƒåˆ†ä¸º 5 ä¸ªç‰‡æ®µå»ä¸€ä¸€åˆ†æã€‚</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format4.png" alt="format4"></p><p>è¿™é‡Œä¸€åˆ°äº”çš„æ ‡å·ï¼Œå¯¹åº”ä¸Šé¢æµç¨‹å›¾ä¸­çš„æ ‡å·ã€‚æˆ‘ä»¬ä¸€ä¸ªä¸ªçš„è¯´ã€‚</p><h2 id="æ ‡å·ä¸ºâ‘ çš„éƒ¨åˆ†"><a href="#æ ‡å·ä¸ºâ‘ çš„éƒ¨åˆ†" class="headerlink" title="æ ‡å·ä¸ºâ‘ çš„éƒ¨åˆ†"></a>æ ‡å·ä¸ºâ‘ çš„éƒ¨åˆ†</h2><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format5.png" alt="format5"></p><p>è¿™ä¸€éƒ¨åˆ†æ˜¯å®šä¹‰å¹¶åˆå§‹åŒ–ä¸€äº›å‚æ•°ï¼Œä¸ºæ¥ä¸‹æ¥çš„ä»£ç æœåŠ¡çš„ï¼Œç¿»è¯‘ä¸€ä¸‹æ¯ä¸ªå‚æ•°å¯¹åº”çš„æ³¨é‡Šï¼š</p><p>length å‚æ•°ï¼šæœåŠ¡æä¾›è€…çš„æ•°é‡ã€‚</p><p>shortestResponse å‚æ•°ï¼šæ‰€æœ‰æœåŠ¡æä¾›è€…çš„ä¼°è®¡æœ€çŸ­å“åº”æ—¶é—´ã€‚ï¼ˆè¿™ä¸ªåœ°æ–¹æˆ‘è§‰å¾—æ³¨é‡Šæè¿°çš„ä¸å¤ªå‡†ç¡®ï¼Œçœ‹åé¢çš„ä»£ç å¯ä»¥çŸ¥é“è¿™åªæ˜¯ä¸€ä¸ªé›¶æ—¶å˜é‡ï¼Œåœ¨å¾ªç¯ä¸­å­˜å‚¨å½“å‰æœ€çŸ­å“åº”æ—¶é—´æ˜¯å¤šå°‘ã€‚ï¼‰</p><p>shortCount å‚æ•°ï¼šå…·æœ‰ç›¸åŒæœ€çŸ­å“åº”æ—¶é—´çš„æœåŠ¡æä¾›è€…ä¸ªæ•°ï¼Œåˆå§‹åŒ–ä¸º 0ã€‚</p><p>shortestIndexes å‚æ•°ï¼šæ•°ç»„é‡Œé¢æ”¾çš„æ˜¯å…·æœ‰ç›¸åŒæœ€çŸ­å“åº”æ—¶é—´çš„æœåŠ¡æä¾›è€…çš„ä¸‹æ ‡ã€‚</p><p>weights å‚æ•°ï¼šæ¯ä¸€ä¸ªæœåŠ¡æä¾›è€…çš„æƒé‡ã€‚</p><p>totalWeight å‚æ•°ï¼šå¤šä¸ªå…·æœ‰ç›¸åŒæœ€çŸ­å“åº”æ—¶é—´çš„æœåŠ¡æä¾›è€…å¯¹åº”çš„é¢„çƒ­ï¼ˆé¢„çƒ­è¿™ä¸ªç‚¹è¿˜æ˜¯æŒºé‡è¦çš„ï¼Œåœ¨ä¸‹é¢è®²æœ€å°æ´»è·ƒæ•°è´Ÿè½½å‡è¡¡çš„æ—¶å€™æœ‰è¯¦ç»†è¯´æ˜ï¼‰æƒé‡ä¹‹å’Œã€‚</p><p>firstWeight å‚æ•°ï¼šç¬¬ä¸€ä¸ªå…·æœ‰æœ€çŸ­å“åº”æ—¶é—´çš„æœåŠ¡æä¾›è€…çš„æƒé‡ã€‚</p><p>sameWeight å‚æ•°ï¼šå¤šä¸ªæ»¡è¶³æ¡ä»¶çš„æä¾›è€…çš„æƒé‡æ˜¯å¦ä¸€è‡´ã€‚</p><h2 id="æ ‡å·ä¸ºâ‘¡çš„éƒ¨åˆ†"><a href="#æ ‡å·ä¸ºâ‘¡çš„éƒ¨åˆ†" class="headerlink" title="æ ‡å·ä¸ºâ‘¡çš„éƒ¨åˆ†"></a>æ ‡å·ä¸ºâ‘¡çš„éƒ¨åˆ†</h2><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format6.png" alt="format6"></p><p>è¿™ä¸€éƒ¨åˆ†ä»£ç çš„å…³é”®ï¼Œå°±åœ¨ä¸Šé¢æ¡†èµ·æ¥çš„éƒ¨åˆ†ã€‚è€Œæ¡†èµ·æ¥çš„éƒ¨åˆ†ï¼Œæœ€å…³é”®çš„åœ°æ–¹ï¼Œå°±åœ¨äºç¬¬ä¸€è¡Œã€‚</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format7.png" alt="format7"></p><p>è·å–è°ƒç”¨æˆåŠŸçš„å¹³å‡æ—¶é—´ã€‚</p><p>æˆåŠŸè°ƒç”¨çš„å¹³å‡æ—¶é—´æ€ä¹ˆç®—çš„ï¼Ÿ</p><p>è°ƒç”¨æˆåŠŸçš„è¯·æ±‚æ•°æ€»æ•°å¯¹åº”çš„æ€»è€—æ—¶ / è°ƒç”¨æˆåŠŸçš„è¯·æ±‚æ•°æ€»æ•° = æˆåŠŸè°ƒç”¨çš„å¹³å‡æ—¶é—´ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨ä¸‹é¢è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œé¦–å…ˆè·å–åˆ°äº†è°ƒç”¨æˆåŠŸçš„è¯·æ±‚æ•°æ€»æ•°ï¼š</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format8.png" alt="format8"></p><p>è¿™ä¸ª succeeded å‚æ•°æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿ</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format9.png" alt="format9"></p><p>ç­”æ¡ˆå°±æ˜¯ï¼šæ€»çš„è¯·æ±‚æ•°å‡å»è¯·æ±‚å¤±è´¥çš„æ•°é‡ï¼Œå°±æ˜¯è¯·æ±‚æˆåŠŸçš„æ€»æ•°ï¼</p><p>é‚£ä¹ˆä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥è·å–è¯·æ±‚æˆåŠŸçš„æ€»æ•°å‘¢ï¼Ÿ</p><p>å› ä¸ºåœ¨ RpcStatus é‡Œé¢æ²¡æœ‰è¿™ä¸ªå‚æ•°ã€‚</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format10.png" alt="format10"></p><p>è¯·æ±‚æˆåŠŸçš„æ€»æ•°æˆ‘ä»¬æœ‰äº†ï¼Œæ¥ä¸‹æ¥æˆåŠŸæ€»è€—æ—¶æ€ä¹ˆæ‹¿åˆ°çš„å‘¢ï¼Ÿ</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format11.png" alt="format11"></p><p>ç­”æ¡ˆå°±æ˜¯ï¼šæ€»çš„è¯·æ±‚æ—¶é—´å‡å»è¯·æ±‚å¤±è´¥çš„æ€»æ—¶é—´ï¼Œå°±æ˜¯è¯·æ±‚æˆåŠŸçš„æ€»è€—æ—¶ï¼</p><p>é‚£ä¹ˆä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥è·å–è¯·æ±‚æˆåŠŸçš„æ€»è€—æ—¶å‘¢ï¼Ÿ</p><p>åˆ«é—®ï¼Œé—®å°±æ˜¯â€¦â€¦</p><p>æˆ‘ä»¬çœ‹ä¸€ä¸‹ RpcStatus ä¸­çš„è¿™å‡ ä¸ªå‚æ•°æ˜¯åœ¨å“ªé‡Œç»´æŠ¤çš„ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.apache.dubbo.rpc.RpcStatus#endCount(org.apache.dubbo.rpc.RpcStatus, long, boolean)</span><br></pre></td></tr></table></figure><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format12.png" alt="format12">å…¶ä¸­çš„ç¬¬äºŒä¸ªå…¥å‚æ˜¯æœ¬æ¬¡è¯·æ±‚è°ƒç”¨æ—¶é•¿ï¼Œç¬¬ä¸‰ä¸ªå…¥å‚æ˜¯æœ¬æ¬¡è°ƒç”¨æ˜¯å¦æˆåŠŸã€‚</p><p>å…·ä½“çš„æ–¹æ³•ä¸å¿…ç»†è¯´äº†å§ï¼Œå·²ç»æ˜¾è€Œæ˜“è§äº†ã€‚</p><p>å†å›å»çœ‹æ¡†èµ·æ¥çš„é‚£ä¸‰è¡Œä»£ç ï¼š</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format13.png" alt="format13"></p><ol><li>ç¬¬ä¸€è¡Œè·å–åˆ°äº†è¯¥æœåŠ¡æä¾›è€…æˆåŠŸè¯·æ±‚çš„å¹³å‡è€—æ—¶ã€‚</li><li>ç¬¬äºŒè¡Œè·å–çš„æ˜¯è¯¥æœåŠ¡æä¾›è€…çš„æ´»è·ƒæ•°ï¼Œä¹Ÿå°±æ˜¯å †ç§¯çš„è¯·æ±‚æ•°ã€‚</li><li>ç¬¬ä¸‰è¡Œè·å–çš„å°±æ˜¯å¦‚æœå½“å‰è¿™ä¸ªè¯·æ±‚å‘ç»™è¿™ä¸ªæœåŠ¡æä¾›è€…é¢„è®¡éœ€è¦ç­‰å¾…çš„æ—¶é—´ã€‚ä¹˜ä»¥ active çš„åŸå› æ˜¯å› ä¸ºå®ƒéœ€è¦æ’åœ¨å †ç§¯çš„è¯·æ±‚çš„åé¢å˜›ã€‚</li></ol><p>è¿™é‡Œï¼Œæˆ‘ä»¬å°±è·å–åˆ°äº†å¦‚æœé€‰æ‹©å½“å‰å¾ªç¯ä¸­çš„æœåŠ¡æä¾›è€…çš„é¢„è®¡ç­‰å¾…æ—¶é—´æ˜¯å¤šé•¿ã€‚</p><p>åé¢çš„ä»£ç æ€ä¹ˆå†™ï¼Ÿ</p><p>å½“ç„¶æ˜¯å‡ºæ¥ä¸€ä¸ªæ›´çŸ­çš„å°±æŠŠè¿™ä¸ªè¸¢å‡ºå»å‘€ï¼Œæˆ–è€…å‡ºæ¥ä¸€ä¸ªä¸€æ ·é•¿æ—¶é—´çš„å°±è®°å½•ä¸€ä¸‹ï¼Œæ¥ç€å» pk æƒé‡äº†ã€‚</p><p>æ‰€ä»¥ï¼Œæ¥ä¸‹æ¥ shortestIndexes å‚æ•°å’Œ weights å‚æ•°å°±æ’ä¸Šç”¨åœºäº†ï¼š</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format14.png" alt="format14"></p><p>å¦å¤–ï¼Œå¤šè¯´ä¸€å¥çš„ï¼Œå®ƒé‡Œé¢æœ‰è¿™æ ·çš„ä¸€è¡Œæ³¨é‡Šï¼š</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format15.png" alt="format15"></p><p>å’Œ LeastActiveLoadBalance è´Ÿè½½å‡è¡¡ç­–ç•¥ä¸€è‡´ï¼Œæˆ‘ç»™ä½ æˆªå›¾å¯¹æ¯”ä¸€ä¸‹ï¼š</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format16.png" alt="format16">å¯ä»¥çœ‹åˆ°ï¼Œç¡®å®æ˜¯éå¸¸çš„ç›¸ä¼¼ï¼Œåªæ˜¯ä¸€ä¸ªæ˜¯åˆ¤æ–­è°çš„å“åº”æ—¶é—´çŸ­ï¼Œä¸€ä¸ªæ˜¯åˆ¤æ–­è°çš„æ´»è·ƒæ•°ä½ã€‚</p><h2 id="æ ‡å·ä¸ºâ‘¢çš„åœ°æ–¹"><a href="#æ ‡å·ä¸ºâ‘¢çš„åœ°æ–¹" class="headerlink" title="æ ‡å·ä¸ºâ‘¢çš„åœ°æ–¹"></a>æ ‡å·ä¸ºâ‘¢çš„åœ°æ–¹</h2><p>æ ‡å·ä¸ºâ‘¢çš„åœ°æ–¹æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format17.png" alt="format17"></p><p>é‡Œé¢å‚æ•°çš„å«ä¹‰æˆ‘ä»¬éƒ½çŸ¥é“äº†ï¼Œæ‰€ä»¥ï¼Œæ ‡å·ä¸ºâ‘¢çš„åœ°æ–¹çš„å«ä¹‰å°±å¾ˆå¥½è§£é‡Šäº†ï¼šç»è¿‡é€‰æ‹©ååªæœ‰ä¸€ä¸ªæœåŠ¡æä¾›è€…æ»¡è¶³æ¡ä»¶ã€‚æ‰€ä»¥ï¼Œç›´æ¥ä½¿ç”¨è¿™ä¸ªæœåŠ¡æä¾›è€…ã€‚</p><h1 id="æ ‡å·ä¸ºâ‘£çš„åœ°æ–¹"><a href="#æ ‡å·ä¸ºâ‘£çš„åœ°æ–¹" class="headerlink" title="æ ‡å·ä¸ºâ‘£çš„åœ°æ–¹"></a>æ ‡å·ä¸ºâ‘£çš„åœ°æ–¹</h1><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format18.png" alt="format18"></p><p>è¿™ä¸ªåœ°æ–¹æˆ‘å°±ä¸å±•å¼€è®²äº†ï¼ˆåé¢çš„åŠ æƒéšæœºè´Ÿè½½å‡è¡¡é‚£ä¸€å°èŠ‚æœ‰è¯¦ç»†è¯´æ˜ï¼‰ï¼Œç†Ÿæ‚‰çš„æœ‹å‹ä¸€çœ¼å°±çœ‹å‡ºæ¥è¿™æ˜¯åŠ æƒéšæœºè´Ÿè½½å‡è¡¡çš„å†™æ³•äº†ã€‚</p><p>ä¸ä¿¡ï¼Ÿæˆ‘ç»™ä½ å¯¹æ¯”ä¸€ä¸‹ï¼š</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format19.png" alt="format19"></p><p>ä½ çœ‹ï¼Œæ˜¯ä¸æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚</p><h1 id="æ ‡å·ä¸ºâ‘¤çš„åœ°æ–¹"><a href="#æ ‡å·ä¸ºâ‘¤çš„åœ°æ–¹" class="headerlink" title="æ ‡å·ä¸ºâ‘¤çš„åœ°æ–¹"></a>æ ‡å·ä¸ºâ‘¤çš„åœ°æ–¹</h1><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format20.png" alt="format20"></p><p>ä¸€è¡Œä»£ç ï¼Œæ²¡å•¥è¯´çš„ã€‚å°±æ˜¯ä»å¤šä¸ªæ»¡è¶³æ¡ä»¶çš„ä¸”æƒé‡ä¸€æ ·çš„æœåŠ¡æä¾›è€…ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªã€‚</p><p>å¦‚æœä¸€å®šè¦å¤šè¯´ä¸€å¥çš„è¯ï¼Œæˆ‘æˆªä¸ªå›¾å§ï¼š</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format21.png" alt="format21"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™è¡Œä»£ç åœ¨æœ€çŸ­å“åº”æ—¶é—´ã€åŠ æƒéšæœºã€æœ€å°æ´»è·ƒæ•°è´Ÿè½½å‡è¡¡ç­–ç•¥ä¸­éƒ½å‡ºç°äº†ï¼Œä¸”éƒ½åœ¨æœ€åä¸€è¡Œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> å…¬ä¼—å·å¼€å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºhexo+butterflyçš„ä¸ªäººåšå®¢æ­å»ºæ•™ç¨‹ï¼ˆä¸‰ï¼‰åŸºç¡€é…ç½®ç¯‡</title>
      <link href="/2022/01/17/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%96%87%E6%A1%A3(%E4%B8%89)/"/>
      <url>/2022/01/17/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%96%87%E6%A1%A3(%E4%B8%89)/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºç¡€é…ç½®"><a href="#åŸºç¡€é…ç½®" class="headerlink" title="åŸºç¡€é…ç½®"></a>åŸºç¡€é…ç½®</h1><p>ä¸Šæ–‡æˆ‘ä»¬é€šè¿‡é…ç½®ä¸»é¢˜ï¼Œå‘ç°åšå®¢å†…å®¹å·²ç»æœ‰äº†å¾ˆå¤§çš„å˜åŒ–äº†</p><p>æœ¬æ–‡ç»­æ¥ä¸Šæ–‡ï¼Œå¯¹ä¸»é¢˜è¿›è¡Œé…ç½®ä¸ªæ€§åŒ–ä¸»é¢˜ã€‚</p><h2 id="ä½¿ç”¨VsCodeç¼–è¾‘ä¸»é¢˜-å¯é€‰"><a href="#ä½¿ç”¨VsCodeç¼–è¾‘ä¸»é¢˜-å¯é€‰" class="headerlink" title="ä½¿ç”¨VsCodeç¼–è¾‘ä¸»é¢˜(å¯é€‰)"></a>ä½¿ç”¨VsCodeç¼–è¾‘ä¸»é¢˜(å¯é€‰)</h2><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ä¹‹å‰ç¬¬ä¸€ç¯‡æ–‡ç« vscodeï¼Œè¿›è¡Œä¸»é¢˜é…ç½®</p><p>æ‰“å¼€vscode&gt;æ–‡ä»¶(å³ä¸Šè§’)&gt;æ‰“å¼€æ–‡ä»¶å¤¹ï¼ˆæ‰¾åˆ°è‡ªå·±åšå®¢çš„è·¯å¾„ï¼‰&gt;æ‰“å¼€å³å¯ã€‚</p><h2 id="è¯­è¨€"><a href="#è¯­è¨€" class="headerlink" title="è¯­è¨€"></a>è¯­è¨€</h2><p>ä¿®æ”¹é¡¹ç›®é…ç½®æ–‡ä»¶ <code>_config.yml</code><br>é»˜è®¤è¯­è¨€æ˜¯ en</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span></span><br></pre></td></tr></table></figure><p>ä¸»é¢˜æ”¯æŒä¸‰ç§è¯­è¨€ï¼š</p><ol><li>default(en)</li><li>zh-CN (ç®€ä½“ä¸­æ–‡)</li><li>zh-TW (ç¹ä½“ä¸­æ–‡)</li></ol><h2 id="ç½‘ç«™èµ„æ–™"><a href="#ç½‘ç«™èµ„æ–™" class="headerlink" title="ç½‘ç«™èµ„æ–™"></a>ç½‘ç«™èµ„æ–™</h2><p>ä¿®æ”¹ç½‘ç«™å„ç§èµ„æ–™ï¼Œä¾‹å¦‚æ ‡é¢˜ã€å‰¯æ ‡é¢˜å’Œé‚®ç®±ç­‰ä¸ªäººèµ„æ–™ï¼Œè¯·ä¿®æ”¹é¡¹ç›®ç›®å½•çš„<code>_config.yml</code></p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format26.png" alt="format26"></p><h2 id="å¯¼èˆªèœå•"><a href="#å¯¼èˆªèœå•" class="headerlink" title="å¯¼èˆªèœå•"></a>å¯¼èˆªèœå•</h2><p>ä¿®æ”¹ ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">é¦–é¡µ:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-home</span>    </span><br><span class="line">  <span class="string">æ–‡ç« :</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-archive</span></span><br><span class="line">  <span class="string">æ ‡ç­¾:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="string">åˆ†ç±»:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-folder-open</span></span><br><span class="line">  <span class="string">åˆ—è¡¨||fas</span> <span class="attr">fa-list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">éŸ³ä¹</span> <span class="string">||</span> <span class="string">/music/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-music</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ç”µå½±</span> <span class="string">||</span> <span class="string">/movies/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-video</span></span><br><span class="line">  <span class="string">å‹é“¾:</span> <span class="string">/link/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-link</span></span><br><span class="line">  <span class="string">å…³äº:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-heart</span></span><br></pre></td></tr></table></figure><p>å¿…é¡»æ˜¯ <code>/xxx/</code>ï¼Œåé¢ <code>||</code> åˆ†å¼€ï¼Œç„¶åå†™å›¾æ ‡å<a href="https://fontawesome.com/icons?from=io">å¯ä»¥è‡ªå®šä¹‰çš„å›¾æ ‡ç½‘</a>ã€‚</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>ä»£ç å—ä¸­çš„æ‰€æœ‰åŠŸèƒ½åªé€‚ç”¨äº Hexo é»˜è®¤çš„ highlight æ¸²æŸ“ï¼Œå¦‚æœä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æ¸²æŸ“å™¨ï¼Œä¸ä¸€å®šä¼šæœ‰æ•ˆ</p><h2 id="ä»£ç é«˜äº®ä¸»é¢˜"><a href="#ä»£ç é«˜äº®ä¸»é¢˜" class="headerlink" title="ä»£ç é«˜äº®ä¸»é¢˜"></a>ä»£ç é«˜äº®ä¸»é¢˜</h2><p>Butterfly æ”¯æŒ 6 ç§ä»£ç é«˜äº®æ ·å¼, è‡ªå®šä¹‰ä¸»é¢˜è¯·æŸ¥çœ‹<a href="https://demo.ç™¾åº¦.me/posts/4aa8abbe/#%E4%BB%A3%E7%A2%BC%E9%AB%98%E4%BA%AE%E4%B8%BB%E9%A1%8C">è‡ªå®šä¹‰ä¸»é¢˜</a></p><ul><li>default</li><li>darker</li><li>pale night</li><li>light</li><li>ocean</li><li>mac</li><li>mac light</li></ul><p>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_theme:</span> <span class="string">light</span></span><br></pre></td></tr></table></figure><h2 id="ä»£ç å¤åˆ¶"><a href="#ä»£ç å¤åˆ¶" class="headerlink" title="ä»£ç å¤åˆ¶"></a>ä»£ç å¤åˆ¶</h2><p>Butterflyä¸»é¢˜æ”¯æŒä»£ç å¤åˆ¶åŠŸèƒ½ã€‚<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_copy:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="ä»£ç å±•å¼€-å…³é—­"><a href="#ä»£ç å±•å¼€-å…³é—­" class="headerlink" title="ä»£ç å±•å¼€/å…³é—­"></a>ä»£ç å±•å¼€/å…³é—­</h2><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œä»£ç æ¡†è‡ªåŠ¨å±•å¼€ï¼Œå¯è®¾ç½®æ˜¯å¦æ‰€æœ‰ä»£ç æ¡†éƒ½å…³é—­çŠ¶æ€ï¼Œç‚¹å‡» <code>&gt;</code> å¯å±•å¼€ä»£ç </p><ul><li><p>true å…¨éƒ¨ä»£ç æ¡†ä¸å±•å¼€ï¼Œéœ€ç‚¹å‡» <code>&gt;</code> æ‰“å¼€</p></li><li><p>false ä»£ç ç‹‚å±•å¼€ï¼Œæœ‰ <code>&gt;</code> ç‚¹å‡»æŒ‰é’®</p></li><li><p>none ä¸æ˜¾ç¤º <code>&gt;</code> æŒ‰é’®<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_shrink:</span> <span class="literal">true</span> <span class="comment">#ä»£ç æ¡†ä¸å±•å¼€ï¼Œéœ€ç‚¹å‡» &#x27;&gt;&#x27; æ‰“å¼€</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="ä»£ç æ¢è¡Œ"><a href="#ä»£ç æ¢è¡Œ" class="headerlink" title="ä»£ç æ¢è¡Œ"></a>ä»£ç æ¢è¡Œ</h2><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>hexo-highlight</code> åœ¨ç¼–è¯‘çš„æ—¶å€™ä¸ä¼šå®ç°ä»£ç è‡ªåŠ¨æ¢è¡Œã€‚å¦‚æœä½ ä¸å¸Œæœ›åœ¨ä»£ç å—çš„åŒºåŸŸé‡Œæœ‰æ¨ªå‘æ»šåŠ¨æ¡çš„è¯ï¼Œé‚£ä¹ˆä½ å¯ä»¥è€ƒè™‘å¼€å¯è¿™ä¸ªåŠŸèƒ½ã€‚<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">code_word_wrap:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>ç„¶åæ‰¾åˆ° <code>Hexo</code> é…ç½®æ–‡ä»¶<code>_config.yml</code>ï¼Œå°† <code>line_number</code> æ”¹æˆ <code>false</code>:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">tab_replace:</span></span><br></pre></td></tr></table></figure><h2 id="ç¤¾äº¤å›¾æ ‡"><a href="#ç¤¾äº¤å›¾æ ‡" class="headerlink" title="ç¤¾äº¤å›¾æ ‡"></a>ç¤¾äº¤å›¾æ ‡</h2><p>ç¤¾äº¤å›¾æ ‡å³ä¸»é¡µä¸Šä¸ªæ€§æ ‡ç­¾ä¸‹çš„å„ç§ç¤¾äº¤è´¦å·å…³è”ã€‚</p><blockquote><p>ä¹¦å†™æ ¼å¼ï¼š<code>å›¾æ ‡åï¼šurl || æè¿°æ€§æ–‡å­—</code></p></blockquote><p>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">fab fa-github:</span> <span class="string">https://github.com/xxxxx</span> <span class="string">||</span> <span class="string">Github</span></span><br><span class="line">  <span class="attr">fas fa-envelope:</span> <span class="string">mailto:xxxxxx@gmail.com</span> <span class="string">||</span> <span class="string">Email</span></span><br></pre></td></tr></table></figure><p>å›¾æ ‡åå¯åœ¨è¿™å¯»æ‰¾: <a href="https://fontawesome.com/icons?from=io">https://fontawesome.com/icons?from=io</a></p><h2 id="é¡¶éƒ¨å›¾"><a href="#é¡¶éƒ¨å›¾" class="headerlink" title="é¡¶éƒ¨å›¾"></a>é¡¶éƒ¨å›¾</h2><p>é¡¶éƒ¨å›¾æœ‰ 2 ç§é…ç½®ï¼šå…·ä½“ url å’Œï¼ˆç•™ç©ºï¼Œtrue å’Œ falseï¼Œä¸‰ä¸ªæ•ˆæœä¸€æ ·ï¼‰</p><h3 id="pageé¡µ"><a href="#pageé¡µ" class="headerlink" title="pageé¡µ"></a>pageé¡µ</h3><p>å½“å…·ä½“ url æ—¶</p><p>ä¸»é¡µçš„é¡¶éƒ¨å›¾å¯ä»¥åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­è®¾ç½® index_img<br>archives é¡µçš„é¡¶éƒ¨å›¾å¯ä»¥åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­è®¾ç½® archive_img<br>å…¶ä»– page é¡µçš„é¡¶éƒ¨å›¾å¯ä»¥åœ¨å„è‡ªçš„ md é¡µé¢è®¾ç½® front-matter ä¸­çš„ top_img<br>é¡µé¢å¦‚æœæ²¡æœ‰è®¾ç½®å„è‡ªçš„ top_imgï¼Œåˆ™ä¼šæ˜¾ç¤º default_top_img å›¾ç‰‡<br>è®¾ç½®ç•™ç©ºï¼Œ true å’Œ false<br>ä¸»é¡µä¼šæ˜¾ç¤ºçº¯é¢œè‰²çš„é¡¶éƒ¨å›¾ï¼Œå…¶ä»– page çš„é¡¶éƒ¨å›¾æ²¡æœ‰è®¾ç½®æ—¶ï¼Œä¹Ÿä¼šæ˜¾ç¤ºçº¯é¢œè‰²çš„é¡¶éƒ¨å›¾</p><h3 id="posté¡µ"><a href="#posté¡µ" class="headerlink" title="posté¡µ"></a>posté¡µ</h3><p>post é¡µçš„é¡¶éƒ¨å›¾ä¼šä¼˜å…ˆæ˜¾ç¤ºå„è‡ª<code>front-matter</code>ä¸­çš„<code>top_img</code>, å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œåˆ™ä¼šç¼©ç•¥å›¾ï¼ˆå³å„è‡ª front-matter ä¸­çš„ cover)ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¼šæ˜¾ç¤ºæ˜¾ç¤º <code>default_top_img</code> å›¾ç‰‡</p><h2 id="æ–‡ç« ç½®é¡¶"><a href="#æ–‡ç« ç½®é¡¶" class="headerlink" title="æ–‡ç« ç½®é¡¶"></a>æ–‡ç« ç½®é¡¶</h2><p>è¦ä¸ºæ–‡ç« ç½®é¡¶ï¼Œä½ éœ€è¦å®‰è£…æ’ä»¶ (hexo-generator-index-pin-top æˆ–è€… hexo-generator-indexed)</p><p>å¦‚æœä½¿ç”¨ hexo-generator-index-pin-top, éœ€è¦å…ˆå¸è½½æ‰ hexo-generator-indexï¼Œç„¶ååœ¨æ–‡ç« çš„ front-matter åŒºåŸŸé‡Œæ·»åŠ  top: true å±æ€§æ¥æŠŠè¿™ç¯‡æ–‡ç« ç½®é¡¶</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">npm</span> <span class="string">uninstall</span> <span class="string">hexo-generator-index</span> <span class="string">--save</span></span><br><span class="line"><span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-generator-index-pin-top</span> <span class="string">--save</span></span><br></pre></td></tr></table></figure><h2 id="æ–‡ç« å°é¢"><a href="#æ–‡ç« å°é¢" class="headerlink" title="æ–‡ç« å°é¢"></a>æ–‡ç« å°é¢</h2><p>æ–‡ç« çš„ markdown æ–‡æ¡£ä¸Šï¼Œåœ¨ Front-matter æ·»åŠ cover, å¹¶å¡«ä¸Šè¦æ˜¾ç¤ºçš„å›¾ç‰‡åœ°å€ã€‚</p><p>å¦‚æœä¸é…ç½® cover, å¯ä»¥è®¾ç½®æ˜¾ç¤ºé»˜è®¤çš„ coverã€‚<br>å¦‚æœä¸æƒ³åœ¨é¦–é¡µæ˜¾ç¤º cover, å¯ä»¥è®¾ç½®ä¸º falseã€‚<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶_config.butterfly.ymlï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cover:</span></span><br><span class="line">  <span class="comment"># æ˜¯å¦æ˜¾ç¤ºæ–‡ç« å°é¢</span></span><br><span class="line">  <span class="attr">index_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">aside_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">archives_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># å°é¢æ˜¾ç¤ºçš„ä½ç½®</span></span><br><span class="line">  <span class="comment"># ä¸‰ä¸ªå€¼å¯é…ç½® left , right , both</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">both</span></span><br><span class="line">  <span class="comment"># å½“æ²¡æœ‰è®¾ç½®coveræ—¶ï¼Œé»˜è®¤çš„å°é¢æ˜¾ç¤º</span></span><br><span class="line">  <span class="attr">default_cover:</span> <span class="comment"># å½“é…ç½®å¤šå¼ å›¾ç‰‡æ—¶ï¼Œä¼šéšæœºé€‰æ‹©</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">å›¾ç‰‡åœ°å€1</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">å›¾ç‰‡åœ°å€2</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">å›¾ç‰‡åœ°å€3</span></span><br></pre></td></tr></table></figure><h2 id="æ–‡ç« é¡µç›¸å…³é…ç½®"><a href="#æ–‡ç« é¡µç›¸å…³é…ç½®" class="headerlink" title="æ–‡ç« é¡µç›¸å…³é…ç½®"></a>æ–‡ç« é¡µç›¸å…³é…ç½®</h2><h3 id="æ–‡ç« -meta-æ˜¾ç¤º"><a href="#æ–‡ç« -meta-æ˜¾ç¤º" class="headerlink" title="æ–‡ç«  meta æ˜¾ç¤º"></a>æ–‡ç«  meta æ˜¾ç¤º</h3><p>è¿™ä¸ªé€‰é¡¹æ˜¯ç”¨æ¥æ˜¾ç¤ºæ–‡ç« çš„ç›¸å…³ä¿¡æ¯çš„ã€‚<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><p>post_meta:<br>  page:<br>    date_type: both # created or updated or both ä¸»é¡µæ–‡ç« æ—¥æœŸæ˜¯åˆ›å»ºæ—¥æˆ–è€…æ›´æ–°æ—¥æˆ–éƒ½æ˜¾ç¤º<br>    categories: true # true or false ä¸»é¡µæ˜¯å¦æ˜¾ç¤ºåˆ†ç±»<br>    tags: true # true or false ä¸»é¡µæ˜¯å¦æ˜¾ç¤ºæ ‡ç­¾<br>    label: true # true or false æ˜¾ç¤ºæè¿°æ€§æ–‡å­—<br>  post:<br>    date_type: both # created or updated or both æ–‡ç« é¡µæ—¥æœŸæ˜¯åˆ›å»ºæ—¥æˆ–è€…æ›´æ–°æ—¥æˆ–éƒ½æ˜¾ç¤º<br>    categories: true # true or false æ–‡ç« é¡µæ˜¯å¦æ˜¾ç¤ºåˆ†ç±»<br>    tags: true # true or false æ–‡ç« é¡µæ˜¯å¦æ˜¾ç¤ºæ ‡ç­¾<br>    label: true # true or false æ˜¾ç¤ºæè¿°æ€§æ–‡å­—<br>åœ¨æ–‡ç« è¯¦æƒ…é¡µé¡¶éƒ¨çš„èµ„æ–™ï¼Œ<code>date_type</code>: å¯è®¾ç½®æ–‡ç« æ—¥æœŸæ˜¾ç¤ºåˆ›å»ºæ—¥æœŸ (created) æˆ–è€…æ›´æ–°æ—¥æœŸ (updated) æˆ–è€…ä¸¤ç§éƒ½æ˜¾ç¤º (both)<br><code>categories</code> æ˜¯å¦æ˜¾ç¤ºåˆ†ç±»<br>tags æ˜¯å¦æ˜¾ç¤ºæ ‡ç­¾</p><h2 id="æ–‡ç« ç‰ˆæƒ"><a href="#æ–‡ç« ç‰ˆæƒ" class="headerlink" title="æ–‡ç« ç‰ˆæƒ"></a>æ–‡ç« ç‰ˆæƒ</h2><p>ä¸ºä½ çš„åšå®¢æ–‡ç« å±•ç¤ºæ–‡ç« ç‰ˆæƒå’Œè®¸å¯åè®®ã€‚<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">post_copyright:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">decode:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">CC</span> <span class="string">BY-NC-SA</span> <span class="number">4.0</span></span><br><span class="line">  <span class="attr">license_url:</span> <span class="string">https://creativecommons.org/licenses/by-nc-sa/4.0/</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæœ‰æ–‡ç« ï¼ˆä¾‹å¦‚ï¼šè½¬è½½æ–‡ç« ï¼‰ä¸éœ€è¦æ˜¾ç¤ºç‰ˆæƒï¼Œå¯ä»¥åœ¨æ–‡ç«  Front-matter å•ç‹¬è®¾ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">copyright:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>ä» 3.0.0 å¼€å§‹ï¼Œæ”¯æŒå¯¹å•ç‹¬æ–‡ç« è®¾ç½®ç‰ˆæƒä¿¡æ¯ï¼Œå¯ä»¥åœ¨æ–‡ç«  Front-matter å•ç‹¬è®¾ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">copyright:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">copyright_author:</span> <span class="string">xxxx</span></span><br><span class="line"><span class="attr">copyright_author_href:</span> <span class="string">https://xxxxxx.com</span></span><br><span class="line"><span class="attr">copyright_url:</span> <span class="string">https://xxxxxx.com</span></span><br><span class="line"><span class="attr">copyright_info:</span> <span class="string">æ­¤æ–‡ç« ç‰ˆæƒå½’xxxxxæ‰€æœ‰ï¼Œå¦‚æœ‰è½¬è½½ï¼Œè¯·æ³¨æ˜æ¥è‡ªåŸä½œè€…</span></span><br></pre></td></tr></table></figure><h2 id="æ–‡ç« æ‰“èµ"><a href="#æ–‡ç« æ‰“èµ" class="headerlink" title="æ–‡ç« æ‰“èµ"></a>æ–‡ç« æ‰“èµ</h2><p>åœ¨ä½ æ¯ç¯‡æ–‡ç« çš„ç»“å°¾ï¼Œå¯ä»¥æ·»åŠ æ‰“èµæŒ‰é’®ã€‚ç›¸å…³äºŒç»´ç å¯ä»¥è‡ªè¡Œé…ç½®ã€‚å¯¹äºæ²¡æœ‰æä¾›äºŒç»´ç çš„ï¼Œå¯é…ç½®ä¸€å¼ è½¯ä»¶çš„ icon å›¾ç‰‡ï¼Œç„¶ååœ¨ link ä¸Šæ·»åŠ ç›¸åº”çš„æ‰“èµé“¾æ¥ã€‚ç”¨æˆ·ç‚¹å‡»å›¾ç‰‡å°±ä¼šè·³è½¬åˆ°é“¾æ¥å»ã€‚link å¯ä»¥ä¸å†™ï¼Œä¼šé»˜è®¤ä¸ºå›¾ç‰‡çš„é“¾æ¥ã€‚<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶_config.butterfly.ymlï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">reward:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">QR_code:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">/image/wechat.jpg</span></span><br><span class="line">      <span class="attr">link:</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">å¾®ä¿¡</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">/image/alipay.jpg</span></span><br><span class="line">      <span class="attr">link:</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">æ”¯ä»˜å®</span></span><br></pre></td></tr></table></figure><h2 id="TOCç›®å½•"><a href="#TOCç›®å½•" class="headerlink" title="TOCç›®å½•"></a>TOCç›®å½•</h2><p>åœ¨æ–‡ç« é¡µï¼Œä¼šæœ‰ä¸€ä¸ªç›®å½•ï¼Œç”¨äºæ˜¾ç¤º TOCã€‚</p><ul><li>enable: æ˜¯å¦æ˜¾ç¤º TOC</li><li>number: æ˜¯å¦æ˜¾ç¤ºç« èŠ‚æ•°</li><li>auto_open: å¯é€‰æ‹©è¿›å…¥æ–‡ç« é¡µé¢æ—¶ï¼Œæ˜¯å¦è‡ªåŠ¨æ‰“å¼€ sidebar æ˜¾ç¤º TOC</li></ul><p>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">auto_open:</span> <span class="literal">true</span> <span class="comment"># auto open the sidebar</span></span><br></pre></td></tr></table></figure><p>ä¸ºç‰¹å®šçš„æ–‡ç« é…ç½®<br>åœ¨ä½ çš„æ–‡ç«  md æ–‡ä»¶çš„å¤´éƒ¨ï¼ŒFront-matter ä¸­åŠ å…¥ toc_numberã€toc å’Œ auto_openï¼Œå¹¶é…ç½® true æˆ–è€… false å³å¯ã€‚<br>ä¸»é¢˜ä¼šä¼˜å…ˆåˆ¤æ–­æ–‡ç«  Markdown çš„ Front-matter æ˜¯å¦æœ‰é…ç½®ï¼Œå¦‚æœ‰ï¼Œåˆ™ä»¥ Front-matter çš„é…ç½®ä¸ºå‡†ã€‚å¦åˆ™ï¼Œä»¥ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®ä¸ºå‡†ç›¸å…³æ–‡ç« </p><h2 id="ç›¸å…³æ–‡ç« "><a href="#ç›¸å…³æ–‡ç« " class="headerlink" title="ç›¸å…³æ–‡ç« "></a>ç›¸å…³æ–‡ç« </h2><p>ç›¸å…³æ–‡ç« æ¨èçš„åŸç†æ˜¯æ ¹æ®æ–‡ç«  tags çš„æ¯”é‡æ¥æ¨è<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">related_post:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">6</span> <span class="comment"># æ˜¾ç¤ºæ¨èæ–‡ç« æ•°ç›®</span></span><br><span class="line">  <span class="attr">date_type:</span> <span class="string">created</span> <span class="comment"># or created or updated æ–‡ç« æ—¥æœŸæ˜¾ç¤ºåˆ›å»ºæ—¥æˆ–è€…æ›´æ–°æ—¥</span></span><br></pre></td></tr></table></figure><h2 id="æ–‡ç« é”šç‚¹"><a href="#æ–‡ç« é”šç‚¹" class="headerlink" title="æ–‡ç« é”šç‚¹"></a>æ–‡ç« é”šç‚¹</h2><p>å¼€å¯æ–‡ç« é”šç‚¹åï¼Œå½“ä½ åœ¨æ–‡ç« é¡µè¿›è¡Œæ»šåŠ¨æ—¶ï¼Œæ–‡ç« é“¾æ¥ä¼šæ ¹æ®æ ‡é¢˜ ID è¿›è¡Œæ›¿æ¢<br>(æ³¨æ„ï¼šæ¯æ›¿æ¢ä¸€æ¬¡ï¼Œä¼šç•™ä¸‹ä¸€ä¸ªæ­·å²è®°å½•ã€‚æ‰€ä»¥å¦‚æœä¸€ç¯‡æ–‡ç« æœ‰å¾ˆå¤šé”šç‚¹çš„è¯ï¼Œç½‘é¡µçš„æ­·å²è®°å½•ä¼šå¾ˆå¤šã€‚)<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">anchor: <span class="keyword">true</span></span><br></pre></td></tr></table></figure><h2 id="æ–‡ç« è¿‡æœŸæé†’"><a href="#æ–‡ç« è¿‡æœŸæé†’" class="headerlink" title="æ–‡ç« è¿‡æœŸæé†’"></a>æ–‡ç« è¿‡æœŸæé†’</h2><p>å¯è®¾ç½®æ˜¯å¦æ˜¾ç¤ºæ–‡ç« è¿‡æœŸæé†’ï¼Œä»¥æ›´æ–°æ—¶é—´ä¸ºåŸºå‡†ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">noticeOutdate:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">flat</span> <span class="comment"># style: simple/flat</span></span><br><span class="line">  <span class="attr">limit_day:</span> <span class="number">365</span> <span class="comment"># When will it be shown</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">top</span> <span class="comment"># position: top/bottom</span></span><br><span class="line">  <span class="attr">message_prev:</span> <span class="string">It</span> <span class="string">has</span> <span class="string">been</span></span><br><span class="line">  <span class="attr">message_next:</span> <span class="string">days</span> <span class="string">since</span> <span class="string">the</span> <span class="string">last</span> <span class="string">update,</span> <span class="string">the</span> <span class="string">content</span> <span class="string">of</span> <span class="string">the</span> <span class="string">article</span> <span class="string">may</span> <span class="string">be</span> <span class="string">outdated.</span></span><br></pre></td></tr></table></figure><p><strong>limit_dayï¼š</strong> è·ç¦»æ›´æ–°æ—¶é—´å¤šå°‘å¤©æ‰æ˜¾ç¤ºæ–‡ç« è¿‡æœŸæé†’<br><strong>message_prevï¼š</strong> è·ç¦»æ›´æ–°æ—¶é—´å¤šå°‘å¤©æ‰æ˜¾ç¤ºæ–‡ç« è¿‡æœŸæé†’<br><strong>message_nextï¼š</strong> å¤©æ•°ä¹‹åçš„æ–‡å­—</p><h2 id="å¤´åƒ"><a href="#å¤´åƒ" class="headerlink" title="å¤´åƒ"></a>å¤´åƒ</h2><p>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">avatar:</span>  </span><br><span class="line"><span class="attr">img:</span> <span class="string">/img/avatar.png</span>  </span><br><span class="line"><span class="attr">effect:</span> <span class="literal">true</span> <span class="string">*#</span> <span class="string">å¤´åƒä¼šä¸€ç›´è½¬åœˆ*</span></span><br></pre></td></tr></table></figure><h2 id="å¤åˆ¶ç›¸å…³é…ç½®"><a href="#å¤åˆ¶ç›¸å…³é…ç½®" class="headerlink" title="å¤åˆ¶ç›¸å…³é…ç½®"></a>å¤åˆ¶ç›¸å…³é…ç½®</h2><p>å¯é…ç½®ç½‘ç«™æ˜¯å¦å¯ä»¥å¤åˆ¶ã€å¤åˆ¶çš„å†…å®¹æ˜¯å¦æ·»åŠ ç‰ˆæƒä¿¡æ¯</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">copy:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># æ˜¯å¦å¼€å¯ç½‘ç«™å¤åˆ¶æƒé™</span></span><br><span class="line">  <span class="attr">copyright:</span> <span class="comment"># å¤åˆ¶çš„å†…å®¹åé¢åŠ ä¸Šç‰ˆæƒä¿¡æ¯</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># æ˜¯å¦å¼€å¯å¤åˆ¶ç‰ˆæƒä¿¡æ¯æ·»åŠ </span></span><br><span class="line">    <span class="attr">limit_count:</span> <span class="number">50</span> <span class="comment"># å­—æ•°é™åˆ¶ï¼Œå½“å¤åˆ¶æ–‡å­—å¤§äºè¿™ä¸ªå­—æ•°é™åˆ¶æ—¶ï¼Œå°†åœ¨å¤åˆ¶çš„å†…å®¹åé¢åŠ ä¸Šç‰ˆæƒä¿¡æ¯</span></span><br></pre></td></tr></table></figure><p>æ·»åŠ ç‰ˆæƒåå¤åˆ¶å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä½œè€…: runyu</span><br><span class="line">é“¾æ¥: http://localhost:4000/posts/åšå®¢æ­å»º</span><br><span class="line">æ¥æº: ä¸ªäººåšå®¢</span><br><span class="line">ç€ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç»œä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·è¨»æ˜å‡ºå¤„ã€‚</span><br></pre></td></tr></table></figure><h2 id="Footer-è®¾ç½®é¡¹ç›®å¹´ä»½"><a href="#Footer-è®¾ç½®é¡¹ç›®å¹´ä»½" class="headerlink" title="Footer è®¾ç½®é¡¹ç›®å¹´ä»½"></a>Footer è®¾ç½®é¡¹ç›®å¹´ä»½</h2><p>since æ˜¯ä¸€ä¸ªæ¥å±•ç¤ºä½ ç«™ç‚¹èµ·å§‹æ—¶é—´çš„é€‰é¡¹ã€‚å®ƒä½äºé¡µé¢çš„æœ€åº•éƒ¨ã€‚<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">owner:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">since:</span> <span class="number">2022</span></span><br></pre></td></tr></table></figure><h2 id="é¡µè„šè‡ªå®šä¹‰æ–‡æœ¬"><a href="#é¡µè„šè‡ªå®šä¹‰æ–‡æœ¬" class="headerlink" title="é¡µè„šè‡ªå®šä¹‰æ–‡æœ¬"></a>é¡µè„šè‡ªå®šä¹‰æ–‡æœ¬</h2><p>custom_text æ˜¯ä¸€ä¸ªç»™ä½ ç”¨æ¥åœ¨é¡µè„šè‡ªå®šä¹‰æ–‡æœ¬çš„é€‰é¡¹ã€‚é€šå¸¸ä½ å¯ä»¥åœ¨è¿™é‡Œå†™å£°æ˜æ–‡æœ¬ç­‰ã€‚æ”¯æŒ HTMLã€‚<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_text:</span> <span class="string">Hi,</span> <span class="string">welcome</span> <span class="string">to</span> <span class="string">my</span> <span class="string">&lt;a</span> <span class="string">href=&quot;&quot;&gt;åšå®¢&lt;/a&gt;!</span> <span class="comment"># ä¹Ÿå«è‡ªå®šä¹‰æ–‡æœ¬</span></span><br></pre></td></tr></table></figure><h2 id="ICP"><a href="#ICP" class="headerlink" title="ICP"></a>ICP</h2><p>å¯¹äºéƒ¨åˆ†æœ‰å¤‡æ¡ˆçš„åŸŸåï¼Œå¯ä»¥åœ¨ ICP é…ç½®æ˜¾ç¤ºã€‚<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶_config.butterfly.ymlï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ICP:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">http://www.beian.miit.gov.cn/state/outPortal/loginPortal.action</span></span><br><span class="line">  <span class="attr">text:</span> <span class="string">ç²¤ICPå¤‡xxxx</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">/img/icp.png</span></span><br></pre></td></tr></table></figure><h2 id="å³ä¸‹è§’æŒ‰é’®ç®€ç¹è½¬æ¢"><a href="#å³ä¸‹è§’æŒ‰é’®ç®€ç¹è½¬æ¢" class="headerlink" title="å³ä¸‹è§’æŒ‰é’®ç®€ç¹è½¬æ¢"></a>å³ä¸‹è§’æŒ‰é’®ç®€ç¹è½¬æ¢</h2><p>ç®€ä½“ç¹ä½“äº’æ¢, å³ä¸‹è§’ä¼šæœ‰ç®€ç¹è½¬æ¢æŒ‰é’®ã€‚<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><p>translate:<br>  enable: true</p><h2 id="é»˜è®¤æŒ‰é’®æ˜¾ç¤ºæ–‡å­—-ç½‘ç«™æ˜¯ç®€ä½“ï¼Œåº”è®¾ç½®ä¸ºâ€™default-ç¹â€™"><a href="#é»˜è®¤æŒ‰é’®æ˜¾ç¤ºæ–‡å­—-ç½‘ç«™æ˜¯ç®€ä½“ï¼Œåº”è®¾ç½®ä¸ºâ€™default-ç¹â€™" class="headerlink" title="é»˜è®¤æŒ‰é’®æ˜¾ç¤ºæ–‡å­—(ç½‘ç«™æ˜¯ç®€ä½“ï¼Œåº”è®¾ç½®ä¸ºâ€™default: ç¹â€™)"></a>é»˜è®¤æŒ‰é’®æ˜¾ç¤ºæ–‡å­—(ç½‘ç«™æ˜¯ç®€ä½“ï¼Œåº”è®¾ç½®ä¸ºâ€™default: ç¹â€™)</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">default:</span> <span class="string">ç®€</span></span><br><span class="line"><span class="comment">#ç½‘ç«™é»˜è®¤è¯­è¨€ï¼Œ1: ç¹ä½“ä¸­æ–‡, 2: ç®€ä½“ä¸­æ–‡</span></span><br><span class="line"><span class="attr">defaultEncoding:</span> <span class="number">1</span></span><br><span class="line"><span class="comment">#å»¶è¿Ÿæ—¶é—´,è‹¥ä¸åœ¨å‰, è¦è®¾å®šå»¶è¿Ÿç¿»è¯‘æ—¶é—´, å¦‚100è¡¨ç¤º100ms,é»˜è®¤ä¸º0</span></span><br><span class="line"><span class="attr">translateDelay:</span> <span class="number">0</span></span><br><span class="line"><span class="comment">#å½“æ–‡å­—æ˜¯ç®€ä½“æ—¶ï¼ŒæŒ‰é’®æ˜¾ç¤ºçš„æ–‡å­—</span></span><br><span class="line"><span class="attr">msgToTraditionalChinese:</span> <span class="string">&quot;ç¹&quot;</span></span><br><span class="line"><span class="comment">#å½“æ–‡å­—æ˜¯ç¹ä½“æ—¶ï¼ŒæŒ‰é’®æ˜¾ç¤ºçš„æ–‡å­—</span></span><br><span class="line"><span class="attr">msgToSimplifiedChinese:</span> <span class="string">&quot;ç®€&quot;</span></span><br></pre></td></tr></table></figure><h2 id="å¤œé—´æ¨¡å¼"><a href="#å¤œé—´æ¨¡å¼" class="headerlink" title="å¤œé—´æ¨¡å¼"></a>å¤œé—´æ¨¡å¼</h2><p>å³ä¸‹è§’ä¼šæœ‰å¤œé—´æ¨¡å¼æŒ‰é’®<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">darkmode:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># dark modeå’Œ light modeåˆ‡æ¢æŒ‰é’®</span></span><br><span class="line">  <span class="attr">button:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">autoChangeMode:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="é˜…è¯»æ¨¡å¼"><a href="#é˜…è¯»æ¨¡å¼" class="headerlink" title="é˜…è¯»æ¨¡å¼"></a>é˜…è¯»æ¨¡å¼</h2><p>é˜…è¯»æ¨¡å¼ä¸‹ä¼šå»æ‰é™¤æ–‡ç« å¤–çš„å†…å®¹ï¼Œé¿å…å¹²æ‰°é˜…è¯»ã€‚åªä¼šå‡ºç°åœ¨æ–‡ç« é¡µé¢ï¼Œå³ä¸‹è§’ä¼šæœ‰é˜…è¯»æ¨¡å¼æŒ‰é’®ã€‚<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">readmode:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="ä¾§è¾¹æ’ç‰ˆ"><a href="#ä¾§è¾¹æ’ç‰ˆ" class="headerlink" title="ä¾§è¾¹æ’ç‰ˆ"></a>ä¾§è¾¹æ’ç‰ˆ</h2><p>å¯è‡ªè¡Œå†³å®šå“ªä¸ªé¡¹ç›®éœ€è¦æ˜¾ç¤ºï¼Œå¯å†³å®šä½ç½®ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸æ˜¾ç¤ºä¾§è¾¹æ ã€‚<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">aside:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">true</span> <span class="comment"># æ‰‹æœºé¡µé¢ï¼ˆ æ˜¾ç¤ºå®½åº¦ &lt; 768px ï¼‰æ˜¯å¦æ˜¾ç¤ºasideå†…å®¹</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">right</span> <span class="comment"># left or right</span></span><br><span class="line">  <span class="attr">card_author:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">description:</span></span><br><span class="line">    <span class="attr">button:</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">Github</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://github.com/ç™¾åº¦127/hexo-theme-butterfly</span></span><br><span class="line">  <span class="attr">card_announcement:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">content:</span> <span class="string">This</span> <span class="string">is</span> <span class="string">my</span> <span class="string">Blog</span></span><br><span class="line">  <span class="attr">card_recent_post:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">5</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">sort:</span> <span class="string">date</span> <span class="comment"># date or updated</span></span><br><span class="line">  <span class="attr">card_categories:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">8</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">expand:</span> <span class="string">none</span> <span class="comment"># none/true/false</span></span><br><span class="line">  <span class="attr">card_tags:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">40</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">color:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">card_archives:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">monthly</span> <span class="comment"># yearly or monthly</span></span><br><span class="line">    <span class="attr">format:</span> <span class="string">MMMM</span> <span class="string">YYYY</span> <span class="comment"># eg: YYYYå¹´MMæœˆ</span></span><br><span class="line">    <span class="attr">order:</span> <span class="number">-1</span> <span class="comment"># Sort of order. 1, asc for ascending; -1, desc for descending</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">8</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">  <span class="attr">card_webinfo:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="è®¿é—®äººæ•°"><a href="#è®¿é—®äººæ•°" class="headerlink" title="è®¿é—®äººæ•°"></a>è®¿é—®äººæ•°</h2><p>è®¿é—® <a href="http://busuanzi.ibruce.info/">busuanzi</a> çš„å®˜æ–¹ç½‘ç«™æŸ¥çœ‹æ›´å¤šçš„ä»‹ç»ã€‚<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">busuanzi:</span></span><br><span class="line">  <span class="attr">site_uv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">site_pv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">page_pv:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="è¿è¡Œæ—¶é—´"><a href="#è¿è¡Œæ—¶é—´" class="headerlink" title="è¿è¡Œæ—¶é—´"></a>è¿è¡Œæ—¶é—´</h2><p>ç½‘é¡µå·²è¿è¡Œæ—¶é—´<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">runtimeshow:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">publish_date:</span> <span class="number">10</span><span class="string">/1/2022</span> <span class="number">00</span><span class="string">:00:00</span>  </span><br><span class="line">  <span class="comment">##ç½‘é¡µå¼€é€šæ—¶é—´</span></span><br><span class="line">  <span class="comment">#æ ¼å¼: æœˆ/æ—¥/å¹´ æ—¶é—´</span></span><br><span class="line">  <span class="comment">#ä¹Ÿå¯ä»¥å†™æˆ å¹´/æœˆ/æ—¥ æ—¶é—´</span></span><br></pre></td></tr></table></figure><h2 id="Gallery-ç›¸å†Œå›¾åº“"><a href="#Gallery-ç›¸å†Œå›¾åº“" class="headerlink" title="Gallery ç›¸å†Œå›¾åº“"></a>Gallery ç›¸å†Œå›¾åº“</h2><p>ä¸€ä¸ªå›¾åº“é›†åˆã€‚<br><strong>å†™æ³•</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;div</span> <span class="string">class=&quot;gallery-group-main&quot;&gt;</span></span><br><span class="line">&#123;<span class="string">%</span> <span class="string">galleryGroup</span> <span class="string">name</span> <span class="string">description</span> <span class="string">link</span> <span class="string">img-url</span> <span class="string">%</span>&#125;</span><br><span class="line">&#123;<span class="string">%</span> <span class="string">galleryGroup</span> <span class="string">name</span> <span class="string">description</span> <span class="string">link</span> <span class="string">img-url</span> <span class="string">%</span>&#125;</span><br><span class="line">&#123;<span class="string">%</span> <span class="string">galleryGroup</span> <span class="string">name</span> <span class="string">description</span> <span class="string">link</span> <span class="string">img-url</span> <span class="string">%</span>&#125;</span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br></pre></td></tr></table></figure><ul><li>name: å›¾åº“åå­—</li><li>descriptionï¼šå›¾åº“æè¿°</li><li>linkï¼šè¿æ¥åˆ°å¯¹åº”ç›¸å†Œçš„åœ°å€</li><li>img-urlï¼šå›¾åº“å°é¢çš„åœ°å€</li></ul><p>å¦‚ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;div</span> <span class="string">class=&quot;gallery-group-main&quot;&gt;</span></span><br><span class="line">&#123;<span class="string">%</span> <span class="string">galleryGroup</span> <span class="string">&#x27;å£çº¸&#x27;</span> <span class="string">&#x27;æ”¶è—çš„ä¸€äº›å£çº¸&#x27;</span> <span class="string">&#x27;/Gallery/wallpaper&#x27;</span> <span class="string">https://i.loli.net/2019/11/10/T7Mu8Aod3egmC4Q.png</span> <span class="string">%</span>&#125;</span><br><span class="line">&#123;<span class="string">%</span> <span class="string">galleryGroup</span> <span class="string">&#x27;æ¼«å¨&#x27;</span> <span class="string">&#x27;å…³äºæ¼«å¨çš„å›¾ç‰‡&#x27;</span> <span class="string">&#x27;/Gallery/marvel&#x27;</span> <span class="string">https://i.loli.net/2019/12/25/8t97aVlp4hgyBGu.jpg</span> <span class="string">%</span>&#125;</span><br><span class="line">&#123;<span class="string">%</span> <span class="string">galleryGroup</span> <span class="string">&#x27;OH MY GIRL&#x27;</span> <span class="string">&#x27;å…³äºOH MY GIRLçš„å›¾ç‰‡&#x27;</span> <span class="string">&#x27;/Gallery/ohmygirl&#x27;</span> <span class="string">https://i.loli.net/2019/12/25/hOqbQ3BIwa6KWpo.jpg</span> <span class="string">%</span>&#125;</span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Gallery-ç›¸å†Œ"><a href="#Gallery-ç›¸å†Œ" class="headerlink" title="Gallery ç›¸å†Œ"></a>Gallery ç›¸å†Œ</h2><p>å†™æ³•:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">%</span> <span class="string">gallery</span> <span class="string">%</span>&#125;</span><br><span class="line"><span class="string">markdown</span> <span class="string">å›¾ç‰‡æ ¼å¼</span></span><br><span class="line">&#123;<span class="string">%</span> <span class="string">endgallery</span> <span class="string">%</span>&#125;</span><br></pre></td></tr></table></figure><p>å¦‚ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">%</span> <span class="string">gallery</span> <span class="string">%</span>&#125;</span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg)</span></span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg)</span></span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg)</span></span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg)</span></span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg)</span></span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg)</span></span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg)</span></span><br><span class="line"><span class="type">![](https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg)</span></span><br><span class="line">&#123;<span class="string">%</span> <span class="string">endgallery</span> <span class="string">%</span>&#125;</span><br></pre></td></tr></table></figure><h2 id="å›ç­”é—®é¢˜-tag-hide"><a href="#å›ç­”é—®é¢˜-tag-hide" class="headerlink" title="å›ç­”é—®é¢˜ tag-hide"></a>å›ç­”é—®é¢˜ tag-hide</h2><p>å¦‚æœä½ æƒ³æŠŠä¸€äº›æ–‡å­—ã€å†…å®¹éšè—èµ·æ¥ï¼Œå¹¶æä¾›æŒ‰é’®è®©ç”¨æˆ·ç‚¹å‡»æ˜¾ç¤ºã€‚å¯ä»¥ä½¿ç”¨è¿™ä¸ªã€‚</p><div class="note success flat"><p>success inline</p></div><p>inline åœ¨æ–‡æœ¬é‡Œé¢æ·»åŠ æŒ‰é’®éšè—å†…å®¹ï¼Œåªé™æ–‡å­—(contentä¸èƒ½åŒ…å«è‹±æ–‡é€—å·)</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">%</span> <span class="string">hideInline</span> <span class="string">content</span>,<span class="string">display</span>,<span class="string">bg</span>,<span class="string">color</span> <span class="string">%</span>&#125;</span><br></pre></td></tr></table></figure><ul><li>content: æ–‡æœ¬å†…å®¹</li><li>display: æŒ‰é’®æ˜¾ç¤ºçš„æ–‡å­— (å¯é€‰)</li><li>bg: æŒ‰é’®çš„èƒŒæ™¯é¢œè‰² (å¯é€‰)</li><li>color: æŒ‰é’®æ–‡å­—çš„é¢œè‰² (å¯é€‰)</li></ul><p>ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å“ªä¸ªè‹±æ–‡å­—æ¯æœ€é…·ï¼Ÿ &#123;% hideInline å› ä¸ºè¥¿è£…è£¤(Cè£…é…·),æŸ¥çœ‹ç­”æ¡ˆ,#FF7242,#fff %&#125;</span><br><span class="line">é—¨é‡Œç«™ç€ä¸€ä¸ªäºº? &#123;% hideInline é—ª %&#125;</span><br></pre></td></tr></table></figure><p>ç»˜å›¾mermaidï¼ˆé¥¼çŠ¶å›¾ã€æŸ±çŠ¶å›¾ç­‰ï¼‰<br>ä½¿ç”¨ mermaid æ ‡ç±¤å¯ä»¥ç»˜è£½ Flowchartï¼ˆæµç¨‹å›¾ï¼‰ã€Sequence diagramï¼ˆæ—¶åºå›¾ ï¼‰ã€Class Diagramï¼ˆç±»åˆ«å›¾ï¼‰ã€State Diagramï¼ˆçŠ¶æ€å›¾ï¼‰ã€Ganttï¼ˆç”˜ç‰¹å›¾ï¼‰å’Œ Pie Chartï¼ˆåœ†å½¢å›¾ï¼‰ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹ mermaid æ–‡æ¡£<br>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶_config.butterfly.ymlï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mermaid:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># built-in themes: default/forest/dark/neutral</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">default</span></span><br></pre></td></tr></table></figure><p>ä¾‹å­ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">%</span> <span class="string">mermaid</span> <span class="string">%</span>&#125;</span><br><span class="line"><span class="string">pie</span></span><br><span class="line">    <span class="string">title</span> <span class="string">Key</span> <span class="string">elements</span> <span class="string">in</span> <span class="string">Product</span> <span class="string">X</span></span><br><span class="line">    <span class="string">&quot;Calcium&quot;</span> <span class="string">:</span> <span class="number">42.96</span></span><br><span class="line">    <span class="string">&quot;Potassium&quot;</span> <span class="string">:</span> <span class="number">50.05</span></span><br><span class="line">    <span class="string">&quot;Magnesium&quot;</span> <span class="string">:</span> <span class="number">10.01</span></span><br><span class="line">    <span class="string">&quot;Iron&quot;</span> <span class="string">:</span>  <span class="number">5</span></span><br><span class="line">&#123;<span class="string">%</span> <span class="string">endmermaid</span> <span class="string">%</span>&#125;</span><br></pre></td></tr></table></figure><p>æ–‡ç« æŒç»­æ›´æ–°~</p>]]></content>
      
      
      <categories>
          
          <category> åšå®¢æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åšå®¢æ­å»º </tag>
            
            <tag> hexo </tag>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºhexo+butterflyçš„ä¸ªäººåšå®¢æ­å»ºæ•™ç¨‹ï¼ˆäºŒï¼‰ å¿«é€Ÿå…¥é—¨ç¯‡</title>
      <link href="/2022/01/13/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%96%87%E6%A1%A3(%E4%BA%8C)/"/>
      <url>/2022/01/13/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%96%87%E6%A1%A3(%E4%BA%8C)/</url>
      
        <content type="html"><![CDATA[<p>æ¥ä¸Šæ–‡ åŸæ¥ hexo è‡ªå¸¦çš„ä¸»é¢˜ä½¿ç”¨çš„æ˜¯landscapeä¸»é¢˜ï¼Œä¸ºäº†è®©ä¸»é¢˜å˜å¾—æ›´å¥½çœ‹ï¼Œæˆ‘ä»¬é€‰æ‹©åœ¨å®˜ç½‘æ‰¾å¹¶æ›´æ¢ä¸»é¢˜ ä¸»é¢˜åº“ï¼š<a href="https://hexo.io/themes/">https://hexo.io/themes/</a><br>hexo-theme-butterfly æ˜¯åŸºäº Molunerfinn çš„ hexo-theme-melody çš„åŸºç¡€ä¸Šè¿›è¡Œå¼€å‘çš„ã€‚</p><p>è¿™æ¬¾ä¸»é¢˜éå¸¸å¥½çœ‹ï¼Œå¥½ç”¨ï¼ŒåŠŸèƒ½ååˆ†é½å…¨ã€‚æœ¬æ–‡å°†å¯¹butterfly ä¸»é¢˜è¿›è¡Œä»‹ç»ã€‚</p><h1 id="å®‰è£…ï¼ˆå¿«é€Ÿå¼€å§‹ï¼‰"><a href="#å®‰è£…ï¼ˆå¿«é€Ÿå¼€å§‹ï¼‰" class="headerlink" title="å®‰è£…ï¼ˆå¿«é€Ÿå¼€å§‹ï¼‰"></a>å®‰è£…ï¼ˆå¿«é€Ÿå¼€å§‹ï¼‰</h1><p>åœ¨æ‚¨çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼šä¾‹å¦‚æˆ‘çš„æ–‡ä»¶å¤¹åç§°ï¼ˆhexoBlogXï¼‰</p><p>git clone -b master <a href="https://github.com/jerryc127/hexo-theme-butterfly.git">https://github.com/jerryc127/hexo-theme-butterfly.git</a> themes/butterfly<br><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format23.png" alt="format23"></p><p>å‡ºç°å¦‚ä¸‹å›¾æ–‡ä»¶</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format24.png" alt="format24"></p><p>å³ä¸ºå®Œæˆã€‚</p><h2 id="åº”ç”¨ä¸»é¢˜"><a href="#åº”ç”¨ä¸»é¢˜" class="headerlink" title="åº”ç”¨ä¸»é¢˜"></a>åº”ç”¨ä¸»é¢˜</h2><p>ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶<code>_config.yml</code>ï¼ŒæŠŠä¸»é¢˜æ”¹ä¸º <code>butterfly</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: butterfly</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…æ’ä»¶"><a href="#å®‰è£…æ’ä»¶" class="headerlink" title="å®‰è£…æ’ä»¶"></a>å®‰è£…æ’ä»¶</h2><p>å¦‚æœæ²’æœ‰ pug ä»¥åŠ stylus çš„æ¸²æŸ“å™¨ï¼Œè¿˜éœ€è¦ä¸‹è½½ï¼Œå¦åˆ™åœ¨é¡¹ç›®è¿è¡Œæ—¶ä¼šæŠ¥é”™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure><h2 id="å‡çº§å»ºè®®"><a href="#å‡çº§å»ºè®®" class="headerlink" title="å‡çº§å»ºè®®"></a>å‡çº§å»ºè®®</h2><p>ä¸ºäº†æ¸›å°‘å‡çº§ä¸»é¢˜å¸¦æ¥çš„ä¸ä¾¿ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åšä»¥ä¸‹æ“ä½œï¼šè¯·é‡‡ç”¨å¦‚ä¸‹æ–¹å¼<br><strong>æ–¹å¼ä¸€ï¼š</strong><br>æŠŠä¸»é¢˜æ–‡ä»¶å¤¹ä¸­çš„ <code>_config.yml</code> å¤åˆ¶åˆ° Hexo æ ¹ç›®å½•ä¸‹ï¼ŒåŒæ—¶é‡å‘½åä¸º <code>_config.butterfly.yml</code>ã€‚</p><p>å°†blog (ä½ çš„åšå®¢æ–‡ä»¶å¤¹å)/themes / Butterfly/config.yml å¤åˆ¶åˆ° blog (ä½ çš„åšå®¢æ–‡ä»¶å¤¹å)/ _config.butterfly.yml (å°†_config.ymlé‡å‘½å)</p><h1 id="ä¸»é¢˜é¡µé¢é…ç½®"><a href="#ä¸»é¢˜é¡µé¢é…ç½®" class="headerlink" title="ä¸»é¢˜é¡µé¢é…ç½®"></a>ä¸»é¢˜é¡µé¢é…ç½®</h1><h2 id="Front-matter-é€‰é¡¹è¯¦è§£"><a href="#Front-matter-é€‰é¡¹è¯¦è§£" class="headerlink" title="Front-matter é€‰é¡¹è¯¦è§£"></a>Front-matter é€‰é¡¹è¯¦è§£</h2><p>Front-matter æ˜¯æ¯ä¸ªmarkdownæ–‡ä»¶æœ€ä¸Šæ–¹ä»¥ â€” åˆ†éš”çš„åŒºåŸŸï¼Œç”¨äºæŒ‡å®šæ–‡ç« çš„å‚æ•°ã€‚</p><p>å¦‚æœå¯é€‰çš„å‚æ•°ï¼Œå¯æ ¹æ®è‡ªå·±çš„éœ€è¦æ·»åŠ ï¼Œä¸ç”¨å…¨éƒ¨éƒ½å†™åœ¨ markdowné‡Œï¼Œ æ˜¯åœ¨æ¯ä¸€ä¸ªmarkdownæ–‡ä»¶é‡Œé…ç½®</p><h3 id="Page-Front-matter"><a href="#Page-Front-matter" class="headerlink" title="Page Front-matter"></a>Page Front-matter</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: ã€å¿…å¡«ã€‘é¡µé¢æ ‡é¢˜</span><br><span class="line">date: ã€å¿…å¡«ã€‘é¡µé¢åˆ›å»ºæ—¥æœŸ</span><br><span class="line">type: ã€å¿…å¡«ã€‘æ ‡ç­¾ã€åˆ†ç±»å’Œå‹æƒ…é“¾æ¥ä¸‰ä¸ªé¡µé¢å¿…é¡»å¡«å†™</span><br><span class="line">updated: ã€å¯é€‰ã€‘é¡µé¢æ›´æ–°æ—¥æœŸ</span><br><span class="line">comments: ã€å¯é€‰ã€‘é¡µé¢è¯„è®ºæ¨¡å—(é»˜è®¤ä¸ºtrue)</span><br><span class="line">description: ã€å¯é€‰ã€‘é¡µé¢æè¿°</span><br><span class="line">keywords: ã€å¯é€‰ã€‘é¡µé¢å…³é”®å­—</span><br><span class="line">top_img: ã€å¯é€‰ã€‘é¡µé¢é¡¶éƒ¨å›¾ç‰‡</span><br><span class="line">mathjax: ã€å¯é€‰ã€‘å±•ç¤º mathjax (å½“è®¾ç½® mathjax çš„ per_page: false æ—¶ï¼Œæ‰éœ€è¦é…ç½®ï¼Œé»˜è®¤ false)</span><br><span class="line">katex: ã€å¯é€‰ã€‘å±•ç¤º katex (å½“è®¾ç½® katex çš„ per_page: false æ—¶ï¼Œæ‰éœ€è¦é…ç½®ï¼Œé»˜è®¤ false)</span><br><span class="line">aside: ã€å¯é€‰ã€‘å±•ç¤ºä¾§è¾¹æ  (é»˜è®¤ true)</span><br><span class="line">aplayerï¼š ã€å¯é€‰ã€‘åœ¨éœ€è¦çš„é¡µé¢åŠ è½½ aplayer çš„ js å’Œ css, è¯·å‚è€ƒæ–‡ç« ä¸‹é¢çš„éŸ³ä¹é…ç½®</span><br><span class="line">highlight_shrinkï¼š ã€å¯é€‰ã€‘é…ç½®ä»£ç æ¡†æ˜¯å¦å±•å¼€ (true/false)(é»˜è®¤è®¾ç½®ä¸º highlight_shrink çš„é…ç½®)</span><br></pre></td></tr></table></figure><h3 id="Post-Front-matter"><a href="#Post-Front-matter" class="headerlink" title="Post Front-matter"></a>Post Front-matter</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: ã€å¿…éœ€ã€‘æ–‡ç« æ ‡é¢˜</span><br><span class="line">date: ã€å¿…éœ€ã€‘æ–‡ç« åˆ›å»ºæ—¥æœŸ</span><br><span class="line">updated: ã€å¯é€‰ã€‘æ–‡ç« æ›´æ–°æ—¥æœŸ</span><br><span class="line">tags: ã€å¯é€‰ã€‘æ–‡ç« æ ‡ç­¾</span><br><span class="line">categories: ã€å¯é€‰ã€‘æ–‡ç« åˆ†ç±»</span><br><span class="line">keywords: ã€å¯é€‰ã€‘æ–‡ç« å…³é”®å­—</span><br><span class="line">description: ã€å¯é€‰ã€‘æ–‡ç« æè¿°</span><br><span class="line">top_img: ã€å¯é€‰ã€‘æ–‡ç« é¡¶éƒ¨å›¾ç‰‡</span><br><span class="line">commentsï¼š ã€å¯é€‰ã€‘æ˜¾ç¤ºæ–‡ç« è¯„è®ºæ¨¡å— (é»˜è®¤ true)</span><br><span class="line">cover: ã€å¯é€‰ã€‘æ–‡ç« ç¼©ç•¥å›¾ (å¦‚æœæ²¡æœ‰è®¾ç½® top_img, æ–‡ç« é¡µé¡¶éƒ¨å°†æ˜¾ç¤ºç¼©ç•¥å›¾ï¼Œå¯è®¾ä¸º false / å›¾ç‰‡åœ°å€ / ç•™ç©º)</span><br><span class="line">toc: ã€å¯é€‰ã€‘æ˜¾ç¤ºæ–‡ç«  TOC (é»˜è®¤ä¸ºè®¾ç½®ä¸­ toc çš„ enable é…ç½®)</span><br><span class="line">toc_number: ã€å¯é€‰ã€‘æ˜¾ç¤º toc_number (é»˜è®¤ä¸ºè®¾ç½®ä¸­ toc çš„ number é…ç½®)</span><br><span class="line">auto_open: ã€å¯é€‰ã€‘æ˜¯å¦è‡ªåŠ¨æ‰“å¼€ TOC (é»˜è®¤ä¸ºè®¾ç½®ä¸­ toc çš„ auto_open é…ç½®)</span><br><span class="line">copyright: ã€å¯é€‰ã€‘æ˜¾ç¤ºæ–‡ç« ç‰ˆæƒæ¨¡å— (é»˜è®¤ä¸ºè®¾ç½®ä¸­ post_copyright çš„ enable é…ç½®)</span><br><span class="line">copyright_author: ã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„æ–‡ç« ä½œè€…</span><br><span class="line">copyright_author_href: ã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„æ–‡ç« ä½œè€…é“¾æ¥</span><br><span class="line">copyright_url: ã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„æ–‡ç« è¿ç»“é“¾æ¥</span><br><span class="line">copyright_info: ã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„ç‰ˆæƒå£°æ˜æ–‡å­—</span><br><span class="line">mathjax: ã€å¯é€‰ã€‘æ˜¾ç¤º mathjax (å½“è®¾ç½® mathjax çš„ per_page: false æ—¶ï¼Œæ‰éœ€è¦é…ç½®ï¼Œé»˜è®¤ false)</span><br><span class="line">katex: ã€å¯é€‰ã€‘æ˜¾ç¤º katex (å½“è®¾ç½® katex çš„ per_page: false æ—¶ï¼Œæ‰éœ€è¦é…ç½®ï¼Œé»˜è®¤ false)</span><br><span class="line">aplayer: ã€å¯é€‰ã€‘åœ¨éœ€è¦çš„é¡µé¢åŠ è½½ aplayer çš„ js å’Œ css, è¯·å‚è€ƒæ–‡ç« ä¸‹é¢çš„éŸ³ä¹ é…ç½®</span><br><span class="line">highlight_shrinkï¼šã€å¯é€‰ã€‘é…ç½®ä»£ç æ¡†æ˜¯å¦å±•å¼€ (true/false)(é»˜è®¤ä¸ºè®¾ç½®ä¸­ highlight_shrink çš„é…ç½®)</span><br></pre></td></tr></table></figure><h2 id="æ ‡ç­¾é¡µ"><a href="#æ ‡ç­¾é¡µ" class="headerlink" title="æ ‡ç­¾é¡µ"></a>æ ‡ç­¾é¡µ</h2><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page tags</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ° <code>source/tags/index.md</code> è¿™ä¸ªæ–‡ä»¶, ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶å†…å®¹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: æ ‡ç­¾</span><br><span class="line">date: 2020-08-28 14:17:49</span><br><span class="line">type: &quot;tags&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h2 id="åˆ†ç±»é¡µ"><a href="#åˆ†ç±»é¡µ" class="headerlink" title="åˆ†ç±»é¡µ"></a>åˆ†ç±»é¡µ</h2><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page categories</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ° <code>source/categories/index.md</code> è¿™ä¸ªæ–‡ä»¶, ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: åˆ†ç±»</span><br><span class="line">date: 2020-08-28 14:17:49</span><br><span class="line">type: &quot;categories&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h2 id="å‹æƒ…é“¾æ¥"><a href="#å‹æƒ…é“¾æ¥" class="headerlink" title="å‹æƒ…é“¾æ¥"></a>å‹æƒ…é“¾æ¥</h2><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page link</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ° <code>source/link/index.md</code> è¿™ä¸ªæ–‡ä»¶, ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: å‹æƒ…é“¾æ¥</span><br><span class="line">date: 2020-08-28 14:17:49</span><br><span class="line">type: &quot;link&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h2 id="æ–°å¢å‹æƒ…é“¾æ¥"><a href="#æ–°å¢å‹æƒ…é“¾æ¥" class="headerlink" title="æ–°å¢å‹æƒ…é“¾æ¥"></a>æ–°å¢å‹æƒ…é“¾æ¥</h2><p>åœ¨ Hexo é¡¹ç›®ç›®å½•ä¸­çš„ source/_dataï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ link.yml, å¹¶å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">- class_name: å‹æƒ…é“¾æ¥</span><br><span class="line">  class_desc: é‚£äº›äººï¼Œé‚£äº›äº‹</span><br><span class="line">  link_list:</span><br><span class="line">    - name: JerryC</span><br><span class="line">      link: https://jerryc.me/</span><br><span class="line">      avatar: https://jerryc.me/image/avatar.png</span><br><span class="line">      descr: ä»Šæ—¥äº‹,ä»Šæ—¥æ¯•</span><br><span class="line">    - name: Hexo</span><br><span class="line">      link: https://hexo.io/zh-tw/</span><br><span class="line">      avatar: https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg</span><br><span class="line">      descr: å¿«é€Ÿã€ç®€å•ä¸”å¼ºå¤§çš„ç½‘èªŒæ¡†æ¶</span><br><span class="line">- class_name: ç½‘ç«™</span><br><span class="line">  class_desc: å€¼å¾—æ¨èçš„ç½‘ç«™</span><br><span class="line">  link_list:</span><br><span class="line">    - name: Youtube</span><br><span class="line">      link: https://www.youtube.com/</span><br><span class="line">      avatar: https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png</span><br><span class="line">      descr: è§†é¢‘ç½‘ç«™</span><br><span class="line">    - name: Weibo</span><br><span class="line">      link: https://www.weibo.com/</span><br><span class="line">      avatar: https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png</span><br><span class="line">      descr: ä¸­å›½æœ€å¤§ç¤¾äº¤åˆ†äº«å¹³å°</span><br><span class="line">    - name: Twitter</span><br><span class="line">      link: https://twitter.com/</span><br><span class="line">      avatar: https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png</span><br><span class="line">      descr: ç¤¾äº¤åˆ†äº«å¹³å°</span><br></pre></td></tr></table></figure><p>å¯ä»¥æŒ‰è‡ªå·±çš„å‹é“¾ä¿®æ”¹<br>class_name å’Œ class_desc æ”¯æŒ html æ ¼å¼ä¹¦å†™ï¼Œå¦‚ä¸éœ€è¦ï¼Œä¹Ÿå¯ä»¥ç•™ç©ºã€‚<br>å‹æƒ…é“¾æ¥ç•Œé¢ä¹Ÿå¯ä»¥ç”±ç”¨æˆ·è‡ªå·±è‡ªå®šä¹‰ï¼Œåªéœ€è¦åœ¨å‹æƒ…é“¾æ¥çš„ md æ¡£è®¾ç½®å°±è¡Œï¼Œä»¥æ™®é€šçš„ Markdown æ ¼å¼ä¹¦å†™ã€‚</p><p>å‘½ä»¤æç¤ºç¬¦ä¸­ä¾æ¬¡è¾“å…¥</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>æµè§ˆå™¨åœ°å€æ è¾“å…¥ï¼š<a href="http://localhost:4000/link/%E5%B0%B1%E5%8F%AF%E4%BC%9A%E5%87%BA%E7%8E%B0%E5%A6%82%E4%B8%8B%E6%95%88%E6%9E%9C">http://localhost:4000/link/å°±å¯ä¼šå‡ºç°å¦‚ä¸‹æ•ˆæœ</a><br><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format25.png" alt="format25"></p><p>éŸ³ä¹<br>éŸ³ä¹ç•Œé¢ä½¿ç”¨äº†æ’ä»¶ hexo-tag-aplayer<br>å…·ä½“ä½¿ç”¨æ–¹æ³•è¯·å‚è€ƒæ’ä»¶<a href="https://github.com/MoePlayer/hexo-tag-aplayer/blob/master/docs/README-zh_cn.md">æ–‡æ¡£</a></p><p>ç”µå½±<br>ç”µå½±ç•Œé¢ä½¿ç”¨äº†æ’ä»¶ hexo-douban<br>å…·ä½“ä½¿ç”¨æ–¹æ³•è¯·å‚è€ƒæ’ä»¶çš„<a href="https://github.com/mythsman/hexo-douban">æ–‡æ¡£</a>ã€‚<br>æ³¨æ„ï¼šhexo-douban ä¼šä¸»åŠ¨ç”Ÿæˆé¡µé¢ï¼Œæ‰€ä»¥ä¸éœ€è¦è‡ªå·±åˆ›å»ºã€‚å¯¹åº”ç½‘é¡µçš„ top_img å¯ä»¥åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ã€‚<br>404é¡µé¢<br>ä¸»é¢˜å†…ç½®äº†ä¸€ä¸ªç®€å•çš„ 404 é¡µé¢ï¼Œå¯åœ¨è®¾ç½®ä¸­å¼€å¯</p><div class="note warning flat"><p>æœ¬åœ°é¢„è§ˆæ—¶ï¼Œè®¿é—®å‡ºé”™çš„ç½‘ç«™æ˜¯ä¸ä¼šè·³åˆ° 404 é¡µé¢çš„ã€‚å¦‚éœ€æœ¬åœ°é¢„è§ˆï¼Œè¯·è®¿é—® <a href="http://localhost:4000/404.html">http://localhost:4000/404.html</a></p></div><p>ä¿®æ”¹é…ç½®æ–‡ä»¶_config.butterfly.yml:</p><h2 id="404é¡µé¢"><a href="#404é¡µé¢" class="headerlink" title="404é¡µé¢"></a>404é¡µé¢</h2><p>ä¸»é¢˜å†…ç½®äº†ä¸€ä¸ªç®€å•çš„ 404 é¡µé¢ï¼Œå¯åœ¨è®¾ç½®ä¸­å¼€å¯</p><p>æœ¬åœ°é¢„è§ˆæ—¶ï¼Œè®¿é—®å‡ºé”™çš„ç½‘ç«™æ˜¯ä¸ä¼šè·³åˆ° 404 é¡µé¢çš„ã€‚å¦‚éœ€æœ¬åœ°é¢„è§ˆï¼Œè¯·è®¿é—®</p><p><a href="http://localhost:4000/404.html">http://localhost:4000/404.html</a></p><p>ä¿®æ”¹é…ç½®æ–‡ä»¶<code>_config.butterfly.yml</code>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 404é¡µé¢</span><br><span class="line"># A simple 404 page</span><br><span class="line">error_404:</span><br><span class="line">  enable: true</span><br><span class="line">  subtitle: é¡µé¢æ²¡æœ‰æ‰¾åˆ°</span><br><span class="line">  background: https://i.loli.net/2020/05/19/aKOcLiyPl2JQdFD.png</span><br></pre></td></tr></table></figure><p>404é¡µé¢å¦‚ä¸‹ï¼š</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/format22.png" alt="format22"></p>]]></content>
      
      
      <categories>
          
          <category> åšå®¢æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åšå®¢æ­å»º </tag>
            
            <tag> hexo </tag>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºhexo+butterflyçš„ä¸ªäººåšå®¢æ­å»ºæ•™ç¨‹ï¼ˆä¸€ï¼‰ ç¯å¢ƒæ­å»ºç¯‡</title>
      <link href="/2022/01/10/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%96%87%E6%A1%A3(%E4%B8%80)/"/>
      <url>/2022/01/10/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%96%87%E6%A1%A3(%E4%B8%80)/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸ºä»€ä¹ˆè¦æ­å»ºå±äºè‡ªå·±çš„åšå®¢"><a href="#ä¸ºä»€ä¹ˆè¦æ­å»ºå±äºè‡ªå·±çš„åšå®¢" class="headerlink" title="ä¸ºä»€ä¹ˆè¦æ­å»ºå±äºè‡ªå·±çš„åšå®¢"></a>ä¸ºä»€ä¹ˆè¦æ­å»ºå±äºè‡ªå·±çš„åšå®¢</h1><p>é—®ï¼šä¸ºä»€ä¹ˆè¦æ­å»ºå±äºè‡ªå·±çš„åšå®¢å‘¢ï¼Ÿ</p><p>ç­”ï¼šåœ¨è¿™é‡Œï¼Œå¯ä»¥å®šåˆ¶è‡ªå·±çš„ä¸ªäººç½‘ç«™ï¼Œåˆ†äº«è‡ªå·±çš„ç”Ÿæ´»å’Œç»éªŒï¼Œå¸®åŠ©åˆ°ä»–äººçš„åŒäº‹ï¼Œä¹Ÿèƒ½æ–¹ä¾¿è‡ªå·±æ›´å¥½çš„æ‰¾åˆ°è‡ªå·±æƒ³è¦çš„ä¸œè¥¿ï¼Œé˜²æ­¢çŸ¥è¯†çš„é—å¿˜ã€‚åŒæ—¶è¿˜ä¼šæœ‰å°å°çš„æˆå°±æ„Ÿï¼Œå¹¶ä¸”å¯ä»¥æå‡è‡ªå·±çš„å†™ä½œèƒ½åŠ›ã€‚</p><p>é—®ï¼šè¦æ”¶è´¹å—ï¼Ÿ</p><p>ç­”ï¼šå½“ç„¶æ˜¯å…è´¹çš„ã€‚å½“ç„¶ï¼Œå¦‚æœä½ èƒ½ä¸æ–­çš„åšæŒï¼Œè¿˜èƒ½ä¸ºä½ å¸¦æ¥ä¸€ç‚¹å°å°çš„æ”¶å…¥ã€‚</p><p>æœ‰äº›å¯¹ä»£ç ä¸€æ— æ‰€çŸ¥çš„æœ‹å‹ï¼Œå³ä¾¿æ²¡æœ‰ç¼–ç¨‹åŸºç¡€ï¼Œä¹Ÿèƒ½é€šè¿‡æ•™ç¨‹æ­å»ºè‡ªå·±çš„åšå®¢ã€‚å½“ç„¶æ¥è®¿çš„å¯èƒ½è¿˜æœ‰ä¸€äº›æœ‰ç¼–ç¨‹èƒ½åŠ›çš„ï¼Œå¯¹æ•™ç¨‹çš„å†…å®¹ä¸è¦åæ§½å•°å—¦ï¼Œè‡ªè¡Œç•¥è¿‡ï¼ŒæŒ‘é‡ç‚¹å³å¯ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥å¼€å§‹è¿›è¡Œåšå®¢çš„æ­å»º</p><h1 id="ç¯å¢ƒå‡†å¤‡-é’ˆå¯¹Windowsç³»ç»Ÿæ­å»º"><a href="#ç¯å¢ƒå‡†å¤‡-é’ˆå¯¹Windowsç³»ç»Ÿæ­å»º" class="headerlink" title="ç¯å¢ƒå‡†å¤‡(é’ˆå¯¹Windowsç³»ç»Ÿæ­å»º)"></a>ç¯å¢ƒå‡†å¤‡(é’ˆå¯¹Windowsç³»ç»Ÿæ­å»º)</h1><p>æ“ä½œç³»ç»Ÿï¼šWindows 10  </p><p>1ï¼šGitHub</p><p>2ï¼šNode.js</p><p>3ï¼šHexo</p><p>4ï¼šVsCode(æ¨è)</p><p>ä»¥ä¸Šç¯å¢ƒï¼Œåœ¨è‡ªå·±çš„ç”µè„‘é…ç½®å¥½å°±å¯ä»¥å¼€å§‹æ­å»ºåšå®¢äº†ã€‚</p><h2 id="å®‰è£…-Git"><a href="#å®‰è£…-Git" class="headerlink" title="å®‰è£… Git"></a>å®‰è£… Git</h2><p>Gitæ˜¯ä¸€æ¬¾å…è´¹ã€å¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç”¨äºæ•æ·é«˜æ•ˆåœ°å¤„ç†ä»»ä½•æˆ–å°æˆ–å¤§çš„é¡¹ç›®ã€‚Gitçš„è¯»éŸ³ä¸º/gÉªt/ã€‚ Gitæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç”¨ä»¥æœ‰æ•ˆã€é«˜é€Ÿçš„å¤„ç†ä»å¾ˆå°åˆ°éå¸¸å¤§çš„é¡¹ç›®ç‰ˆæœ¬ç®¡ç†ã€‚</p><h3 id="Gitå®‰è£…"><a href="#Gitå®‰è£…" class="headerlink" title="Gitå®‰è£…"></a>Gitå®‰è£…</h3><p>ç‚¹å‡» <a href="https://git-scm.com/">Git å®˜ç½‘</a>æ ¹æ®ä½ ç”µè„‘ç³»ç»Ÿçš„é…ç½®ä¿¡æ¯ï¼Œä¸‹è½½å¯¹åº”çš„å®‰è£…ç¨‹åºã€‚</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218150307923.png" alt="image-20220218150307923"></p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218150331712.png" alt="image-20220218150331712"></p><p>1 :ä¸‹è½½å¥½ Git çš„å®‰è£…åŒ…ï¼Œå¼€å§‹å®‰è£…ï¼Œæ‰“å¼€å®‰è£…åŒ…ï¼Œå‡ºç°å¦‚å›¾çš„ç•Œé¢ï¼Œæ— è„‘ä¸‹ä¸€æ­¥ä¸‹ä¸€æ­¥å°±å¯ä»¥äº†ã€‚<img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218150348271.png" alt="image-20220218150348271"></p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_16451679327135.png" alt="ä¼ä¸šå¾®ä¿¡æˆªå›¾_16451679327135"></p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218150626778.png" alt="image-20220218150626778"></p><p>2 :å®‰è£…å®Œæˆåï¼Œè¿›å…¥æ¡Œé¢</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218151356038.png" alt="image-20220218151356038"></p><p>è¾“å…¥ï¼šgit â€“version </p><p>â€‹    git â€“version</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218151506884.png" alt="image-20220218151506884"></p><p>å‡ºç°å›¾ç¤ºç‰ˆæœ¬å·å³ä¸ºæˆåŠŸ~ã€‚</p><h3 id="æ³¨å†Œè‡ªå·±çš„gitè´¦å·"><a href="#æ³¨å†Œè‡ªå·±çš„gitè´¦å·" class="headerlink" title="æ³¨å†Œè‡ªå·±çš„gitè´¦å·"></a>æ³¨å†Œè‡ªå·±çš„gitè´¦å·</h3><p>ç‚¹å‡»<a href="http://github.com/">GITå®˜ç½‘</a>è¿›å…¥å®˜ç½‘é¦–é¡µ</p><p>1 ï¼šç‚¹å‡»Sign up</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218152221368.png" alt="image-20220218152221368"></p><p>2ï¼šè¾“å…¥è‡ªå·±çš„é‚®ç®± ç‚¹å‡»ä¸‹ä¸€æ­¥</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218153522936.png" alt="image-20220218153522936"></p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218155212666.png" alt="image-20220218155212666"></p><p>3 è¾“å…¥åŸºæœ¬ä¿¡æ¯</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218155324491.png" alt="image-20220218155324491"></p><p>4é€‰æ‹©å…è´¹ç‰ˆæœ¬</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218155414427.png" alt="image-20220218155414427"></p><p>å‡ºç°å¦‚ä¸‹ç•Œé¢å°±è¡¨ç¤ºåˆ›å»ºæˆåŠŸï¼</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218155433547.png" alt="image-20220218155433547"></p><h2 id="å®‰è£…Node-js"><a href="#å®‰è£…Node-js" class="headerlink" title="å®‰è£…Node.js"></a>å®‰è£…Node.js</h2><h3 id="è¿›å…¥Node-jså®˜ç½‘"><a href="#è¿›å…¥Node-jså®˜ç½‘" class="headerlink" title="è¿›å…¥Node.jså®˜ç½‘"></a>è¿›å…¥<a href="https://nodejs.org/en/download/">Node.js</a>å®˜ç½‘</h3><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218160321638.png" alt="image-20220218160321638"></p><p> ä¸‹è½½åç‚¹å‡»å®‰è£…</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218160433837.png" alt="image-20220218160433837"></p><p>é€‰æ‹©è‡ªå·±çš„å®‰è£…è·¯å¾„</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218161424318.png" alt="image-20220218161424318"></p><p> ä¾æ—§æ˜¯æ— è„‘ä¸‹ä¸€æ­¥ä¸‹ä¸€æ­¥å®Œæˆå³å¯ã€‚ å‡ºç°å¦‚ä¸‹å›¾è¡¨ç¤ºå®‰è£…æˆåŠŸ</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218160956103.png" alt="image-20220218160956103"></p><p>æ‰“å¼€å‘½ä»¤æç¤ºç¬¦è¾“å…¥node -v å’Œ npm -v å‡ºç°ç‰ˆæœ¬å·å³ä¸ºæˆåŠŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218160543156.png" alt="image-20220218160543156"></p><h3 id="é…ç½®ç¯å¢ƒå˜é‡ï¼ˆé˜²æ­¢å®‰è£…çš„æ¨¡å—å’Œç¼“å­˜éƒ½åœ¨ç³»ç»Ÿç›˜cç›˜ï¼‰"><a href="#é…ç½®ç¯å¢ƒå˜é‡ï¼ˆé˜²æ­¢å®‰è£…çš„æ¨¡å—å’Œç¼“å­˜éƒ½åœ¨ç³»ç»Ÿç›˜cç›˜ï¼‰" class="headerlink" title="é…ç½®ç¯å¢ƒå˜é‡ï¼ˆé˜²æ­¢å®‰è£…çš„æ¨¡å—å’Œç¼“å­˜éƒ½åœ¨ç³»ç»Ÿç›˜cç›˜ï¼‰"></a>é…ç½®ç¯å¢ƒå˜é‡ï¼ˆé˜²æ­¢å®‰è£…çš„æ¨¡å—å’Œç¼“å­˜éƒ½åœ¨ç³»ç»Ÿç›˜cç›˜ï¼‰</h3><p>é…ç½®å…¨å±€å®‰è£…çš„æ¨¡å—è·¯å¾„å’Œç¼“å­˜è·¯å¾„ï¼ˆä¸ä¸€å®šæ˜¯å®‰è£…è·¯å¾„ï¼‰ åœ¨nodejsæ–‡ä»¶å¤¹,åˆ›å»º node_global åœ¨nodejsæ–‡ä»¶å¤¹,åˆ›å»º node_cache</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218161623497.png" alt="image-20220218161623497"></p><p>åˆ›å»ºå¥½åï¼Œåœ¨å‘½ä»¤æç¤ºç¬¦è¿è¡Œå¦‚ä¸‹å‘½ä»¤,è¾“å…¥å›è½¦å³å¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm config set prefix &quot;D:\nodejs\node_global&quot;</span><br><span class="line">npm config set cache &quot;D:\nodejs\node_cache&quot;</span><br></pre></td></tr></table></figure><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218162026857.png" alt="image-20220218162026857"></p><h3 id="é…ç½®ç¯å¢ƒå˜é‡"><a href="#é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½®ç¯å¢ƒå˜é‡"></a>é…ç½®ç¯å¢ƒå˜é‡</h3><ul><li><p>è¿›å…¥ â€œæˆ‘çš„ç”µè„‘â€-å³é”®-â€œå±æ€§â€-â€œé«˜çº§ç³»ç»Ÿè®¾ç½®â€-â€œé«˜çº§â€-â€œç¯å¢ƒå˜é‡â€</p></li><li><p>é€‰æ‹© ç³»ç»Ÿå˜é‡ åˆ›å»º NODE_PATH å˜é‡</p><ul><li>å˜é‡åï¼š<code>NODE_PATH</code></li><li>å˜é‡å€¼ï¼š<code>D:\Program Files\nodejs\node_modules</code>(å®‰è£…çš„è·¯å¾„)</li><li><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218162447899.png" alt="image-20220218162447899"></li></ul></li><li><p>åœ¨ ç³»ç»Ÿå˜é‡ ä¸­ é€‰æ‹© <strong>Path</strong> æ·»åŠ å¦‚ä¸‹å±æ€§ï¼š</p></li><li><p>æŠŠå‰åŠéƒ¨åˆ†çš„nodejsè·¯å¾„æ¢æˆè‡ªå·±çš„nodejsçš„è·¯å¾„</p></li></ul><h3 id="æµ‹è¯•å®‰è£…"><a href="#æµ‹è¯•å®‰è£…" class="headerlink" title="æµ‹è¯•å®‰è£…"></a>æµ‹è¯•å®‰è£…</h3><p> è¿›å…¥å‘½ä»¤æç¤ºç¬¦ è¾“å…¥å¦‚ä¸‹ä»£ç è¿›è¡Œå®‰è£…æµ‹è¯•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install express -g</span><br></pre></td></tr></table></figure><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218162910326.png" alt="image-20220218162910326"></p><p>åœ¨è‡ªå·±é…ç½®çš„D:\nodejs\node_global\node_modules ï¼ˆè¿™æ˜¯æˆ‘çš„ï¼‰å‡ºç°expressæ–‡ä»¶å¤¹åˆ™è¡¨ç¤ºæˆåŠŸ</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218162823732.png" alt="image-20220218162823732"></p><h3 id="ä¿®æ”¹npmæº"><a href="#ä¿®æ”¹npmæº" class="headerlink" title="ä¿®æ”¹npmæº"></a>ä¿®æ”¹npmæº</h3><p>ç”±äºå®˜æ–¹ NPM æºä¸‹è½½ åŒ…çš„é€Ÿåº¦å¤ªæ…¢ï¼Œæ‰€ä»¥æˆ‘ä»¬å°† NPM çš„æº æ›¿æ¢æˆ <code>æ·˜å®æº</code>ï¼Œå‘½ä»¤æç¤ºç¬¦è¿è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆ Node.jsçš„å®‰è£…å°±å®Œæˆäº†~ã€‚</p><h2 id="3ï¼šHexoå®‰è£…"><a href="#3ï¼šHexoå®‰è£…" class="headerlink" title="3ï¼šHexoå®‰è£…"></a>3ï¼šHexoå®‰è£…</h2><p>3.1    é¦–å…ˆè¿›å…¥ä¸€ä¸ªç£ç›˜ä½œä¸ºä½ åšå®¢æ–‡ä»¶çš„å­˜æ”¾ä½ç½®ï¼Œç„¶åæ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚åä¸º testBlog çš„æ–‡ä»¶å¤¹ï¼Œåˆ›å»ºå®Œåï¼Œå…ˆä¸è¦ç‚¹è¿›å»ï¼Œåœ¨æ­¤å¤„ç‚¹å‡»é¼ æ ‡å³é”®ï¼Œé€‰æ‹© <code>Git Bash Here</code>ï¼Œç„¶åä¾æ¬¡è¾“å…¥å¦‚ä¸‹å‘½ä»¤</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218164115552.png" alt="image-20220218164115552"></p><p>å³é”® Git Bash Here ä¾æ¬¡è¾“å…¥ä»¥ä¸‹å‘½ä»¤å³å¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#1:hexoæ¡†æ¶å®‰è£…</span><br><span class="line">npm install -g hexo-cli</span><br><span class="line">#2:åˆå§‹åŒ–æ–‡ä»¶å¤¹</span><br><span class="line">hexo init &lt;æ–°å»ºæ–‡ä»¶å¤¹çš„åç§°&gt;  </span><br><span class="line">#3:è¿›å…¥ä½ çš„æ–‡ä»¶å¤¹</span><br><span class="line">cd &lt;æ–°å»ºæ–‡ä»¶å¤¹çš„åç§°&gt;</span><br><span class="line">#4:å®‰è£…åšå®¢æ‰€éœ€è¦çš„ä¾èµ–æ–‡ä»¶</span><br><span class="line">npm install </span><br></pre></td></tr></table></figure><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218164606559.png" alt="image-20220218164606559"></p><p>å®‰è£…å®Œæˆå è¾“å…¥å¦‚ä¸‹å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g #ç”Ÿæˆæ–‡ä»¶</span><br><span class="line">hexo s #å¯åŠ¨é¡¹ç›®</span><br></pre></td></tr></table></figure><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218164852678.png" alt="image-20220218164852678"></p><p>åœ¨æµè§ˆå™¨è¾“å…¥<a href="http://localhost:4000/">http://localhost:4000/</a> å‡ºç°å¦‚ä¸‹æ ·å¼åˆ™è¡¨æ˜æ‚¨çš„åšå®¢æ­å»ºå®Œæˆå•¦~</p><p><img src="https://cienacloud-1301881073.cos.ap-shanghai.myqcloud.com/images/blog/image-20220218165112643.png" alt="image-20220218165112643"></p><h2 id="4ï¼šå®‰è£…VsCode"><a href="#4ï¼šå®‰è£…VsCode" class="headerlink" title="4ï¼šå®‰è£…VsCode"></a>4ï¼šå®‰è£…VsCode</h2><p>â€‹                VsCodeä»‹ç»  ï¼šVSCodeï¼ˆå…¨ç§°ï¼šVisual Studio Codeï¼‰æ˜¯ä¸€æ¬¾ç”±å¾®è½¯å¼€å‘ä¸”è·¨å¹³å°çš„å…è´¹æºä»£ç ç¼–è¾‘å™¨ã€‚è¯¥è½¯ä»¶æ”¯æŒè¯­æ³•é«˜äº®ã€ä»£ç è‡ªåŠ¨è¡¥å…¨ï¼ˆåˆç§° IntelliSenseï¼‰ã€ä»£ç é‡æ„ã€æŸ¥çœ‹å®šä¹‰åŠŸèƒ½ï¼Œå¹¶ä¸”å†…ç½®äº†å‘½ä»¤è¡Œå·¥å…·å’Œ Git ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚ç”¨æˆ·å¯ä»¥æ›´æ”¹ä¸»é¢˜å’Œé”®ç›˜å¿«æ·æ–¹å¼å®ç°ä¸ªæ€§åŒ–è®¾ç½®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å†…ç½®çš„æ‰©å±•ç¨‹åºå•†åº—å®‰è£…æ‰©å±•ä»¥æ‹“å±•è½¯ä»¶åŠŸèƒ½ã€‚</p><p>VS Code ä½¿ç”¨ Monaco Editor ä½œä¸ºå…¶åº•å±‚çš„ä»£ç ç¼–è¾‘å™¨ã€‚</p><p>åœ¨ 2019 å¹´çš„ Stack Overflow ç»„ç»‡çš„å¼€å‘è€…è°ƒæŸ¥ä¸­ï¼ŒVisual Studio Code è¢«è®¤ä¸ºæ˜¯æœ€å—å¼€å‘è€…æ¬¢è¿çš„å¼€å‘ç¯å¢ƒã€‚</p><p>Visual Studio Code é»˜è®¤æ”¯æŒéå¸¸å¤šçš„ç¼–ç¨‹è¯­è¨€ï¼ŒåŒ…æ‹¬ JavaScriptã€TypeScriptã€CSS å’Œ HTMLï¼›ä¹Ÿå¯ä»¥é€šè¿‡ä¸‹è½½æ‰©å±•æ”¯æŒ Pythonã€C/C++ã€Java å’Œ Go åœ¨å†…çš„å…¶ä»–è¯­è¨€ã€‚æ”¯æŒåŠŸèƒ½åŒ…æ‹¬è¯­æ³•é«˜äº®ã€æ‹¬å·è¡¥å…¨ã€ä»£ç æŠ˜å å’Œä»£ç ç‰‡æ®µï¼›å¯¹äºéƒ¨åˆ†è¯­è¨€ï¼Œå¯ä»¥ä½¿ç”¨ IntelliSenseã€‚Visual Studio Code ä¹Ÿæ”¯æŒè°ƒè¯• Node.js ç¨‹åºã€‚å’Œ GitHub çš„ Atomä¸€æ ·ï¼ŒVisual Studio Code ä¹ŸåŸºäº Electron æ¡†æ¶æ„å»ºã€‚</p><p>Visual Studio Code æ”¯æŒåŒæ—¶æ‰“å¼€å¤šä¸ªç›®å½•ï¼Œå¹¶å°†ä¿¡æ¯ä¿å­˜åœ¨å·¥ä½œåŒºä¸­ä»¥ä¾¿å¤ç”¨ã€‚</p><p>ä½œä¸ºè·¨å¹³å°çš„ç¼–è¾‘å™¨ï¼ŒVisual Studio Code å…è®¸ç”¨æˆ·æ›´æ”¹æ–‡ä»¶çš„ä»£ç é¡µã€æ¢è¡Œç¬¦å’Œç¼–ç¨‹è¯­è¨€ã€‚</p><p>ä½¿ç”¨æ­¤ç¼–è¾‘å™¨èƒ½å¤Ÿæ›´å¥½çš„å¸®åŠ©æˆ‘ä»¬æ‰¾åˆ°ä»£ç éœ€è¦ä¿®æ”¹ç¼–è¾‘çš„åœ°æ–¹ï¼Œæå‡è‡ªå·±çš„æ•ˆç‡ã€‚</p><h3 id="å®‰è£…VsCode"><a href="#å®‰è£…VsCode" class="headerlink" title="å®‰è£…VsCode"></a>å®‰è£…<a href="https://code.visualstudio.com/Download">VsCode</a></h3><p><img src="http://www.cineacloud.cloud/che/createBlog/image-20220314170143849.png" alt="image-20220314170143849"></p><p><img src="http://www.cineacloud.cloud/che/createBlog/RdNbTSV.png" alt="img"></p><p>é€‰ä¸­æ¥å—åè®®é€‰é¡¹ï¼Œç„¶åç‚¹å‡» Nextï¼š</p><p><img src="http://www.cineacloud.cloud/che/createBlog/QS0i03A.png" alt="img"></p><p>é€‰æ‹©å®‰è£…è·¯å¾„ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨é»˜è®¤çš„ï¼š</p><p><img src="http://www.cineacloud.cloud/che/createBlog/PJQW7JX.png" alt="img"></p><p>ç‚¹å‡» Nextï¼š</p><p><img src="http://www.cineacloud.cloud/che/createBlog/uETeoPN.png" alt="img"></p><p>æ³¨æ„å®‰è£…è·¯å¾„è®¾ç½®ã€ç¯å¢ƒå˜é‡é»˜è®¤è‡ªåŠ¨æ·»åŠ åˆ°ç³»ç»Ÿä¸­ï¼Œå‹¾é€‰ä»¥ä¸‹æ‰€æœ‰é€‰é¡¹ï¼š</p><p><img src="http://www.cineacloud.cloud/che/createBlog/RM04TZb.png" alt="img"></p><p>æœ€åæˆ‘ä»¬ç‚¹å‡» Install å°±å¯ä»¥å®Œæˆå®‰è£…äº†ï¼š</p><p><img src="http://www.cineacloud.cloud/che/createBlog/4ySmHjw.png" alt="img"></p><p><img src="http://www.cineacloud.cloud/che/createBlog/a0SB4Wc.png" alt="img"></p><hr><h2 id="å®‰è£…æ±‰åŒ–åŒ…"><a href="#å®‰è£…æ±‰åŒ–åŒ…" class="headerlink" title="å®‰è£…æ±‰åŒ–åŒ…"></a>å®‰è£…æ±‰åŒ–åŒ…</h2><p>VScode å®‰è£…æ±‰åŒ–åŒ…å¾ˆç®€å•ï¼Œæ‰“å¼€ VScodeï¼Œç‚¹å‡»å®‰è£…æ‰©å±•ï¼Œåœ¨æœç´¢æ¡†è¾“å…¥ Chineseï¼Œç„¶åç‚¹ Install å°±å¯ä»¥ï¼š</p><p><img src="http://www.cineacloud.cloud/che/createBlog/8F3353F0-343A-4469-8EEB-DAD1A050BA2F.jpeg" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> åšå®¢æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åšå®¢æ­å»º </tag>
            
            <tag> hexo </tag>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>amræ–‡ä»¶è½¬æ¢ä¸ºmp3æ–‡ä»¶</title>
      <link href="/2022/01/10/amr%E8%BD%AC%E6%8D%A2%E6%88%90MP3/"/>
      <url>/2022/01/10/amr%E8%BD%AC%E6%8D%A2%E6%88%90MP3/</url>
      
        <content type="html"><![CDATA[<h1 id="å¾®ä¿¡å…¬ä¼—å·å½•éŸ³æ–‡ä»¶-amræ–‡ä»¶è½¬mp3"><a href="#å¾®ä¿¡å…¬ä¼—å·å½•éŸ³æ–‡ä»¶-amræ–‡ä»¶è½¬mp3" class="headerlink" title="å¾®ä¿¡å…¬ä¼—å·å½•éŸ³æ–‡ä»¶(amræ–‡ä»¶è½¬mp3)"></a>å¾®ä¿¡å…¬ä¼—å·å½•éŸ³æ–‡ä»¶(amræ–‡ä»¶è½¬mp3)</h1><p><strong>éŸ³é¢‘è½¬ç å·¥å…·ï¼Œä¸»è¦ç”¨äºå°†å¾®ä¿¡è¯­éŸ³ amr æ ¼å¼è½¬æ¢ä¸º mp3 æ ¼å¼ä»¥ä¾¿åœ¨ html5 çš„ audio æ ‡ç­¾ä¸­è¿›è¡Œæ’­æ”¾</strong></p><p>1.è°ƒç”¨å¾®ä¿¡æä¾›çš„æ¥å£è·å–å½•éŸ³çš„InputStreamå­—èŠ‚æµ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> InputStream <span class="title">getInputStream</span><span class="params">(String mediaId)</span> </span>&#123;</span><br><span class="line">    InputStream is = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        String URL_DOWNLOAD_TEMP_MEDIA = <span class="string">&quot;https://api.weixin.qq.com/cgi-bin/media/get?access_token=ACCESS_TOKEN&amp;media_id=MEDIA_ID&quot;</span>;</span><br><span class="line">        String url = URL_DOWNLOAD_TEMP_MEDIA.replace(<span class="string">&quot;ACCESS_TOKEN&quot;</span>, <span class="string">&quot;è‡ªå·±å†™ä»£ç è·å–accessToken&quot;</span>).replace(<span class="string">&quot;MEDIA_ID&quot;</span>, mediaId);</span><br><span class="line">        URL urlGet = <span class="keyword">new</span> URL(url);</span><br><span class="line">        HttpURLConnection http = (HttpURLConnection) urlGet.openConnection();</span><br><span class="line">        http.setRequestMethod(<span class="string">&quot;GET&quot;</span>); <span class="comment">// å¿…é¡»æ˜¯getæ–¹å¼è¯·æ±‚</span></span><br><span class="line">        http.setRequestProperty(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/x-www-form-urlencoded&quot;</span>);</span><br><span class="line">        http.setDoOutput(<span class="keyword">true</span>);</span><br><span class="line">        http.setDoInput(<span class="keyword">true</span>);</span><br><span class="line">        System.setProperty(<span class="string">&quot;sun.net.client.defaultConnectTimeout&quot;</span>, <span class="string">&quot;30000&quot;</span>);<span class="comment">// è¿æ¥è¶…æ—¶30ç§’</span></span><br><span class="line">        System.setProperty(<span class="string">&quot;sun.net.client.defaultReadTimeout&quot;</span>, <span class="string">&quot;30000&quot;</span>); <span class="comment">// è¯»å–è¶…æ—¶30ç§’</span></span><br><span class="line">        http.connect();</span><br><span class="line">        <span class="comment">// è·å–æ–‡ä»¶è½¬åŒ–ä¸ºbyteæµ</span></span><br><span class="line">        is = http.getInputStream();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> is;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.å°†è·å–åˆ°çš„å­—èŠ‚æµä¿å­˜ä¸ºamræ–‡ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">downloadMediaId</span><span class="params">(HttpServletRequest request, String mediaId)</span> </span>&#123;</span><br><span class="line">    String relfilePath = <span class="keyword">null</span>;</span><br><span class="line">    InputStream inputStream = getInputStream(mediaId);</span><br><span class="line">    FileOutputStream fileOutputStream = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//æœåŠ¡å™¨èµ„æºä¿å­˜è·¯å¾„</span></span><br><span class="line">        String savePath = request.getSession().getServletContext().getRealPath(<span class="string">&quot;/&quot;</span>) + <span class="string">&quot;upload/&quot;</span> + DateUtil.getYear() + <span class="string">&quot;/wxmedia/audio/&quot;</span>;</span><br><span class="line">        savePath = savePath + <span class="string">&quot;audio/&quot;</span>; </span><br><span class="line">        String filename = String.valueOf(System.currentTimeMillis()) + <span class="string">&quot;.amr&quot;</span>;</span><br><span class="line">        relfilePath = <span class="string">&quot;upload/&quot;</span> + DateUtil.getYear() + <span class="string">&quot;/wxmedia/audio/&quot;</span> + filename;</span><br><span class="line">        File file = <span class="keyword">new</span> File(savePath);</span><br><span class="line">        <span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">            file.mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        fileOutputStream = <span class="keyword">new</span> FileOutputStream(savePath + filename);</span><br><span class="line">        <span class="keyword">while</span> ((len = inputStream.read(data)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// åˆ¤æ–­ç»“æœæ˜¯å¦æœ‰é”™</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">new</span> String(data).indexOf(<span class="string">&quot;errmsg&quot;</span>) &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            fileOutputStream.write(data, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (inputStream != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                inputStream.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (fileOutputStream != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fileOutputStream.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> relfilePath;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>3.å°†ä¿å­˜çš„amræ–‡ä»¶è½¬æˆmp3æ–‡ä»¶</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">amrToMp3</span><span class="params">(String sourcePath, String targetPath)</span> </span>&#123;</span><br><span class="line">    File source = <span class="keyword">new</span> File(sourcePath);</span><br><span class="line">    File target = <span class="keyword">new</span> File(targetPath);</span><br><span class="line">    AudioUtils.amrToMp3(source, target);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>4.æ‰€éœ€çš„jaråŒ…ä¾èµ–</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;!--amræ–‡ä»¶è½¬éŸ³é¢‘mapæ–‡ä»¶--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.github.dadiyang&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jave&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">1.0</span><span class="number">.3</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h1 id="éŸ³é¢‘è½¬ç å·¥å…·"><a href="#éŸ³é¢‘è½¬ç å·¥å…·" class="headerlink" title="éŸ³é¢‘è½¬ç å·¥å…·"></a>éŸ³é¢‘è½¬ç å·¥å…·</h1><p>æ”¯æŒ Linux/Windows/Mac å¹³å°</p><p>å› ä¸ºæ˜¯åŸºäº JAVE é¡¹ç›®çš„ä¿®æ”¹ï¼Œè€Œ JAVE æ˜¯ä¾èµ– ffmpeg æ‰€ä»¥å¯ä»¥é€‚ç”¨äºæ‰€æœ‰ ffmpeg æ‰€æ”¯æŒçš„æ–‡ä»¶æ ¼å¼çš„è½¬æ¢ã€‚å…·ä½“å¯ä»¥æŸ¥çœ‹ JAVE å®˜æ–¹æ–‡æ¡£</p><h1 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h1><ol><li>åˆå§‹åŒ–æ—¶åˆ¤æ–­å½“å‰è¿è¡Œç¯å¢ƒï¼Œå°†binç›®å½•ä¸­å¯¹åº”çš„ ffmpeg å¯æ‰§è¡Œæ–‡ä»¶æ‹·è´åˆ°ä¸´æ—¶ç›®å½•ä¸­</li><li>æ ¹æ®æ–‡ä»¶ç±»å‹åŠé…ç½®é€šè¿‡ Runtime.getRuntime().exec(cmd) æ‰§è¡Œ ffmpeg å¯¹åº”çš„è½¬ç å‘½ä»¤</li></ol><h1 id="JAVE-é¡¹ç›®çš„é—®é¢˜"><a href="#JAVE-é¡¹ç›®çš„é—®é¢˜" class="headerlink" title="JAVE é¡¹ç›®çš„é—®é¢˜"></a>JAVE é¡¹ç›®çš„é—®é¢˜</h1><p>ffmpeg æ˜¯ä¾èµ–è¿è¡Œç¯å¢ƒçš„ï¼ŒJAVE é¡¹ç›®å°è£…äº†ffmpegï¼Œå®ƒé€šè¿‡ä¸Šè¿°çš„åŸç†ä½¿ java å¯ä»¥è°ƒç”¨ffmpegè€Œä¸”æ”¯æŒè·¨å¹³å°ã€‚</p><ol><li>é¡¹ç›®è€æ—§æ²¡å†ç»´æŠ¤ã€‚å®˜ç½‘æœ€è¿‘ç‰ˆæœ¬æ˜¯2009å¹´å‘å¸ƒçš„ï¼Œå…¶ä¾èµ–çš„ffmpegæ—©å·²è¿‡æ—¶ï¼Œå¾ˆå¤šæƒ…å†µä¸‹ç”¨ä¸äº†ã€‚</li><li>è½¬ç ä¸€ç›´æŠ¥å¼‚å¸¸ EncoderException: Stream mapping</li><li>æ²¡æœ‰å‘å¸ƒmavenä»“åº“ï¼Œè€Œä¸” JAVE æœ¬èº«ä¹Ÿä¸æ˜¯ä¸€ä¸ªmavené¡¹ç›®</li><li>ä¸æ”¯æŒmac</li></ol><h1 id="æœ¬é¡¹ç›®ç‰¹ç‚¹"><a href="#æœ¬é¡¹ç›®ç‰¹ç‚¹" class="headerlink" title="æœ¬é¡¹ç›®ç‰¹ç‚¹"></a>æœ¬é¡¹ç›®ç‰¹ç‚¹</h1><p>æœ¬é¡¹ç›®ä¸ºè§£å†³ä¸Šè¿°é—®é¢˜è€Œç”Ÿã€‚</p><ul><li>è¿™æ˜¯ä¸€ä¸ªmavené¡¹ç›®ï¼Œè€Œä¸”å·²å‘å¸ƒåˆ°ä¸­å¤®ä»“åº“ã€‚</li><li>é¡¹ç›®ä¾èµ–çš„ ffmpeg å¯æ‰§è¡Œæ–‡ä»¶ç»è¿‡éªŒè¯å¯ä»¥ä½¿ç”¨ï¼ˆå•å…ƒæµ‹è¯•ä¸­æä¾›äº†ä¸€ä¸ªç®€å•çš„æ£€éªŒæ–¹æ³•ï¼‰</li><li>è§£å†³äº†amrè½¬mp3å‡ºç°çš„ EncoderException: Stream mapping</li><li>æ”¯æŒ Linux/Windows/Mac å¹³å°</li></ul><h1 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h1><p>å¦‚æœç¨‹åºæ— æ³•é€šè¿‡æ‹·è´èµ„æºæ–‡ä»¶çš„æ–¹å¼è·å–åˆ° ffmpeg çš„å¯æ‰§è¡Œæ–‡ä»¶æˆ–è€…å†…ç½®çš„ ffmpeg ä¸æ”¯æŒä½ æ‰€ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿ</p><p>ä½ å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡æˆ–è€…åœ¨ java ä¸­è®¾ç½® <code>System.setProperty(&quot;ffmpeg.home&quot;, &quot;ffmpegå¯æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•&quot;)</code> çš„æ–¹å¼æŒ‡å®šä½ çš„ç³»ç»Ÿä¸­å®‰è£…çš„å¯ç”¨çš„ ffmpeg æ–‡ä»¶çš„ç›®å½•</p><p>å¦‚ <code>System.setProperty(&quot;ffmpeg.home&quot;, &quot;/usr/local/bin/&quot;)</code></p><p>ä½œè€…ï¼šllsydn<br>é“¾æ¥ï¼š<a href="https://juejin.cn/post/6994592524232818695">https://juejin.cn/post/6994592524232818695</a></p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> å…¬ä¼—å·å¼€å‘ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
